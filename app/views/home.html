<!-- <div ng-click="forceCloseDetail()"> -->
<div id="page">
  <div id="buscador">
   <form id="mainForm" accept-charset="utf-8">
    <!-- <label for="search">Buscar</label>
  <input type="text" size="40" name="search" id="search" title="Lugar a buscar" class="text"/>
  <br>
  <span id="ejemplo">ej.: Callao y Corrientes, Florida 550, Teatro San Martín, etc.</span>
  <br> -->

  <!-- MARKERS METHOD -->
  <!-- <div class="checkbox">
      <label>
        <input ng-model="valor" value="1" type="checkbox" name="actividades"
             ng-change='usig.addMarkers()' ng-true-value="1" ng-false-value="0">
        Escuelas infantiles
      </label>
  </div>
  <div class="checkbox">
      <label>
        <input ng-model="valor2" value="2" type="checkbox" name="actividades"
             ng-change='usig.addMarkers()' ng-true-value="2" ng-false-value="0">
        Centros de reciclado
      </label>
  </div>
  <div class="checkbox">
      <label>
        <input ng-model="valor3" value="3" type="checkbox" name="actividades"
             ng-change='usig.addMarkers()' ng-true-value="2" ng-false-value="0">
        Puestos de recolección
      </label>
  </div>
  <div id="mapa"></div> -->

   </form>
  </div>
</div>
<div id="mapa"><p class="indicator">Cargando...</p></div>

<div id="panel-informacion" class="informacion">
	<div class="content">
		<form role="form">
			<div class="form-group">
				<div class="checkbox">
  					<label>
    					<input ng-change='usigLayers.cargarLayers()' ng-model="valor1" type="checkbox" value="estaciones_de_bicicletas" name="actividades" checked>
    					Ecobicis
  					</label>
				</div>
        <div class="checkbox">
  					<label>
    					<input ng-change='usigLayers.cargarLayers()' ng-model="valor2" type="checkbox" value="servicios_sociales&tipo=11" name="actividades" checked>
    					Centro integral de la mujer
  					</label>
				</div>
        <div class="checkbox">
            <label>
              <input ng-change='usigLayers.cargarLayers()' ng-model="valor3" type="checkbox" value="puntos_wifi&etapa=Segunda+etapa+HRL&antena_principal=True" name="actividades" checked>
              Wifi segunda etapa
            </label>
        </div>
			</div>

		</form>
	</div>
</div>

<style>
#panel-informacion .content:after {
  position: absolute;
  top: 15px;
  left: 15px;
  font-size: 12px;
  font-weight: 700;
  color: #959595;
  text-transform: uppercase;
  letter-spacing: 1px;
  content: "Dependencias Culturales";
}
</style>
<script type="text/javascript">

  // Definicion del namespace
  var usig = usig || {};
  usig.App = usig.App || {};

  usig.App.config = {
  	server_url: '//epok.buenosaires.gob.ar/',
  	symbols_url: '//static.mapa.buenosaires.gob.ar/symbols/',
  	backgrounds_url: '//static.mapa.buenosaires.gob.ar/images/markers/fondos/',
  	baseLayer: "mapabsas_informacion_basica",
  	initBounds: [85000,96750,112000,106750],
  	pointRadius: 18,
  	minPointRadius: 11,
  	inverseIcons: [8, 9, 11, 12, 13, 15],
  	layers: {
      'estaciones_de_bicicletas': { name: 'Bibliotecas', icon: 'biblioteca', bg: '1'},
      'servicios_sociales&tipo=11': { name: 'Centros integrales de la mujer', icon: 'centro_de_atencion_a_mujeres', bg: '2'},
  		'puntos_wifi&etapa=Segunda+etapa+HRL&antena_principal=True': { name: 'Centros Culturales', icon: 'wifi', bg: '3'},
  	}
  };

</script>



<div id="form-ui" class="row" ng-cloak ng-hide="loading" ng-click="forceCloseDetail()">
   <div class="row filters padding">
      <h3>Explorador de compromisos</h3>
      <p class="col-xs-12 col-sm-6">Filtrar por área:</p>
      <div id="selectsContainer" class="col-xs-12 col-sm-6">
              <a class="action" ng-click="setAllFilters()">Seleccionar todos  - </a>
              <a class="action" ng-click="removeAllFilters()">Deseleccionar todos  </a>
         </div>
      </div>
   <div class="row filters">
      <div class="homeAreaContainer">
         <p id="form-ui-1">
            <label id="checkboxButton" ng-repeat="area in areas" on-finish-render="ngRepeatFinished" class="inactive" >
            <input id="categories" class="categories checkMyCheck" type="checkbox" value=".{{area}}" /> {{area.toLowerCase().split('-').join(' ')}}
            </label>
         </p>
      </div>
   </div>
   <div class="row filters">
      <div id="homeTextContainer" class="col-xs-12 col-sm-4 filters" >
         <p>Buscar por palabra clave:</p>
         <!-- <input id="searchTextInput" type="text" ng-model="search.titulo" ng-click="setTextFilter()"> -->
         <input id="searchTextInput" type="text" ng-model="search" ng-change="setTextFilter()">
      </div>
      <div id="homeYearContainer" class="col-xs-12 col-sm-4 filters" >
         <p>Filtrar por año de cumplimiento:</p>
         <div class="">

               <label ng-repeat="cump in cumplimiento | orderBy: cump">
                  <input type="radio" class="years" value=".{{cump}}" name=".years" />
            {{cump}}</label>

         </div>
      </div>
      <div id="homePercentContainer" class="col-xs-12 col-sm-4 filters">
         <p>Filtrar por avance:</p>
         <div >
            <label><input type="radio" class="percent" value=".very-low" name="percentage" />0%-25%</label>
            <label><input type="radio" class="percent" value=".low" name="percentage" />25%-50%</label>
            <label><input type="radio" class="percent" value=".high" name="percentage" />50%-75%</label>
            <label><input type="radio" class="percent" value=".very-high" name="percentage" />75%-100%</label>


         </div>
         </div>
   </div>
   <hr/>
</div>

<ul id="isotopeContainer" ng-click="forceCloseDetail();$event.stopPropagation();"isotope-container="isotope-container" class="compromisos-container">
  <!-- <ul id="isotopeContainer" isotope-container="isotope-container" class="compromisos-container"> -->
  <li ng-repeat="d in data" isotope-item="isotope-item" class="compromiso-row {{d.slug}} {{d.cumplimiento}} {{d.porcentaje_completado}} {{d.area1.toLowerCase().split(' ').join('-')}} {{d.area2.toLowerCase().split(' ').join('-')}} {{d.area3.toLowerCase().split(' ').join('-')}}  {{d.titulo.toLowerCase().split(' ').join(' ')}}
  {{d.area4.toLowerCase().split(' ').join('-')}} col-xs-3 item {{d.classPercent}} allFilters"
      ng-click="showCompromisoDetail(d,$event);$event.stopPropagation();">
      <img class="icon-svg-container compromiso-icon" ng-src="{{d.iconSVG}}">
      <h4 class="titulo">{{d.titulo}}</h4>
   </li>
</ul>
<p class="text-center" ng-show="loading">Cargando...</p>
<div ng-cloak ng-hide="loading">
   <div class="row">
   </div>
   <div id="compromiso-detail" class="row well" ng-cloak ng-show="currentCompromise">
      <div class="header">
         <div class="row">
            <div class="col-xs-8 label-text">
               <img class="icon-svg-container compromiso-icon" ng-src="{{currentCompromise.iconSVG}}">
               <h5>{{currentCompromise.titulo}}</h5>
            </div>
            <div class="col-xs-4">
               <h5 class="text-right close"><a class="" href="javascript:;" ng-click="closeDetail()">
 <span class="glyphicon glyphicon-remove white"></span></a></h5>
            </div>
         </div>
      </div>
      <div class="col-sm-4 hidden-device photo-frame">
         <img class="photo" ng-src="{{currentCompromise.imagen}}">
      </div>
      <div class="col-xs-12 col-sm-6">
         <div class="row">
            <div class="col-sm-12">
               <h3><small>{{currentCompromise.categoria}}</small></h3>
               <h3>{{currentCompromise.titulo}}</h3>
               <p> {{currentCompromise.desc}}</p>
            </div>
            <div class="col-sm-12">
               <p class="upper"><strong>Estado del Compromiso</strong></p>
               <p ng-cloak ng-show="currentCompromise.metrica"> ¿Cómo lo medimos? <strong>{{currentCompromise.metrica}}</strong></p>
               <div class="progress">
                  <div class="progress-bar bg-color-{{currentCompromise.slug}}"
                     role="progressbar"
                     ng-style="{ 'width': currentCompromise.porcentaje_completado + '%' }">
                     <span class="progressbar-w" ng-hide="currentCompromise.porcentaje_completado<50">{{currentCompromise.porcentaje_completado}}% </span>
                  </div>
                  <div class="progress-w" ng-show="!currentCompromise.porcentaje_completado">
                     <p>-</p>
                  </div>
                  <div class="progress-w second-progress" ng-show="currentCompromise.porcentaje_completado<50" ng-style="{ 'width': (100 - currentCompromise.porcentaje_completado) + '%' }">{{currentCompromise.porcentaje_completado}}% </div>
               </div>
            </div>

                  <div class="col-xs-6 col-md-6">
                     <p> </p>
                  </div>
                  <div class="col-xs-6 col-md-6">
                     <p class="right"ng-cloak ng-show="currentCompromise.cumplimiento"> Fecha Finalización <strong>{{currentCompromise.cumplimiento}}</strong></p>
                  </div>

               <div class="col-xs-12">
                  <a ng-href="{{currentCompromise.url_interna}}" target="_blank" ng-hide="currentCompromise.url_interna === undefined" class="btn full btn-xs upper bg-color-{{currentCompromise.slug}}  center-block" >Ver mas sobre el compromiso &#187;  </a>
               </div>
            </div>
         </div>
            <div class="col-xs-12 label-text header-map" ng-if="currentCompromise.embed_map_titulo" >
                  <h6>{{currentCompromise.embed_map_titulo}}</h6>
               </div>

           <div ng-if="currentCompromise.embed_map_url" class="col-xs-12 map-container">
             <iframe width="100%" height="385"  src="{{currentCompromise.embed_map_url | trustAsResourceUrl}}"  frameborder="0">

              </iframe>
           </div>
      </div>
   <!-- </div> -->
   <div id="filler"></div>
</div>
</div>
