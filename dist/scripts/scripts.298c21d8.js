!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define("d3plus-text",["exports"],b):b(a.d3plus=a.d3plus||{})}(this,function(a){"use strict";function b(a){var b=a+="",c=b.indexOf(":");return c>=0&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1)),ad.hasOwnProperty(b)?{space:ad[b],local:a}:a}function c(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return c===_c&&b.documentElement.namespaceURI===_c?b.createElement(a):b.createElementNS(c,a)}}function d(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}function e(a){var e=b(a);return(e.local?d:c)(e)}function f(a,b,c){return a=g(a,b,c),function(b){var c=b.relatedTarget;c&&(c===this||8&c.compareDocumentPosition(this))||a.call(this,b)}}function g(a,b,c){return function(d){var e=gd;gd=d;try{a.call(this,this.__data__,b,c)}finally{gd=e}}}function h(a){return a.trim().split(/^|\s+/).map(function(a){var b="",c=a.indexOf(".");return c>=0&&(b=a.slice(c+1),a=a.slice(0,c)),{type:a,name:b}})}function i(a){return function(){var b=this.__on;if(b){for(var c,d=0,e=-1,f=b.length;f>d;++d)c=b[d],a.type&&c.type!==a.type||c.name!==a.name?b[++e]=c:this.removeEventListener(c.type,c.listener,c.capture);++e?b.length=e:delete this.__on}}}function j(a,b,c){var d=fd.hasOwnProperty(a.type)?f:g;return function(e,f,g){var h,i=this.__on,j=d(b,f,g);if(i)for(var k=0,l=i.length;l>k;++k)if((h=i[k]).type===a.type&&h.name===a.name)return this.removeEventListener(h.type,h.listener,h.capture),this.addEventListener(h.type,h.listener=j,h.capture=c),void(h.value=b);this.addEventListener(a.type,j,c),h={type:a.type,name:a.name,value:b,listener:j,capture:c},i?i.push(h):this.__on=[h]}}function k(a,b,c){var d,e,f=h(a+""),g=f.length;if(!(arguments.length<2)){for(k=b?j:i,null==c&&(c=!1),d=0;g>d;++d)this.each(k(f[d],b,c));return this}var k=this.node().__on;if(k)for(var l,m=0,n=k.length;n>m;++m)for(d=0,l=k[m];g>d;++d)if((e=f[d]).type===l.type&&e.name===l.name)return l.value}function l(){}function m(a){return null==a?l:function(){return this.querySelector(a)}}function n(a){"function"!=typeof a&&(a=m(a));for(var b=this._groups,c=b.length,d=new Array(c),e=0;c>e;++e)for(var f,g,h=b[e],i=h.length,j=d[e]=new Array(i),k=0;i>k;++k)(f=h[k])&&(g=a.call(f,f.__data__,k,h))&&("__data__"in f&&(g.__data__=f.__data__),j[k]=g);return new Da(d,this._parents)}function o(){return[]}function p(a){return null==a?o:function(){return this.querySelectorAll(a)}}function q(a){"function"!=typeof a&&(a=p(a));for(var b=this._groups,c=b.length,d=[],e=[],f=0;c>f;++f)for(var g,h=b[f],i=h.length,j=0;i>j;++j)(g=h[j])&&(d.push(a.call(g,g.__data__,j,h)),e.push(g));return new Da(d,e)}function r(a){"function"!=typeof a&&(a=ed(a));for(var b=this._groups,c=b.length,d=new Array(c),e=0;c>e;++e)for(var f,g=b[e],h=g.length,i=d[e]=[],j=0;h>j;++j)(f=g[j])&&a.call(f,f.__data__,j,g)&&i.push(f);return new Da(d,this._parents)}function s(a){return new Array(a.length)}function t(){return new Da(this._enter||this._groups.map(s),this._parents)}function u(a,b){this.ownerDocument=a.ownerDocument,this.namespaceURI=a.namespaceURI,this._next=null,this._parent=a,this.__data__=b}function v(a){return function(){return a}}function w(a,b,c,d,e,f){for(var g,h=0,i=b.length,j=f.length;j>h;++h)(g=b[h])?(g.__data__=f[h],d[h]=g):c[h]=new u(a,f[h]);for(;i>h;++h)(g=b[h])&&(e[h]=g)}function x(a,b,c,d,e,f,g){var h,i,j,k={},l=b.length,m=f.length,n=new Array(l);for(h=0;l>h;++h)(i=b[h])&&(n[h]=j=id+g.call(i,i.__data__,h,b),j in k?e[h]=i:k[j]=i);for(h=0;m>h;++h)j=id+g.call(a,f[h],h,f),(i=k[j])?(d[h]=i,i.__data__=f[h],k[j]=null):c[h]=new u(a,f[h]);for(h=0;l>h;++h)(i=b[h])&&k[n[h]]===i&&(e[h]=i)}function y(a,b){if(!a)return n=new Array(this.size()),j=-1,this.each(function(a){n[++j]=a}),n;var c=b?x:w,d=this._parents,e=this._groups;"function"!=typeof a&&(a=v(a));for(var f=e.length,g=new Array(f),h=new Array(f),i=new Array(f),j=0;f>j;++j){var k=d[j],l=e[j],m=l.length,n=a.call(k,k&&k.__data__,j,d),o=n.length,p=h[j]=new Array(o),q=g[j]=new Array(o),r=i[j]=new Array(m);c(k,l,p,q,r,n,b);for(var s,t,u=0,y=0;o>u;++u)if(s=p[u]){for(u>=y&&(y=u+1);!(t=q[y])&&++y<o;);s._next=t||null}}return g=new Da(g,d),g._enter=h,g._exit=i,g}function z(){return new Da(this._exit||this._groups.map(s),this._parents)}function A(a){for(var b=this._groups,c=a._groups,d=b.length,e=c.length,f=Math.min(d,e),g=new Array(d),h=0;f>h;++h)for(var i,j=b[h],k=c[h],l=j.length,m=g[h]=new Array(l),n=0;l>n;++n)(i=j[n]||k[n])&&(m[n]=i);for(;d>h;++h)g[h]=b[h];return new Da(g,this._parents)}function B(){for(var a=this._groups,b=-1,c=a.length;++b<c;)for(var d,e=a[b],f=e.length-1,g=e[f];--f>=0;)(d=e[f])&&(g&&g!==d.nextSibling&&g.parentNode.insertBefore(d,g),g=d);return this}function C(a){function b(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}a||(a=D);for(var c=this._groups,d=c.length,e=new Array(d),f=0;d>f;++f){for(var g,h=c[f],i=h.length,j=e[f]=new Array(i),k=0;i>k;++k)(g=h[k])&&(j[k]=g);j.sort(b)}return new Da(e,this._parents).order()}function D(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function E(){var a=arguments[0];return arguments[0]=this,a.apply(null,arguments),this}function F(){var a=new Array(this.size()),b=-1;return this.each(function(){a[++b]=this}),a}function G(){for(var a=this._groups,b=0,c=a.length;c>b;++b)for(var d=a[b],e=0,f=d.length;f>e;++e){var g=d[e];if(g)return g}return null}function H(){var a=0;return this.each(function(){++a}),a}function I(){return!this.node()}function J(a){for(var b=this._groups,c=0,d=b.length;d>c;++c)for(var e,f=b[c],g=0,h=f.length;h>g;++g)(e=f[g])&&a.call(e,e.__data__,g,f);return this}function K(a){return function(){this.removeAttribute(a)}}function L(a){return function(){this.removeAttributeNS(a.space,a.local)}}function M(a,b){return function(){this.setAttribute(a,b)}}function N(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}function O(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}function P(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}function Q(a,c){var d=b(a);if(arguments.length<2){var e=this.node();return d.local?e.getAttributeNS(d.space,d.local):e.getAttribute(d)}return this.each((null==c?d.local?L:K:"function"==typeof c?d.local?P:O:d.local?N:M)(d,c))}function R(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function S(a){return function(){this.style.removeProperty(a)}}function T(a,b,c){return function(){this.style.setProperty(a,b,c)}}function U(a,b,c){return function(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}function V(a,b,c){var d;return arguments.length>1?this.each((null==b?S:"function"==typeof b?U:T)(a,b,null==c?"":c)):R(d=this.node()).getComputedStyle(d,null).getPropertyValue(a)}function W(a){return function(){delete this[a]}}function X(a,b){return function(){this[a]=b}}function Y(a,b){return function(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}function Z(a,b){return arguments.length>1?this.each((null==b?W:"function"==typeof b?Y:X)(a,b)):this.node()[a]}function $(a){return a.trim().split(/^|\s+/)}function _(a){return a.classList||new aa(a)}function aa(a){this._node=a,this._names=$(a.getAttribute("class")||"")}function ba(a,b){for(var c=_(a),d=-1,e=b.length;++d<e;)c.add(b[d])}function ca(a,b){for(var c=_(a),d=-1,e=b.length;++d<e;)c.remove(b[d])}function da(a){return function(){ba(this,a)}}function ea(a){return function(){ca(this,a)}}function fa(a,b){return function(){(b.apply(this,arguments)?ba:ca)(this,a)}}function ga(a,b){var c=$(a+"");if(arguments.length<2){for(var d=_(this.node()),e=-1,f=c.length;++e<f;)if(!d.contains(c[e]))return!1;return!0}return this.each(("function"==typeof b?fa:b?da:ea)(c,b))}function ha(){this.textContent=""}function ia(a){return function(){this.textContent=a}}function ja(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}function ka(a){return arguments.length?this.each(null==a?ha:("function"==typeof a?ja:ia)(a)):this.node().textContent}function la(){this.innerHTML=""}function ma(a){return function(){this.innerHTML=a}}function na(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}function oa(a){return arguments.length?this.each(null==a?la:("function"==typeof a?na:ma)(a)):this.node().innerHTML}function pa(){this.nextSibling&&this.parentNode.appendChild(this)}function qa(){return this.each(pa)}function ra(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sa(){return this.each(ra)}function ta(a){var b="function"==typeof a?a:e(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})}function ua(){return null}function va(a,b){var c="function"==typeof a?a:e(a),d=null==b?ua:"function"==typeof b?b:m(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})}function wa(){var a=this.parentNode;a&&a.removeChild(this)}function xa(){return this.each(wa)}function ya(a){return arguments.length?this.property("__data__",a):this.node().__data__}function za(a,b,c){var d=R(a),e=d.CustomEvent;e?e=new e(b,c):(e=d.document.createEvent("Event"),c?(e.initEvent(b,c.bubbles,c.cancelable),e.detail=c.detail):e.initEvent(b,!1,!1)),a.dispatchEvent(e)}function Aa(a,b){return function(){return za(this,a,b)}}function Ba(a,b){return function(){return za(this,a,b.apply(this,arguments))}}function Ca(a,b){return this.each(("function"==typeof b?Ba:Aa)(a,b))}function Da(a,b){this._groups=a,this._parents=b}function Ea(){return new Da([[document.documentElement]],jd)}function Fa(a){return"string"==typeof a?new Da([[document.querySelector(a)]],[document.documentElement]):new Da([[a]],jd)}function Ga(){for(var a,b=0,c=arguments.length,d={};c>b;++b){if(!(a=arguments[b]+"")||a in d)throw new Error("illegal type: "+a);d[a]=[]}return new Ha(d)}function Ha(a){this._=a}function Ia(a,b){return a.trim().split(/^|\s+/).map(function(a){var c="",d=a.indexOf(".");if(d>=0&&(c=a.slice(d+1),a=a.slice(0,d)),a&&!b.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:c}})}function Ja(a,b){for(var c,d=0,e=a.length;e>d;++d)if((c=a[d]).name===b)return c.value}function Ka(a,b,c){for(var d=0,e=a.length;e>d;++d)if(a[d].name===b){a[d]=kd,a=a.slice(0,d).concat(a.slice(d+1));break}return null!=c&&a.push({name:b,value:c}),a}function La(){return sd||(vd(Ma),sd=ud.now()+td)}function Ma(){sd=0}function Na(){this._call=this._time=this._next=null}function Oa(a,b,c){var d=new Na;return d.restart(a,b,c),d}function Pa(){La(),++nd;for(var a,b=ld;b;)(a=sd-b._time)>=0&&b._call.call(null,a),b=b._next;--nd}function Qa(a){sd=(rd=a||ud.now())+td,nd=od=0;try{Pa()}finally{nd=0,Sa(),sd=0}}function Ra(){var a=ud.now(),b=a-rd;b>qd&&(td-=b,rd=a)}function Sa(){for(var a,b,c=ld,d=1/0;c;)c._call?(d>c._time&&(d=c._time),a=c,c=c._next):(b=c._next,c._next=null,c=a?a._next=b:ld=b);md=a,Ta(d)}function Ta(a){if(!nd){od&&(od=clearTimeout(od));var b=a-sd;b>24?(1/0>a&&(od=setTimeout(Qa,b)),pd&&(pd=clearInterval(pd))):(pd||(pd=setInterval(Ra,qd)),nd=1,vd(Qa))}}function Ua(a,b,c){var d=new Na;return b=null==b?0:+b,d.restart(function(c){d.stop(),a(c+b)},b,c),d}function Va(a,b,c,d,e,f){var g=a.__transition;if(g){if(c in g)return}else a.__transition={};Za(a,c,{name:b,index:d,group:e,on:wd,tween:xd,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:yd})}function Wa(a,b){var c=a.__transition;if(!c||!(c=c[b])||c.state>yd)throw new Error("too late");return c}function Xa(a,b){var c=a.__transition;if(!c||!(c=c[b])||c.state>Ad)throw new Error("too late");return c}function Ya(a,b){var c=a.__transition;if(!c||!(c=c[b]))throw new Error("too late");return c}function Za(a,b,c){function d(a){c.state=zd,c.delay<=a?e(a-c.delay):c.timer.restart(e,c.delay,c.time)}function e(d){var e,i,j,k;for(e in h)k=h[e],k.name===c.name&&(k.state===Bd?(k.state=Dd,k.timer.stop(),k.on.call("interrupt",a,a.__data__,k.index,k.group),delete h[e]):b>+e&&(k.state=Dd,k.timer.stop(),delete h[e]));if(Ua(function(){c.state===Bd&&(c.timer.restart(f,c.delay,c.time),f(d))}),c.state=Ad,c.on.call("start",a,a.__data__,c.index,c.group),c.state===Ad){for(c.state=Bd,g=new Array(j=c.tween.length),e=0,i=-1;j>e;++e)(k=c.tween[e].value.call(a,a.__data__,c.index,c.group))&&(g[++i]=k);g.length=i+1}}function f(d){for(var e=d<c.duration?c.ease.call(null,d/c.duration):(c.state=Cd,1),f=-1,i=g.length;++f<i;)g[f].call(null,e);if(c.state===Cd){c.state=Dd,c.timer.stop(),c.on.call("end",a,a.__data__,c.index,c.group);for(f in h)if(+f!==b)return void delete h[b];delete a.__transition}}var g,h=a.__transition;h[b]=c,c.timer=Oa(d,0,c.time)}function $a(a,b){var c,d,e,f=a.__transition,g=!0;if(f){b=null==b?null:b+"";for(e in f)(c=f[e]).name===b?(d=c.state===Bd,c.state=Dd,c.timer.stop(),d&&c.on.call("interrupt",a,a.__data__,c.index,c.group),delete f[e]):g=!1;g&&delete a.__transition}}function _a(a){return this.each(function(){$a(this,a)})}function ab(a,b,c){a.prototype=b.prototype=c,c.constructor=a}function bb(a,b){var c=Object.create(a.prototype);for(var d in b)c[d]=b[d];return c}function cb(){}function db(a){var b;return a=(a+"").trim().toLowerCase(),(b=Gd.exec(a))?(b=parseInt(b[1],16),new ib(b>>8&15|b>>4&240,b>>4&15|240&b,(15&b)<<4|15&b,1)):(b=Hd.exec(a))?eb(parseInt(b[1],16)):(b=Id.exec(a))?new ib(b[1],b[2],b[3],1):(b=Jd.exec(a))?new ib(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=Kd.exec(a))?fb(b[1],b[2],b[3],b[4]):(b=Ld.exec(a))?fb(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=Md.exec(a))?jb(b[1],b[2]/100,b[3]/100,1):(b=Nd.exec(a))?jb(b[1],b[2]/100,b[3]/100,b[4]):Od.hasOwnProperty(a)?eb(Od[a]):"transparent"===a?new ib(NaN,NaN,NaN,0):null}function eb(a){return new ib(a>>16&255,a>>8&255,255&a,1)}function fb(a,b,c,d){return 0>=d&&(a=b=c=NaN),new ib(a,b,c,d)}function gb(a){return a instanceof cb||(a=db(a)),a?(a=a.rgb(),new ib(a.r,a.g,a.b,a.opacity)):new ib}function hb(a,b,c,d){return 1===arguments.length?gb(a):new ib(a,b,c,null==d?1:d)}function ib(a,b,c,d){this.r=+a,this.g=+b,this.b=+c,this.opacity=+d}function jb(a,b,c,d){return 0>=d?a=b=c=NaN:0>=c||c>=1?a=b=NaN:0>=b&&(a=NaN),new mb(a,b,c,d)}function kb(a){if(a instanceof mb)return new mb(a.h,a.s,a.l,a.opacity);if(a instanceof cb||(a=db(a)),!a)return new mb;if(a instanceof mb)return a;a=a.rgb();var b=a.r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),f=Math.max(b,c,d),g=NaN,h=f-e,i=(f+e)/2;return h?(g=b===f?(c-d)/h+6*(d>c):c===f?(d-b)/h+2:(b-c)/h+4,h/=.5>i?f+e:2-f-e,g*=60):h=i>0&&1>i?0:g,new mb(g,h,i,a.opacity)}function lb(a,b,c,d){return 1===arguments.length?kb(a):new mb(a,b,c,null==d?1:d)}function mb(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function nb(a,b,c){return 255*(60>a?b+(c-b)*a/60:180>a?c:240>a?b+(c-b)*(240-a)/60:b)}function ob(a){if(a instanceof qb)return new qb(a.l,a.a,a.b,a.opacity);if(a instanceof xb){var b=a.h*Pd;return new qb(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}a instanceof ib||(a=gb(a));var c=ub(a.r),d=ub(a.g),e=ub(a.b),f=rb((.4124564*c+.3575761*d+.1804375*e)/Sd),g=rb((.2126729*c+.7151522*d+.072175*e)/Td),h=rb((.0193339*c+.119192*d+.9503041*e)/Ud);return new qb(116*g-16,500*(f-g),200*(g-h),a.opacity)}function pb(a,b,c,d){return 1===arguments.length?ob(a):new qb(a,b,c,null==d?1:d)}function qb(a,b,c,d){this.l=+a,this.a=+b,this.b=+c,this.opacity=+d}function rb(a){return a>Yd?Math.pow(a,1/3):a/Xd+Vd}function sb(a){return a>Wd?a*a*a:Xd*(a-Vd)}function tb(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function ub(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function vb(a){if(a instanceof xb)return new xb(a.h,a.c,a.l,a.opacity);a instanceof qb||(a=ob(a));var b=Math.atan2(a.b,a.a)*Qd;return new xb(0>b?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function wb(a,b,c,d){return 1===arguments.length?vb(a):new xb(a,b,c,null==d?1:d)}function xb(a,b,c,d){this.h=+a,this.c=+b,this.l=+c,this.opacity=+d}function yb(a){if(a instanceof Ab)return new Ab(a.h,a.s,a.l,a.opacity);a instanceof ib||(a=gb(a));var b=a.r/255,c=a.g/255,d=a.b/255,e=(ee*d+ce*b-de*c)/(ee+ce-de),f=d-e,g=(be*(c-e)-_d*f)/ae,h=Math.sqrt(g*g+f*f)/(be*e*(1-e)),i=h?Math.atan2(g,f)*Qd-120:NaN;return new Ab(0>i?i+360:i,h,e,a.opacity)}function zb(a,b,c,d){return 1===arguments.length?yb(a):new Ab(a,b,c,null==d?1:d)}function Ab(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function Bb(a){return function(){return a}}function Cb(a,b){return function(c){return a+c*b}}function Db(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(d){return Math.pow(a+d*b,c)}}function Eb(a,b){var c=b-a;return c?Cb(a,c>180||-180>c?c-360*Math.round(c/360):c):Bb(isNaN(a)?b:a)}function Fb(a){return 1===(a=+a)?Gb:function(b,c){return c-b?Db(b,c,a):Bb(isNaN(b)?c:b)}}function Gb(a,b){var c=b-a;return c?Cb(a,c):Bb(isNaN(a)?b:a)}function Hb(a,b){return a=+a,b-=a,function(c){return a+b*c}}function Ib(a){return function(){return a}}function Jb(a){return function(b){return a(b)+""}}function Kb(a,b){var c,d,e,f=ke.lastIndex=le.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=ke.exec(a))&&(d=le.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:Hb(c,d)})),f=le.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?Jb(i[0].x):Ib(b):(b=i.length,function(a){for(var c,d=0;b>d;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function Lb(a,b,c,d,e,f){var g,h,i;return(g=Math.sqrt(a*a+b*b))&&(a/=g,b/=g),(i=a*c+b*d)&&(c-=a*i,d-=b*i),(h=Math.sqrt(c*c+d*d))&&(c/=h,d/=h,i/=h),b*c>a*d&&(a=-a,b=-b,i=-i,g=-g),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*me,skewX:Math.atan(i)*me,scaleX:g,scaleY:h}}function Mb(a){if("none"===a)return ne;fe||(fe=document.createElement("DIV"),ge=document.documentElement,he=document.defaultView),fe.style.transform=a,a=he.getComputedStyle(ge.appendChild(fe),null).getPropertyValue("transform"),ge.removeChild(fe);var b=a.slice(7,-1).split(",");return Lb(+b[0],+b[1],+b[2],+b[3],+b[4],+b[5])}function Nb(a){ie||(ie=document.createElementNS("http://www.w3.org/2000/svg","g")),ie.setAttribute("transform",null==a?"":a);var b=ie.transform.baseVal.consolidate().matrix;return Lb(b.a,b.b,b.c,b.d,b.e,b.f)}function Ob(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}function f(a,d,e,f,g,h){if(a!==e||d!==f){var i=g.push("translate(",null,b,null,c);h.push({i:i-4,x:Hb(a,e)},{i:i-2,x:Hb(d,f)})}else(e||f)&&g.push("translate("+e+b+f+c)}function g(a,b,c,f){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),f.push({i:c.push(e(c)+"rotate(",null,d)-2,x:Hb(a,b)})):b&&c.push(e(c)+"rotate("+b+d)}function h(a,b,c,f){a!==b?f.push({i:c.push(e(c)+"skewX(",null,d)-2,x:Hb(a,b)}):b&&c.push(e(c)+"skewX("+b+d)}function i(a,b,c,d,f,g){if(a!==c||b!==d){var h=f.push(e(f)+"scale(",null,",",null,")");g.push({i:h-4,x:Hb(a,c)},{i:h-2,x:Hb(b,d)})}else 1===c&&1===d||f.push(e(f)+"scale("+c+","+d+")")}return function(b,c){var d=[],e=[];return b=a(b),c=a(c),f(b.translateX,b.translateY,c.translateX,c.translateY,d,e),g(b.rotate,c.rotate,d,e),h(b.skewX,c.skewX,d,e),i(b.scaleX,b.scaleY,c.scaleX,c.scaleY,d,e),b=c=null,function(a){for(var b,c=-1,f=e.length;++c<f;)d[(b=e[c]).i]=b.x(a);return d.join("")}}}function Pb(a){return function b(c){function d(b,d){var e=a((b=zb(b)).h,(d=zb(d)).h),f=Gb(b.s,d.s),g=Gb(b.l,d.l),h=Gb(b.opacity,d.opacity);return function(a){return b.h=e(a),b.s=f(a),b.l=g(Math.pow(a,c)),b.opacity=h(a),b+""}}return c=+c,d.gamma=b,d}(1)}function Qb(a,b){var c,d;return function(){var e=Xa(this,a),f=e.tween;if(f!==c){d=c=f;for(var g=0,h=d.length;h>g;++g)if(d[g].name===b){d=d.slice(),d.splice(g,1);break}}e.tween=d}}function Rb(a,b,c){var d,e;if("function"!=typeof c)throw new Error;return function(){var f=Xa(this,a),g=f.tween;if(g!==d){e=(d=g).slice();for(var h={name:b,value:c},i=0,j=e.length;j>i;++i)if(e[i].name===b){e[i]=h;break}i===j&&e.push(h)}f.tween=e}}function Sb(a,b){var c=this._id;if(a+="",arguments.length<2){for(var d,e=Ya(this.node(),c).tween,f=0,g=e.length;g>f;++f)if((d=e[f]).name===a)return d.value;return null}return this.each((null==b?Qb:Rb)(c,a,b))}function Tb(a,b,c){var d=a._id;return a.each(function(){var a=Xa(this,d);(a.value||(a.value={}))[b]=c.apply(this,arguments)}),function(a){return Ya(a,d).value[b]}}function Ub(a,b){var c;return("number"==typeof b?Hb:b instanceof db?je:(c=db(b))?(b=c,je):Kb)(a,b)}function Vb(a){return function(){this.removeAttribute(a)}}function Wb(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Xb(a,b,c){var d,e;return function(){var f=this.getAttribute(a);return f===c?null:f===d?e:e=b(d=f,c)}}function Yb(a,b,c){var d,e;return function(){var f=this.getAttributeNS(a.space,a.local);return f===c?null:f===d?e:e=b(d=f,c)}}function Zb(a,b,c){var d,e,f;return function(){var g,h=c(this);return null==h?void this.removeAttribute(a):(g=this.getAttribute(a),g===h?null:g===d&&h===e?f:f=b(d=g,e=h))}}function $b(a,b,c){var d,e,f;return function(){var g,h=c(this);return null==h?void this.removeAttributeNS(a.space,a.local):(g=this.getAttributeNS(a.space,a.local),g===h?null:g===d&&h===e?f:f=b(d=g,e=h))}}function _b(a,c){var d=b(a),e="transform"===d?pe:Ub;return this.attrTween(a,"function"==typeof c?(d.local?$b:Zb)(d,e,Tb(this,"attr."+a,c)):null==c?(d.local?Wb:Vb)(d):(d.local?Yb:Xb)(d,e,c))}function ac(a,b){function c(){var c=this,d=b.apply(c,arguments);return d&&function(b){c.setAttributeNS(a.space,a.local,d(b))}}return c._value=b,c}function bc(a,b){function c(){var c=this,d=b.apply(c,arguments);return d&&function(b){c.setAttribute(a,d(b))}}return c._value=b,c}function cc(a,c){var d="attr."+a;if(arguments.length<2)return(d=this.tween(d))&&d._value;if(null==c)return this.tween(d,null);if("function"!=typeof c)throw new Error;var e=b(a);return this.tween(d,(e.local?ac:bc)(e,c))}function dc(a,b){return function(){Wa(this,a).delay=+b.apply(this,arguments)}}function ec(a,b){return b=+b,function(){Wa(this,a).delay=b}}function fc(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?dc:ec)(b,a)):Ya(this.node(),b).delay}function gc(a,b){return function(){Xa(this,a).duration=+b.apply(this,arguments)}}function hc(a,b){return b=+b,function(){Xa(this,a).duration=b}}function ic(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?gc:hc)(b,a)):Ya(this.node(),b).duration}function jc(a,b){if("function"!=typeof b)throw new Error;return function(){Xa(this,a).ease=b}}function kc(a){var b=this._id;return arguments.length?this.each(jc(b,a)):Ya(this.node(),b).ease}function lc(a){"function"!=typeof a&&(a=ed(a));for(var b=this._groups,c=b.length,d=new Array(c),e=0;c>e;++e)for(var f,g=b[e],h=g.length,i=d[e]=[],j=0;h>j;++j)(f=g[j])&&a.call(f,f.__data__,j,g)&&i.push(f);return new Gc(d,this._parents,this._name,this._id)}function mc(a){if(a._id!==this._id)throw new Error;for(var b=this._groups,c=a._groups,d=b.length,e=c.length,f=Math.min(d,e),g=new Array(d),h=0;f>h;++h)for(var i,j=b[h],k=c[h],l=j.length,m=g[h]=new Array(l),n=0;l>n;++n)(i=j[n]||k[n])&&(m[n]=i);for(;d>h;++h)g[h]=b[h];return new Gc(g,this._parents,this._name,this._id)}function nc(a){return(a+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");return b>=0&&(a=a.slice(0,b)),!a||"start"===a})}function oc(a,b,c){var d,e,f=nc(b)?Wa:Xa;return function(){var g=f(this,a),h=g.on;h!==d&&(e=(d=h).copy()).on(b,c),g.on=e}}function pc(a,b){var c=this._id;return arguments.length<2?Ya(this.node(),c).on.on(a):this.each(oc(c,a,b))}function qc(a){return function(){var b=this.parentNode;for(var c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}}function rc(){return this.on("end.remove",qc(this._id))}function sc(a){var b=this._name,c=this._id;"function"!=typeof a&&(a=m(a));for(var d=this._groups,e=d.length,f=new Array(e),g=0;e>g;++g)for(var h,i,j=d[g],k=j.length,l=f[g]=new Array(k),n=0;k>n;++n)(h=j[n])&&(i=a.call(h,h.__data__,n,j))&&("__data__"in h&&(i.__data__=h.__data__),l[n]=i,Va(l[n],b,c,n,l,Ya(h,c)));return new Gc(f,this._parents,b,c)}function tc(a){var b=this._name,c=this._id;"function"!=typeof a&&(a=p(a));for(var d=this._groups,e=d.length,f=[],g=[],h=0;e>h;++h)for(var i,j=d[h],k=j.length,l=0;k>l;++l)if(i=j[l]){for(var m,n=a.call(i,i.__data__,l,j),o=Ya(i,c),q=0,r=n.length;r>q;++q)(m=n[q])&&Va(m,b,c,q,n,o);f.push(n),g.push(i)}return new Gc(f,g,b,c)}function uc(){return new qe(this._groups,this._parents)}function vc(a,b){var c,d,e;return function(){var f=R(this).getComputedStyle(this,null),g=f.getPropertyValue(a),h=(this.style.removeProperty(a),f.getPropertyValue(a));return g===h?null:g===c&&h===d?e:e=b(c=g,d=h)}}function wc(a){return function(){this.style.removeProperty(a)}}function xc(a,b,c){var d,e;return function(){var f=R(this).getComputedStyle(this,null).getPropertyValue(a);return f===c?null:f===d?e:e=b(d=f,c)}}function yc(a,b,c){var d,e,f;return function(){var g=R(this).getComputedStyle(this,null),h=g.getPropertyValue(a),i=c(this);return null==i&&(this.style.removeProperty(a),i=g.getPropertyValue(a)),h===i?null:h===d&&i===e?f:f=b(d=h,e=i)}}function zc(a,b,c){var d="transform"==(a+="")?oe:Ub;return null==b?this.styleTween(a,vc(a,d)).on("end.style."+a,wc(a)):this.styleTween(a,"function"==typeof b?yc(a,d,Tb(this,"style."+a,b)):xc(a,d,b),c)}function Ac(a,b,c){function d(){var d=this,e=b.apply(d,arguments);return e&&function(b){d.style.setProperty(a,e(b),c)}}return d._value=b,d}function Bc(a,b,c){var d="style."+(a+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(null==b)return this.tween(d,null);if("function"!=typeof b)throw new Error;return this.tween(d,Ac(a,b,null==c?"":c))}function Cc(a){return function(){this.textContent=a}}function Dc(a){return function(){var b=a(this);this.textContent=null==b?"":b}}function Ec(a){return this.tween("text","function"==typeof a?Dc(Tb(this,"text",a)):Cc(null==a?"":a+""))}function Fc(){for(var a=this._name,b=this._id,c=Ic(),d=this._groups,e=d.length,f=0;e>f;++f)for(var g,h=d[f],i=h.length,j=0;i>j;++j)if(g=h[j]){var k=Ya(g,b);Va(g,a,c,j,h,{time:k.time+k.delay+k.duration,delay:0,duration:k.duration,ease:k.ease})}return new Gc(d,this._parents,a,c)}function Gc(a,b,c,d){this._groups=a,this._parents=b,this._name=c,this._id=d}function Hc(a){return Ea().transition(a)}function Ic(){return++re}function Jc(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}function Kc(a,b){for(var c;!(c=a.__transition)||!(c=c[b]);)if(!(a=a.parentNode))return ye.time=La(),ye;return c}function Lc(a){var b,c;a instanceof Gc?(b=a._id,a=a._name):(b=Ic(),(c=ye).time=La(),a=null==a?null:a+"");for(var d=this._groups,e=d.length,f=0;e>f;++f)for(var g,h=d[f],i=h.length,j=0;i>j;++j)(g=h[j])&&Va(g,a,b,j,h,c||Kc(g,b));return new Gc(d,this._parents,a,b)}function Mc(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function Nc(a){return 1===a.length&&(a=Oc(a)),{left:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function Oc(a){return function(b,c){return Mc(a(b),c)}}function Pc(a,b){var c,d,e=-1,f=a.length;if(null==b){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b(a[e],e,a))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b(a[e],e,a))&&d>c&&(c=d)}return c}function Qc(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c}function Rc(a,b){var c,d,e=-1,f=a.length;if(null==b){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f;)if(null!=(d=b(a[e],e,a))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b(a[e],e,a))&&c>d&&(c=d)}return c}function Sc(a,b){var c,d=0,e=a.length,f=-1;if(null==b)for(;++f<e;)(c=+a[f])&&(d+=c);else for(;++f<e;)(c=+b(a[f],f,a))&&(d+=c);return d}function Tc(a,b){return void 0===b?function(b){return b[a]}:function(c){return void 0===c[a]?b:c[a]}}function Uc(a){return function(){return a}}function Vc(a){return void 0===a?a="undefined":"string"==typeof a||a instanceof String||(a=JSON.stringify(a)),a}function Wc(a){return Me.test(a)?Qc(Vc(a).match(Ke).map(function(a){return!Le.test(a)&&Me.test(a)?a.match(Ne):[a]})):Vc(a).match(Ke)}function Xc(a,b){void 0===b&&(b={"font-size":10,"font-family":"sans-serif"});var c=document.createElement("canvas").getContext("2d"),d=[];if("font-style"in b&&d.push(b["font-style"]),"font-variant"in b&&d.push(b["font-variant"]),"font-weight"in b&&d.push(b["font-weight"]),"font-size"in b){var e=b["font-size"]+"px";"line-height"in b&&(e+="/"+b["line-height"]+"px"),d.push(e)}return"font-family"in b&&d.push(b["font-family"]),c.font=d.join(" "),a instanceof Array?a.map(function(a){return c.measureText(a).width}):c.measureText(a).width}function Yc(){function a(a){a=Vc(a),void 0===b&&(b=Math.ceil(1.1*d));for(var i=g(a),j={"font-family":c,"font-size":d,"line-height":b},k=1,l="",m=!1,n=0,o=[""],p=Xc(i,j),q=Xc(" ",j),r=0;r<i.length;r++){var s=i[r],t=a.charAt(l.length+s.length),u=p[i.indexOf(s)];if(" "===t&&(s+=t),n+u>h-d){if(o[k-1]=o[k-1].trimRight(),k++,b*k>e||u>h&&!f){m=!0;break}n=0,o.push(s)}else o[k-1]+=s;l+=s,n+=u," "===t&&(n+=q)}return{lines:o,sentence:a,truncated:m,words:i}}var b,c="sans-serif",d=10,e=200,f=!1,g=Wc,h=200;return a.fontFamily=function(b){return arguments.length?(c=b,a):c},a.fontSize=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(e=b,a):e},a.lineHeight=function(c){return arguments.length?(b=c,a):b},a.overflow=function(b){return arguments.length?(f=b,a):f},a.split=function(b){return arguments.length?(g=b,a):g},a.width=function(b){return arguments.length?(h=b,a):h},a}function Zc(a,b){return a.id||""+b}function $c(a){function b(a){return a+"..."}function c(b){void 0===f&&c.select(Oe.select("body").append("svg").style("width",window.innerWidth+"px").style("height",window.innerHeight+"px").node()),void 0===e&&(e=function(a,b){return 1.1*o(a,b)});var z=f.selectAll(".d3plus-text-box").data(a,q),A=Oe.transition().duration(i);z.exit().transition().delay(i).remove(),z.exit().selectAll("tspan").transition(A).attr("opacity",0);for(var B=z.enter().append("text").attr("class","d3plus-text-box").attr("id",function(a,b){return"d3plus-text-box-"+q(a,b)}).merge(z).attr("y",function(a,b){return y(a,b)+"px"}).attr("fill",function(a,b){return d(a,b)}).attr("text-anchor",function(a,b){return u(a,b)}).attr("font-family",function(a,b){return k(a,b)}).each(function(a,b){function c(){if(C>i)return void(z=[]);i>B&&(i=B),g&&(q=1.1*i,K.fontSize(i).lineHeight(q),A["font-size"]=i,A["line-height"]=q);var a=K(E);z=a.lines,y=z.length,a.truncated&&(g?(i--,C>i?z=[]:c()):2!==y||z[y-2].length?z[y-2]=j(z[y-2]):z=[])}function d(c){c.text(function(a){return a.trimRight()}).attr("x",x(a,b)+"px").attr("dx",J+"px").attr("dy",q+"px")}var f,g=n(a,b),i=g?l(a,b):o(a,b),q=g?1.1*i:e(a,b),y=1,z=[""],A={"font-family":k(a,b),"font-size":i,"line-height":q},B=l(a,b),C=m(a,b),D=p(a,b),E=t(a,b),F=u(a,b),G=v(a,b),H=w(a,b),I=s(E,b),J="start"===F?0:"end"===F?H:H/2,K=Yc().fontFamily(A["font-family"]).fontSize(i).lineHeight(q).height(D).overflow(r(a,b)).width(H);if(D>q||g){if(g){f=Xc(I,A);var L=1.165+H/D*.1,M=H*D,N=Oe.max(f),O=Oe.sum(f,function(a){return a*q})*L;if(N>H||O>M){var P=Math.sqrt(M/O),Q=H/N,R=Oe.min([P,Q]);i=Math.floor(i*R)}var S=Math.floor(.8*D);i>S&&(i=S)}c(),Oe.select(this).attr("font-size",i+"px").style("font-size",i+"px")}var T=Oe.select(this),U=y*q,V="top"===G?0:"middle"===G?D/2-U/2:D-U;V-=.2*q,null===T.attr("transform")?T.attr("transform","translate(0,"+V+")"):T.transition(E).attr("transform","translate(0,"+V+")");var W=Oe.select(this).selectAll("tspan").data(z);W.transition(E).call(d),W.exit().transition(E).attr("opacity",0).remove(),W.enter().append("tspan").attr("dominant-baseline","alphabetic").style("baseline-shift","0%").attr("opacity",0).call(d).transition(E).delay(h).attr("opacity",1)}),C=Object.keys(g),D=0;D<C.length;D++)B.on(C[D],g[C[D]]);return b&&setTimeout(b,i+100),
c}void 0===a&&(a=[]);var d,e,f,g={},h=0,i=0,j=b,k=Uc("sans-serif"),l=Uc(50),m=Uc(8),n=Uc(!1),o=Uc(10),p=Tc("height",200),q=Zc,r=Uc(!1),s=Wc,t=Tc("text"),u=Uc("start"),v=Uc("top"),w=Tc("width",200),x=Tc("x",0),y=Tc("y",0);return c.config=function(a){if(arguments.length){for(var b in a)({}).hasOwnProperty.call(a,b)&&c[b](a[b]);return c}var d={};for(var e in c.prototype.constructor)"config"!==e&&{}.hasOwnProperty.call(c,e)&&(d[e]=c[e]());return d},c.data=function(b){return arguments.length?(a=b,c):a},c.delay=function(a){return arguments.length?(h=a,c):h},c.duration=function(a){return arguments.length?(i=a,c):i},c.ellipsis=function(a){return arguments.length?(j="function"==typeof a?a:Uc(a),c):j},c.fontColor=function(a){return arguments.length?(d="function"==typeof a?a:Uc(a),c):d},c.fontFamily=function(a){return arguments.length?(k="function"==typeof a?a:Uc(a),c):k},c.fontMax=function(a){return arguments.length?(l="function"==typeof a?a:Uc(a),c):l},c.fontMin=function(a){return arguments.length?(m="function"==typeof a?a:Uc(a),c):m},c.fontResize=function(a){return arguments.length?(n="function"==typeof a?a:Uc(a),c):n},c.fontSize=function(a){return arguments.length?(o="function"==typeof a?a:Uc(a),c):o},c.height=function(a){return arguments.length?(p="function"==typeof a?a:Uc(a),c):p},c.id=function(a){return arguments.length?(q="function"==typeof a?a:Uc(a),c):q},c.lineHeight=function(a){return arguments.length?(e="function"==typeof a?a:Uc(a),c):e},c.on=function(a,b){return 2===arguments.length?(g[a]=b,c):arguments.length?g[a]:g},c.overflow=function(a){return arguments.length?(r="function"==typeof a?a:Uc(a),c):r},c.select=function(a){return arguments.length?(f=Oe.select(a),void 0===d&&c.fontColor(f.style("font-color")),void 0===k&&c.fontFamily(f.style("font-family")),void 0===o&&c.fontSize(parseFloat(f.style("font-size"),10)),c):f},c.split=function(a){return arguments.length?(s=a,c):s},c.text=function(a){return arguments.length?(t="function"==typeof a?a:Uc(a),c):t},c.textAnchor=function(a){return arguments.length?(u="function"==typeof a?a:Uc(a),c):u},c.verticalAlign=function(a){return arguments.length?(v="function"==typeof a?a:Uc(a),c):v},c.width=function(a){return arguments.length?(w="function"==typeof a?a:Uc(a),c):w},c.x=function(a){return arguments.length?(x="function"==typeof a?a:Uc(a),c):x},c.y=function(a){return arguments.length?(y="function"==typeof a?a:Uc(a),c):y},a.length?c():c}var _c="http://www.w3.org/1999/xhtml",ad={svg:"http://www.w3.org/2000/svg",xhtml:_c,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bd=function(a){return function(){return this.matches(a)}};if("undefined"!=typeof document){var cd=document.documentElement;if(!cd.matches){var dd=cd.webkitMatchesSelector||cd.msMatchesSelector||cd.mozMatchesSelector||cd.oMatchesSelector;bd=function(a){return function(){return dd.call(this,a)}}}}var ed=bd,fd={},gd=null;if("undefined"!=typeof document){var hd=document.documentElement;"onmouseenter"in hd||(fd={mouseenter:"mouseover",mouseleave:"mouseout"})}u.prototype={constructor:u,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};var id="$";aa.prototype={add:function(a){var b=this._names.indexOf(a);0>b&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var b=this._names.indexOf(a);b>=0&&(this._names.splice(b,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};var jd=[null];Da.prototype=Ea.prototype={constructor:Da,select:n,selectAll:q,filter:r,data:y,enter:t,exit:z,merge:A,order:B,sort:C,call:E,nodes:F,node:G,size:H,empty:I,each:J,attr:Q,style:V,property:Z,classed:ga,text:ka,html:oa,raise:qa,lower:sa,append:ta,insert:va,remove:xa,datum:ya,on:k,dispatch:Ca};var kd={value:function(){}};Ha.prototype=Ga.prototype={constructor:Ha,on:function(a,b){var c,d=this._,e=Ia(a+"",d),f=-1,g=e.length;if(!(arguments.length<2)){if(null!=b&&"function"!=typeof b)throw new Error("invalid callback: "+b);for(;++f<g;)if(c=(a=e[f]).type)d[c]=Ka(d[c],a.name,b);else if(null==b)for(c in d)d[c]=Ka(d[c],a.name,null);return this}for(;++f<g;)if((c=(a=e[f]).type)&&(c=Ja(d[c],a.name)))return c},copy:function(){var a={},b=this._;for(var c in b)a[c]=b[c].slice();return new Ha(a)},call:function(a,b){if((c=arguments.length-2)>0)for(var c,d,e=new Array(c),f=0;c>f;++f)e[f]=arguments[f+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(d=this._[a],f=0,c=d.length;c>f;++f)d[f].value.apply(b,e)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var d=this._[a],e=0,f=d.length;f>e;++e)d[e].value.apply(b,c)}};var ld,md,nd=0,od=0,pd=0,qd=1e3,rd=0,sd=0,td=0,ud="object"==typeof performance?performance:Date,vd="function"==typeof requestAnimationFrame?ud===Date?function(a){requestAnimationFrame(function(){a(ud.now())})}:requestAnimationFrame:function(a){setTimeout(a,17)};Na.prototype=Oa.prototype={constructor:Na,restart:function(a,b,c){if("function"!=typeof a)throw new TypeError("callback is not a function");c=(null==c?La():+c)+(null==b?0:+b),this._next||md===this||(md?md._next=this:ld=this,md=this),this._call=a,this._time=c,Ta()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ta())}};var wd=Ga("start","end","interrupt"),xd=[],yd=0,zd=1,Ad=2,Bd=3,Cd=4,Dd=5,Ed=.7,Fd=1/Ed,Gd=/^#([0-9a-f]{3})$/,Hd=/^#([0-9a-f]{6})$/,Id=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,Jd=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,Kd=/^rgba\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,Ld=/^rgba\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,Md=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,Nd=/^hsla\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,Od={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ab(cb,db,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),ab(ib,hb,bb(cb,{brighter:function(a){return a=null==a?Fd:Math.pow(Fd,a),new ib(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){return a=null==a?Ed:Math.pow(Ed,a),new ib(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var a=this.opacity;return a=isNaN(a)?1:Math.max(0,Math.min(1,a)),(1===a?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}})),ab(mb,lb,bb(cb,{brighter:function(a){return a=null==a?Fd:Math.pow(Fd,a),new mb(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=null==a?Ed:Math.pow(Ed,a),new mb(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(this.h<0),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l,d=c+(.5>c?c:1-c)*b,e=2*c-d;return new ib(nb(a>=240?a-240:a+120,e,d),nb(a,e,d),nb(120>a?a+240:a-120,e,d),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Pd=Math.PI/180,Qd=180/Math.PI,Rd=18,Sd=.95047,Td=1,Ud=1.08883,Vd=4/29,Wd=6/29,Xd=3*Wd*Wd,Yd=Wd*Wd*Wd;ab(qb,pb,bb(cb,{brighter:function(a){return new qb(this.l+Rd*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new qb(this.l-Rd*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;return a=Td*sb(a),b=Sd*sb(b),c=Ud*sb(c),new ib(tb(3.2404542*b-1.5371385*a-.4985314*c),tb(-.969266*b+1.8760108*a+.041556*c),tb(.0556434*b-.2040259*a+1.0572252*c),this.opacity)}})),ab(xb,wb,bb(cb,{brighter:function(a){return new xb(this.h,this.c,this.l+Rd*(null==a?1:a),this.opacity)},darker:function(a){return new xb(this.h,this.c,this.l-Rd*(null==a?1:a),this.opacity)},rgb:function(){return ob(this).rgb()}}));var Zd=-.14861,$d=1.78277,_d=-.29227,ae=-.90649,be=1.97294,ce=be*ae,de=be*$d,ee=$d*_d-ae*Zd;ab(Ab,zb,bb(cb,{brighter:function(a){return a=null==a?Fd:Math.pow(Fd,a),new Ab(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=null==a?Ed:Math.pow(Ed,a),new Ab(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*Pd,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),d=Math.cos(a),e=Math.sin(a);return new ib(255*(b+c*(Zd*d+$d*e)),255*(b+c*(_d*d+ae*e)),255*(b+c*(be*d)),this.opacity)}}));var fe,ge,he,ie,je=function Pe(a){function b(a,b){var d=c((a=hb(a)).r,(b=hb(b)).r),e=c(a.g,b.g),f=c(a.b,b.b),g=c(a.opacity,b.opacity);return function(b){return a.r=d(b),a.g=e(b),a.b=f(b),a.opacity=g(b),a+""}}var c=Fb(a);return b.gamma=Pe,b}(1),ke=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,le=new RegExp(ke.source,"g"),me=180/Math.PI,ne={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},oe=Ob(Mb,"px, ","px)","deg)"),pe=Ob(Nb,", ",")",")");Pb(Eb);var qe=(Pb(Gb),Ea.prototype.constructor),re=0,se=Ea.prototype;Gc.prototype=Hc.prototype={constructor:Gc,select:sc,selectAll:tc,filter:lc,merge:mc,selection:uc,transition:Fc,call:se.call,nodes:se.nodes,node:se.node,size:se.size,empty:se.empty,each:se.each,on:pc,attr:_b,attrTween:cc,style:zc,styleTween:Bc,text:Ec,remove:rc,tween:Sb,delay:fc,duration:ic,ease:kc};var te=3,ue=(function Qe(a){function b(b){return Math.pow(b,a)}return a=+a,b.exponent=Qe,b}(te),function Re(a){function b(b){return 1-Math.pow(1-b,a)}return a=+a,b.exponent=Re,b}(te),function Se(a){function b(b){return((b*=2)<=1?Math.pow(b,a):2-Math.pow(2-b,a))/2}return a=+a,b.exponent=Se,b}(te),1.70158),ve=(function Te(a){function b(b){return b*b*((a+1)*b-a)}return a=+a,b.overshoot=Te,b}(ue),function Ue(a){function b(b){return--b*b*((a+1)*b+a)+1}return a=+a,b.overshoot=Ue,b}(ue),function Ve(a){function b(b){return((b*=2)<1?b*b*((a+1)*b-a):(b-=2)*b*((a+1)*b+a)+2)/2}return a=+a,b.overshoot=Ve,b}(ue),2*Math.PI),we=1,xe=.3,ye=(function We(a,b){function c(c){return a*Math.pow(2,10*--c)*Math.sin((d-c)/b)}var d=Math.asin(1/(a=Math.max(1,a)))*(b/=ve);return c.amplitude=function(a){return We(a,b*ve)},c.period=function(b){return We(a,b)},c}(we,xe),function Xe(a,b){function c(c){return 1-a*Math.pow(2,-10*(c=+c))*Math.sin((c+d)/b)}var d=Math.asin(1/(a=Math.max(1,a)))*(b/=ve);return c.amplitude=function(a){return Xe(a,b*ve)},c.period=function(b){return Xe(a,b)},c}(we,xe),function Ye(a,b){function c(c){return((c=2*c-1)<0?a*Math.pow(2,10*c)*Math.sin((d-c)/b):2-a*Math.pow(2,-10*c)*Math.sin((d+c)/b))/2}var d=Math.asin(1/(a=Math.max(1,a)))*(b/=ve);return c.amplitude=function(a){return Ye(a,b*ve)},c.period=function(b){return Ye(a,b)},c}(we,xe),{time:null,delay:0,duration:250,ease:Jc});Ea.prototype.interrupt=_a,Ea.prototype.transition=Lc;var ze=(Nc(Mc),["u0903","u093B","u093E","u093F","u0940","u0949","u094A","u094B","u094C","u094E","u094F","u0982","u0983","u09BE","u09BF","u09C0","u09C7","u09C8","u09CB","u09CC","u09D7","u0A03","u0A3E","u0A3F","u0A40","u0A83","u0ABE","u0ABF","u0AC0","u0AC9","u0ACB","u0ACC","u0B02","u0B03","u0B3E","u0B40","u0B47","u0B48","u0B4B","u0B4C","u0B57","u0BBE","u0BBF","u0BC1","u0BC2","u0BC6","u0BC7","u0BC8","u0BCA","u0BCB","u0BCC","u0BD7","u0C01","u0C02","u0C03","u0C41","u0C42","u0C43","u0C44","u0C82","u0C83","u0CBE","u0CC0","u0CC1","u0CC2","u0CC3","u0CC4","u0CC7","u0CC8","u0CCA","u0CCB","u0CD5","u0CD6","u0D02","u0D03","u0D3E","u0D3F","u0D40","u0D46","u0D47","u0D48","u0D4A","u0D4B","u0D4C","u0D57","u0D82","u0D83","u0DCF","u0DD0","u0DD1","u0DD8","u0DD9","u0DDA","u0DDB","u0DDC","u0DDD","u0DDE","u0DDF","u0DF2","u0DF3","u0F3E","u0F3F","u0F7F","u102B","u102C","u1031","u1038","u103B","u103C","u1056","u1057","u1062","u1063","u1064","u1067","u1068","u1069","u106A","u106B","u106C","u106D","u1083","u1084","u1087","u1088","u1089","u108A","u108B","u108C","u108F","u109A","u109B","u109C","u17B6","u17BE","u17BF","u17C0","u17C1","u17C2","u17C3","u17C4","u17C5","u17C7","u17C8","u1923","u1924","u1925","u1926","u1929","u192A","u192B","u1930","u1931","u1933","u1934","u1935","u1936","u1937","u1938","u1A19","u1A1A","u1A55","u1A57","u1A61","u1A63","u1A64","u1A6D","u1A6E","u1A6F","u1A70","u1A71","u1A72","u1B04","u1B35","u1B3B","u1B3D","u1B3E","u1B3F","u1B40","u1B41","u1B43","u1B44","u1B82","u1BA1","u1BA6","u1BA7","u1BAA","u1BE7","u1BEA","u1BEB","u1BEC","u1BEE","u1BF2","u1BF3","u1C24","u1C25","u1C26","u1C27","u1C28","u1C29","u1C2A","u1C2B","u1C34","u1C35","u1CE1","u1CF2","u1CF3","u302E","u302F","uA823","uA824","uA827","uA880","uA881","uA8B4","uA8B5","uA8B6","uA8B7","uA8B8","uA8B9","uA8BA","uA8BB","uA8BC","uA8BD","uA8BE","uA8BF","uA8C0","uA8C1","uA8C2","uA8C3","uA952","uA953","uA983","uA9B4","uA9B5","uA9BA","uA9BB","uA9BD","uA9BE","uA9BF","uA9C0","uAA2F","uAA30","uAA33","uAA34","uAA4D","uAA7B","uAA7D","uAAEB","uAAEE","uAAEF","uAAF5","uABE3","uABE4","uABE6","uABE7","uABE9","uABEA","uABEC"]),Ae=["u0300","u0301","u0302","u0303","u0304","u0305","u0306","u0307","u0308","u0309","u030A","u030B","u030C","u030D","u030E","u030F","u0310","u0311","u0312","u0313","u0314","u0315","u0316","u0317","u0318","u0319","u031A","u031B","u031C","u031D","u031E","u031F","u0320","u0321","u0322","u0323","u0324","u0325","u0326","u0327","u0328","u0329","u032A","u032B","u032C","u032D","u032E","u032F","u0330","u0331","u0332","u0333","u0334","u0335","u0336","u0337","u0338","u0339","u033A","u033B","u033C","u033D","u033E","u033F","u0340","u0341","u0342","u0343","u0344","u0345","u0346","u0347","u0348","u0349","u034A","u034B","u034C","u034D","u034E","u034F","u0350","u0351","u0352","u0353","u0354","u0355","u0356","u0357","u0358","u0359","u035A","u035B","u035C","u035D","u035E","u035F","u0360","u0361","u0362","u0363","u0364","u0365","u0366","u0367","u0368","u0369","u036A","u036B","u036C","u036D","u036E","u036F","u0483","u0484","u0485","u0486","u0487","u0591","u0592","u0593","u0594","u0595","u0596","u0597","u0598","u0599","u059A","u059B","u059C","u059D","u059E","u059F","u05A0","u05A1","u05A2","u05A3","u05A4","u05A5","u05A6","u05A7","u05A8","u05A9","u05AA","u05AB","u05AC","u05AD","u05AE","u05AF","u05B0","u05B1","u05B2","u05B3","u05B4","u05B5","u05B6","u05B7","u05B8","u05B9","u05BA","u05BB","u05BC","u05BD","u05BF","u05C1","u05C2","u05C4","u05C5","u05C7","u0610","u0611","u0612","u0613","u0614","u0615","u0616","u0617","u0618","u0619","u061A","u064B","u064C","u064D","u064E","u064F","u0650","u0651","u0652","u0653","u0654","u0655","u0656","u0657","u0658","u0659","u065A","u065B","u065C","u065D","u065E","u065F","u0670","u06D6","u06D7","u06D8","u06D9","u06DA","u06DB","u06DC","u06DF","u06E0","u06E1","u06E2","u06E3","u06E4","u06E7","u06E8","u06EA","u06EB","u06EC","u06ED","u0711","u0730","u0731","u0732","u0733","u0734","u0735","u0736","u0737","u0738","u0739","u073A","u073B","u073C","u073D","u073E","u073F","u0740","u0741","u0742","u0743","u0744","u0745","u0746","u0747","u0748","u0749","u074A","u07A6","u07A7","u07A8","u07A9","u07AA","u07AB","u07AC","u07AD","u07AE","u07AF","u07B0","u07EB","u07EC","u07ED","u07EE","u07EF","u07F0","u07F1","u07F2","u07F3","u0816","u0817","u0818","u0819","u081B","u081C","u081D","u081E","u081F","u0820","u0821","u0822","u0823","u0825","u0826","u0827","u0829","u082A","u082B","u082C","u082D","u0859","u085A","u085B","u08E3","u08E4","u08E5","u08E6","u08E7","u08E8","u08E9","u08EA","u08EB","u08EC","u08ED","u08EE","u08EF","u08F0","u08F1","u08F2","u08F3","u08F4","u08F5","u08F6","u08F7","u08F8","u08F9","u08FA","u08FB","u08FC","u08FD","u08FE","u08FF","u0900","u0901","u0902","u093A","u093C","u0941","u0942","u0943","u0944","u0945","u0946","u0947","u0948","u094D","u0951","u0952","u0953","u0954","u0955","u0956","u0957","u0962","u0963","u0981","u09BC","u09C1","u09C2","u09C3","u09C4","u09CD","u09E2","u09E3","u0A01","u0A02","u0A3C","u0A41","u0A42","u0A47","u0A48","u0A4B","u0A4C","u0A4D","u0A51","u0A70","u0A71","u0A75","u0A81","u0A82","u0ABC","u0AC1","u0AC2","u0AC3","u0AC4","u0AC5","u0AC7","u0AC8","u0ACD","u0AE2","u0AE3","u0B01","u0B3C","u0B3F","u0B41","u0B42","u0B43","u0B44","u0B4D","u0B56","u0B62","u0B63","u0B82","u0BC0","u0BCD","u0C00","u0C3E","u0C3F","u0C40","u0C46","u0C47","u0C48","u0C4A","u0C4B","u0C4C","u0C4D","u0C55","u0C56","u0C62","u0C63","u0C81","u0CBC","u0CBF","u0CC6","u0CCC","u0CCD","u0CE2","u0CE3","u0D01","u0D41","u0D42","u0D43","u0D44","u0D4D","u0D62","u0D63","u0DCA","u0DD2","u0DD3","u0DD4","u0DD6","u0E31","u0E34","u0E35","u0E36","u0E37","u0E38","u0E39","u0E3A","u0E47","u0E48","u0E49","u0E4A","u0E4B","u0E4C","u0E4D","u0E4E","u0EB1","u0EB4","u0EB5","u0EB6","u0EB7","u0EB8","u0EB9","u0EBB","u0EBC","u0EC8","u0EC9","u0ECA","u0ECB","u0ECC","u0ECD","u0F18","u0F19","u0F35","u0F37","u0F39","u0F71","u0F72","u0F73","u0F74","u0F75","u0F76","u0F77","u0F78","u0F79","u0F7A","u0F7B","u0F7C","u0F7D","u0F7E","u0F80","u0F81","u0F82","u0F83","u0F84","u0F86","u0F87","u0F8D","u0F8E","u0F8F","u0F90","u0F91","u0F92","u0F93","u0F94","u0F95","u0F96","u0F97","u0F99","u0F9A","u0F9B","u0F9C","u0F9D","u0F9E","u0F9F","u0FA0","u0FA1","u0FA2","u0FA3","u0FA4","u0FA5","u0FA6","u0FA7","u0FA8","u0FA9","u0FAA","u0FAB","u0FAC","u0FAD","u0FAE","u0FAF","u0FB0","u0FB1","u0FB2","u0FB3","u0FB4","u0FB5","u0FB6","u0FB7","u0FB8","u0FB9","u0FBA","u0FBB","u0FBC","u0FC6","u102D","u102E","u102F","u1030","u1032","u1033","u1034","u1035","u1036","u1037","u1039","u103A","u103D","u103E","u1058","u1059","u105E","u105F","u1060","u1071","u1072","u1073","u1074","u1082","u1085","u1086","u108D","u109D","u135D","u135E","u135F","u1712","u1713","u1714","u1732","u1733","u1734","u1752","u1753","u1772","u1773","u17B4","u17B5","u17B7","u17B8","u17B9","u17BA","u17BB","u17BC","u17BD","u17C6","u17C9","u17CA","u17CB","u17CC","u17CD","u17CE","u17CF","u17D0","u17D1","u17D2","u17D3","u17DD","u180B","u180C","u180D","u18A9","u1920","u1921","u1922","u1927","u1928","u1932","u1939","u193A","u193B","u1A17","u1A18","u1A1B","u1A56","u1A58","u1A59","u1A5A","u1A5B","u1A5C","u1A5D","u1A5E","u1A60","u1A62","u1A65","u1A66","u1A67","u1A68","u1A69","u1A6A","u1A6B","u1A6C","u1A73","u1A74","u1A75","u1A76","u1A77","u1A78","u1A79","u1A7A","u1A7B","u1A7C","u1A7F","u1AB0","u1AB1","u1AB2","u1AB3","u1AB4","u1AB5","u1AB6","u1AB7","u1AB8","u1AB9","u1ABA","u1ABB","u1ABC","u1ABD","u1B00","u1B01","u1B02","u1B03","u1B34","u1B36","u1B37","u1B38","u1B39","u1B3A","u1B3C","u1B42","u1B6B","u1B6C","u1B6D","u1B6E","u1B6F","u1B70","u1B71","u1B72","u1B73","u1B80","u1B81","u1BA2","u1BA3","u1BA4","u1BA5","u1BA8","u1BA9","u1BAB","u1BAC","u1BAD","u1BE6","u1BE8","u1BE9","u1BED","u1BEF","u1BF0","u1BF1","u1C2C","u1C2D","u1C2E","u1C2F","u1C30","u1C31","u1C32","u1C33","u1C36","u1C37","u1CD0","u1CD1","u1CD2","u1CD4","u1CD5","u1CD6","u1CD7","u1CD8","u1CD9","u1CDA","u1CDB","u1CDC","u1CDD","u1CDE","u1CDF","u1CE0","u1CE2","u1CE3","u1CE4","u1CE5","u1CE6","u1CE7","u1CE8","u1CED","u1CF4","u1CF8","u1CF9","u1DC0","u1DC1","u1DC2","u1DC3","u1DC4","u1DC5","u1DC6","u1DC7","u1DC8","u1DC9","u1DCA","u1DCB","u1DCC","u1DCD","u1DCE","u1DCF","u1DD0","u1DD1","u1DD2","u1DD3","u1DD4","u1DD5","u1DD6","u1DD7","u1DD8","u1DD9","u1DDA","u1DDB","u1DDC","u1DDD","u1DDE","u1DDF","u1DE0","u1DE1","u1DE2","u1DE3","u1DE4","u1DE5","u1DE6","u1DE7","u1DE8","u1DE9","u1DEA","u1DEB","u1DEC","u1DED","u1DEE","u1DEF","u1DF0","u1DF1","u1DF2","u1DF3","u1DF4","u1DF5","u1DFC","u1DFD","u1DFE","u1DFF","u20D0","u20D1","u20D2","u20D3","u20D4","u20D5","u20D6","u20D7","u20D8","u20D9","u20DA","u20DB","u20DC","u20E1","u20E5","u20E6","u20E7","u20E8","u20E9","u20EA","u20EB","u20EC","u20ED","u20EE","u20EF","u20F0","u2CEF","u2CF0","u2CF1","u2D7F","u2DE0","u2DE1","u2DE2","u2DE3","u2DE4","u2DE5","u2DE6","u2DE7","u2DE8","u2DE9","u2DEA","u2DEB","u2DEC","u2DED","u2DEE","u2DEF","u2DF0","u2DF1","u2DF2","u2DF3","u2DF4","u2DF5","u2DF6","u2DF7","u2DF8","u2DF9","u2DFA","u2DFB","u2DFC","u2DFD","u2DFE","u2DFF","u302A","u302B","u302C","u302D","u3099","u309A","uA66F","uA674","uA675","uA676","uA677","uA678","uA679","uA67A","uA67B","uA67C","uA67D","uA69E","uA69F","uA6F0","uA6F1","uA802","uA806","uA80B","uA825","uA826","uA8C4","uA8E0","uA8E1","uA8E2","uA8E3","uA8E4","uA8E5","uA8E6","uA8E7","uA8E8","uA8E9","uA8EA","uA8EB","uA8EC","uA8ED","uA8EE","uA8EF","uA8F0","uA8F1","uA926","uA927","uA928","uA929","uA92A","uA92B","uA92C","uA92D","uA947","uA948","uA949","uA94A","uA94B","uA94C","uA94D","uA94E","uA94F","uA950","uA951","uA980","uA981","uA982","uA9B3","uA9B6","uA9B7","uA9B8","uA9B9","uA9BC","uA9E5","uAA29","uAA2A","uAA2B","uAA2C","uAA2D","uAA2E","uAA31","uAA32","uAA35","uAA36","uAA43","uAA4C","uAA7C","uAAB0","uAAB2","uAAB3","uAAB4","uAAB7","uAAB8","uAABE","uAABF","uAAC1","uAAEC","uAAED","uAAF6","uABE5","uABE8","uABED","uFB1E","uFE00","uFE01","uFE02","uFE03","uFE04","uFE05","uFE06","uFE07","uFE08","uFE09","uFE0A","uFE0B","uFE0C","uFE0D","uFE0E","uFE0F","uFE20","uFE21","uFE22","uFE23","uFE24","uFE25","uFE26","uFE27","uFE28","uFE29","uFE2A","uFE2B","uFE2C","uFE2D","uFE2E","uFE2F"],Be=ze.concat(Ae),Ce=["-","/",";",":","&","u0E2F","u0EAF","u0EC6","u0ECC","u104A","u104B","u104C","u104D","u104E","u104F","u2013","u2014","u2027","u3000","u3001","u3002","uFF5E"],De=["'","<","(","{","[","u00AB","u300A","u3008"],Ee=["'",">",")","}","]",".","!","?","u00BB","u300B","u3009"].concat(Ce),Fe="က-ဪဿ-၉ၐ-ၕ",Ge="぀-ゟ゠-ヿ＀-ﾟ㐀-䶿",He="㐀-龿",Ie="ກ-ຮະ-ໄ່-໋ໍ-ໝ",Je=Fe+He+Ie,Ke=new RegExp("[^\\s|\\"+Ce.join("|\\")+"]+(\\"+Ce.join("|\\")+")*","g"),Le=new RegExp("["+Ge+"]"),Me=new RegExp("["+Je+"]"),Ne=new RegExp("(\\"+De.join("|\\")+")*["+Je+"](\\"+Ee.join("|\\")+"|\\"+Be.join("|\\")+")*|[a-z0-9]+","gi"),Oe={max:Pc,min:Rc,select:Fa,sum:Sc,transition:Hc};a.box=$c,a.split=Wc,a.stringify=Vc,a.width=Xc,a.wrap=Yc,Object.defineProperty(a,"__esModule",{value:!0})}),angular.module("ngYoutubeEmbed",[]).directive("ngYoutubeEmbed",[function(){return{restrict:"E",template:'<div ng-bind-html="youtubeEmbedFrame"></div>',scope:{url:"=",playauto:"@playauto",autohide:"@autohide",ccloadpolicy:"@ccloadpolicy",color:"@color",controls:"@controls",disablekb:"@disablekb",end:"@end",fs:"@fs",hl:"@hl",ivloadpolicy:"@ivloadpolicy",playlist:"@playlist",playsinline:"@playsinline",rel:"@rel",showinfo:"@showinfo",start:"@start",theme:"@theme",width:"@width",height:"@height"},controller:["$scope","$sce",function(a,b){function c(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,c=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,d=(a.match(c),a.match(b));if(null!==d){var e=d[1];return e}}var d=a.url;if(void 0!==d){if(a.playlistArray=[],void 0!==a.playlist)for(var e=a.playlist.split(","),f=0;f<e.length;f++)a.playlistArray.push(c(e[f]));var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;g="true"===a.playauto?1:0,h="true"===a.autohide?1:0,i="true"===a.ccloadpolicy?1:0,j="white"===a.color?"white":"red",k="false"===a.controls?0:1,l="false"===a.disablekb?0:1,m=a.end,n="false"===a.fs?0:1,o=a.hl,p="false"===a.ivloadpolicy?0:1,q=a.playlistArray,r="true"===a.playsinline?1:0,s="false"===a.rel?0:1,t="false"===a.showinfo?0:1,u=a.start,v=a.theme,w=void 0!==a.width?a.width:"500px",x=void 0!==a.height?a.height:"350px";var y=c(d),z="<iframe width="+w+" height="+x+' src="https://www.youtube.com/embed/'+y+"?autoplay="+g+"&autohide="+h+"&cc_load_policy="+i+"&color="+j+"&controls="+k+"&disablekb="+l+"&end="+m+"&fs="+n+"&hl="+o+"&playlist="+q+"&playsinline="+r+"&rel="+s+"&showinfo="+t+"&start="+u+"&theme="+v+'" frameborder="0" allowfullscreen></iframe>';a.youtubeEmbedFrame=b.trustAsHtml(z)}}]}}]),$.urlParam=function(a,b){var c=new RegExp("[?&]"+b+"=([^&#]*)").exec(a);return null===c?null:c[1]||0},angular.module("compromisosSiteApp",["ngRoute","duScroll","ngSanitize","ngYoutubeEmbed"]).config(["$routeProvider",function(a){a.when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"home"}).when("/c01",{templateUrl:"views/c01.html",controller:"Compromiso01Ctrl",controllerAs:"c01"}).when("/c02",{templateUrl:"views/c02.html",controller:"Compromiso02Ctrl",controllerAs:"c02"}).when("/c03",{templateUrl:"views/c03.html",controller:"Compromiso03Ctrl",controllerAs:"c03"}).when("/c04",{templateUrl:"views/c04.html",controller:"Compromiso04Ctrl",controllerAs:"c04"}).when("/c05",{templateUrl:"views/c05.html",controller:"Compromiso05Ctrl",controllerAs:"c05"}).when("/c06",{templateUrl:"views/c06.html",controller:"Compromiso06Ctrl",controllerAs:"c06"}).when("/c07",{templateUrl:"views/c07.html",controller:"Compromiso07Ctrl",controllerAs:"c07"}).when("/c08",{templateUrl:"views/c08.html",controller:"Compromiso08Ctrl",controllerAs:"c08"}).when("/c09",{templateUrl:"views/c09.html",controller:"Compromiso09Ctrl",controllerAs:"c09"}).when("/c10",{templateUrl:"views/c10.html",controller:"Compromiso10Ctrl",controllerAs:"c10"}).when("/c11",{templateUrl:"views/c11.html",controller:"Compromiso11Ctrl",controllerAs:"c11"}).when("/c12",{templateUrl:"views/c12.html",controller:"Compromiso12Ctrl",controllerAs:"c12"}).when("/c13",{templateUrl:"views/c13.html",controller:"Compromiso13Ctrl",controllerAs:"c13"}).when("/c14",{templateUrl:"views/c14.html",controller:"Compromiso14Ctrl",controllerAs:"c14"}).when("/c15",{templateUrl:"views/c15.html",controller:"Compromiso15Ctrl",controllerAs:"c15"}).when("/c16",{templateUrl:"views/c16.html",controller:"Compromiso16Ctrl",controllerAs:"c16"}).when("/c17",{templateUrl:"views/c17.html",controller:"Compromiso17Ctrl",controllerAs:"c17"}).when("/c18",{templateUrl:"views/c18.html",controller:"Compromiso18Ctrl",controllerAs:"c18"}).when("/c19",{templateUrl:"views/c19.html",controller:"Compromiso19Ctrl",controllerAs:"c19"}).when("/c20",{templateUrl:"views/c20.html",controller:"Compromiso20Ctrl",controllerAs:"c20"}).otherwise({redirectTo:"/"})}]).service("SlugColorService",function(){this.colorsBySlug={social:"#c15180",disfrute:"#3abaaf",humana:"#f58b45",creatividad:"#7c4194"},this.getColorBySlug=function(a){return a?this.colorsBySlug[a.toLowerCase()]:this.colorsBySlug}}).service("LoadSVGService",function(){this.loadIcon=function(a,b){var c="images/iconos/GCBA-compromisos-icons-"+a+".svg";d3.xml(c,"image/svg+xml",function(a,c){b(document.importNode(c.documentElement,!0))})}}).service("UrlService",function(){window.COMPROMISOS_CONFIG||console.error("Archivo de configuración inexistente."),this.baseUrl=window.COMPROMISOS_CONFIG.BASE_URL,this.urls={home:this.baseUrl+"?source_format=csv&source="+window.COMPROMISOS_CONFIG.HOME_CSV},this.getUrlByPage=function(a){return this.urls[a]+"&callback=JSON_CALLBACK"},this.getUrlByCsv=function(a){return this.baseUrl+"?source_format=csv&source="+a+"&callback=JSON_CALLBACK"}}).run(["$rootScope","$interval",function(a,b){function c(){g(),setTimeout(function(){b.cancel(e)},1e4)}var d={decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],shortDays:["Dom","Lun","Mar","Mi","Jue","Vie","Sab"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],shortMonths:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"]};a.d3Locale_ES=d3.locale(d);var e,f=350,g=function(){b.cancel(e),e=b(function(){$(".detalle-frame").each(function(a,b){$(b).css("height","auto");var c=$(b).outerHeight();c>f&&(f=c)}),$(".detalle-frame").css("height",f+"px")},2e3)};setTimeout(function(){c()},2e3);var h;$(window).resize(function(){clearTimeout(h),h=setTimeout(function(){c()},500)})}]),angular.module("compromisosSiteApp").controller("HomeCtrl",["$scope","$timeout","$document","$http","UrlService","SlugColorService","LoadSVGService",function(a,b,c,d,e,f,g){function h(a){for(var b=0,c=0;c<z.length;c++){var d=z[c],e=parseInt(a.porcentaje_completado);if(e>=d.from&&e<d.to){b=c;break}}return a.percentageGroup=b,b}function i(b,d,e){var f=150;a.$apply(function(){a.currentCompromise=b});var g=parseInt(d3.select("#compromiso-detail").style("height").replace("px","")),h=parseInt(d3.select("#filler").style("height").replace("px","")),i=parseInt($(window).height()),j=(parseInt(e.clientY),$("#menu_chart").offset().top),k=(j-$(window).scrollTop(),Math.floor((e.clientY-j)/f)*f);console.log(j,e.clientY,k);var l=k+j+145;d3.select("#compromiso-detail").style("top",l+"px"),a.$apply(function(){var a=angular.element(document.getElementById("compromiso-detail"));b>0?d3.select("#filler").style("height",b+"px"):d3.select("#filler").style("height","0px"),c.scrollToElement(a,500,500);var b=l+g-i+h})}function j(){var b=["x"].concat(a.availableYears);angular.forEach(a.categoriesGroup,function(a){a.years=d3.nest().key(function(a){return a.cumplimiento}).rollup(function(a){return a.length}).entries(a.values)});var c=[];c.push(b),angular.forEach(a.categoriesGroup,function(b){var d=[];d.push(b.key),angular.forEach(a.availableYears,function(a){for(var c=0,e=0;e<b.years.length;e++){var f=b.years[e];if(a===f.key){c=f.values;break}}d.push(c)}),c.push(d)});var d=d3.max(a.finishedYearsGroup,function(a){return a.values.length}),e=d3.range(0,d+1).map(function(a){
return{value:a}});a.charts.date_chart=c3.generate({bindto:"#date_chart",data:{x:"x",columns:c,type:"bar",groups:[a.availableCategories],colors:angular.copy(f.getColorBySlug())},bar:{width:52},size:{height:150},padding:{top:0,right:0,bottom:0,left:0},legend:{show:!1},axis:{x:{type:"category"},y:{show:!1}},grid:{y:{lines:e}}})}function k(){var b=["x","0-25%","25-50%","50-75%","75-100%"];angular.forEach(a.categoriesGroup,function(a){a.percentages=d3.nest().key(function(a){return a.percentageGroup}).rollup(function(a){return a.length}).entries(a.values)});var c=[];c.push(b),angular.forEach(a.categoriesGroup,function(a){var b=[];b.push(a.key),angular.forEach(z,function(c,d){for(var e=0,f=0;f<a.percentages.length;f++){var g=a.percentages[f];if(d===parseInt(g.key)){e=g.values;break}}b.push(e)}),c.push(b)});var d=d3.max(a.finishedPercentageGroup,function(a){return a.values.length}),e=d3.range(0,d+1).map(function(a){return{value:a}});a.charts.state_chart=c3.generate({bindto:"#state_chart",data:{x:"x",columns:c,type:"bar",groups:[a.availableCategories],colors:angular.copy(f.getColorBySlug())},bar:{width:52},size:{height:150},padding:{top:0,right:0,bottom:0,left:0},legend:{show:!1},axis:{x:{type:"category"},y:{max:10,show:!1,padding:{top:0,bottom:0}}},grid:{y:{lines:e}}})}function l(){m(f.getColorBySlug())}function m(b){a.charts.state_chart.data.colors(b),a.charts.date_chart.data.colors(b),angular.forEach(b,function(a,b){d3.selectAll(".leaf."+b+" circle").style("fill",a)})}function n(a){var b={social:"#e6e6e6",disfrute:"#e6e6e6",creatividad:"#e6e6e6",humana:"#e6e6e6"};b[a]=f.getColorBySlug(a),m(b)}function o(){var b=150,c=($("#category_chart").width()-b)/2;$("#category_chart").width()<b&&(b=$("#category_chart").width(),c=0);var d=d3.layout.pack().sort(null).size([b,b]).value(function(a){return parseInt(a.porcentaje_completado)});if(!a.charts.category_chart){a.charts.category_chart={},a.charts.category_chart.svg=d3.select("#category_chart").append("svg").attr("class","bubble-container").attr("width",$("#category_chart").width()).attr("height",b),a.charts.category_chart.mainGroup=a.charts.category_chart.svg.append("g").classed("main",!0),a.charts.category_chart.data={name:"categories",children:[]};for(var e=0;e<a.categoriesGroup.length;e++){var g=a.categoriesGroup[e];a.charts.category_chart.data.children.push({name:g.key,children:g.values})}}a.charts.category_chart.svg.attr("width",$("#category_chart").width()),a.charts.category_chart.mainGroup.attr("transform",function(){return"translate("+c+",0)"});var h=a.charts.category_chart.mainGroup.datum(a.charts.category_chart.data).selectAll(".node").data(d.nodes);h.enter().append("g").attr("class",function(a){var b=a.children?"node":"leaf node",c=a.slug?a.slug:a.name;return b+" "+c}).each(function(){d3.select(this).append("circle").filter(function(a){return"categories"!==a.name}).style("fill",function(a){return f.getColorBySlug(a.slug)})}),h.attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),h.selectAll("circle").attr("r",function(a){return a.r})}function p(){function b(){a.charts.menu_chart.svg.transition().duration(y).attr("width",w).attr("height",x)}function c(){w=$(window).width(),A=768>w,B=0;var c=d(a.charts.menu_chart.items_group.selectAll("g.compromiso-item"),0);x=c*o,b(),k([])}function d(a,b,c){b+=A&&c?o:0,B=A?0:B;var d=Math.floor((w-B)/o),e=0,f=0,g=(w-B-d*o)/2;return a.transition().duration(y).attr("transform",function(c,h){var i=e*o+g+B,j=f*o+b;return d-1>e?e++:a[0].length!==h+1&&(e=0,f++),"translate("+i+","+j+")"}),f+1+(A&&c?1:0)}function e(){w=$(window).width(),A=768>w;var c=0;B=w/3;var e=[];angular.forEach(a.finishedPercentageGroup,function(b){e.push({title:z[b.key].from+"% - "+z[b.key].to+"%",rows:c}),c+=d(a.charts.menu_chart.items_group.selectAll("g.avance-"+b.key),c*o,!0)}),x=c*o,b(),k(e)}function f(){w=$(window).width(),A=768>w;var c=0;B=w/3;var e=[];angular.forEach(a.categoriesGroupText,function(b){e.push({title:b.key,rows:c}),c+=d(a.charts.menu_chart.items_group.selectAll("g.categoria-"+b.values[0].slug),c*o,!0)}),x=c*o,b(),k(e)}function j(){w=$(window).width(),A=768>w;var c=0;B=w/3;var e=[];angular.forEach(a.finishedYearsGroup,function(b){e.push({title:b.key,rows:c}),c+=d(a.charts.menu_chart.items_group.selectAll("g.cumplimiento-"+b.key),c*o,!0)}),x=c*o,b(),k(e)}function k(b){a.charts.menu_chart.labels_group.selectAll("*").remove();var c=a.charts.menu_chart.labels_group.selectAll(".label-group").data(b);c.enter().append("g").classed("label-group",!0).each(function(a,b){var c=d3.select(this);c.append("rect").classed("label-group-shape",!0).attr("id","c"+b+"-label-group-shape",!0).classed("shape",!0).attr("height",o).attr("width",A?w:w/3).attr("fill","none"),c.append("g").attr("id","c"+b+"-label-group-text",!0).classed("label-group-text",!0).classed("wrap",!0);var d=c.select(".label-group-shape"),e={text:a.title},f=d3plus.box().select("g#c"+b+"-label-group-text").data([e]).width([d.attr("width")]).y([o/4]).x([0]).fontFamily(['"Gotham", Helvetica, Arial, sans-serif']).fontSize([30]);A&&f.textAnchor(["middle"]),f(function(){}),c.attr("transform",function(){return"translate(0,"+a.rows*o+")"})})}function l(){a.charts.menu_chart.items_group.selectAll("g.compromiso-item").data(C).enter().append("g").attr("class",function(a){var b=[];return b.push("cumplimiento-"+a.cumplimiento),b.push("categoria-"+a.slug),b.push("categoria-unselected"),b.push("avance-"+h(a)),b.join(" ")}).classed("compromiso-item",!0).attr("id",function(a){return"c"+a.numero}).each(function(b){var c=d3.select(this);c.append("rect").classed("compromiso-frame",!0).attr("x",0).attr("y",0).attr("height",o).attr("width",o).attr("fill","white"),c.append("rect").classed("compromiso-label-shape",!0).attr("id","c"+b.numero+"-label-shape").classed("shape",!0).attr("x",p).attr("y",o/2).attr("height",o/2-p).attr("width",o-2*p).attr("fill","none"),c.append("g").classed("compromiso-label",!0).classed("wrap",!0).attr("id","c"+b.numero+"-text"),c.append("g").classed("compromiso-icon",!0).attr("id",function(a){return"c"+a.numero+"-icon"}).attr("transform",function(){var a=o/2-25,b=o/3-25;return"translate("+a+","+b+")"}).each(function(a){var b=this;g.loadIcon(a.icono,function(a){$(a).attr("width",50).attr("height",50).get(0),b.appendChild(a.cloneNode(!0))})});var d=d3.select("rect#c"+b.numero+"-label-shape"),e={text:b.titulo};d3plus.box().select("g#c"+b.numero+"-text").data([e]).textAnchor(["middle"]).width([d.attr("width")]).x([d.attr("x")]).y([d.attr("y")]).fontFamily(['"Gotham", Helvetica, Arial, sans-serif']).fontSize([14]).fontColor(["#333"])(function(){}),c.append("rect").classed("compromiso-action",!0).attr("x",p).attr("y",p).attr("height",o-2*p).attr("width",o-2*p).attr("fill","transparent").on("mouseover",function(a){t(a.slug),q(a.numero)}).on("mouseout",function(){u(),r();var a=$(".c-option-selected");a.size()&&s(a.data("slug"))}).on("click",function(){i(b,d3.mouse(this),d3.event),v(b.slug),n(b.slug),a.$apply(function(){a.selectedCategory=b.slug})})}).transition().duration(0).attr("transform",function(){var a=w/2-o/2,b=x/2-o/2;return"translate("+a+","+b+")"})}function m(){l(),a.charts.menu_chart.api={group:function(a){switch(a){case"home":c();break;case"date":j();break;case"category":f();break;case"state":e()}}},setTimeout(function(){a.charts.menu_chart.api.group(a.selectedGroup)},1e3)}var o=150,p=5,w=$(window).width(),x=500,y=500,A=768>w,B=w/3,C=angular.copy(a.data);a.charts.menu_chart||(a.charts.menu_chart={},a.charts.menu_chart.svg=d3.select("#menu_chart").append("svg").attr("width",w).attr("height",x).attr("class","menu_chart"),a.charts.menu_chart.items_group=a.charts.menu_chart.svg.append("g").classed("items-container",!0),a.charts.menu_chart.labels_group=a.charts.menu_chart.svg.append("g").classed("labels-container",!0)),m()}function q(a){$(".compromiso-item").addClass("categoria-unselected"),$(".compromiso-item#c"+a).removeClass("categoria-unselected")}function r(){$(".compromiso-item").addClass("categoria-unselected")}function s(a){$(".compromiso-item").addClass("categoria-unselected"),$(".compromiso-item.categoria-"+a).removeClass("categoria-unselected")}function t(a){$(".c-option").removeClass("c-option-hover"),$('.c-option[data-slug="'+a+'"]').addClass("c-option-hover")}function u(){$(".c-option").removeClass("c-option-hover")}function v(a){$(".c-option").removeClass("c-option-selected"),$('.c-option[data-slug="'+a+'"]').addClass("c-option-selected")}function w(){$(".c-option").removeClass("c-option-selected")}function x(){$(".c-option").mouseover(function(){var a=$(this).data("slug");a&&(t(a),s(a),n(a))}).mouseout(function(){var a=$(this).data("slug");if(a){var b=$(".c-option-selected");b.size()?(s(b.data("slug")),n(b.data("slug"))):(r(),l()),u()}}).click(function(){var b=$(this).data("slug");b&&($(this).hasClass("c-option-selected")?(w(),l()):(v(b),s(b),n(b),a.$apply(function(){a.selectedCategory=b})))})}a.pymChild=new pym.Child({polling:1e3}),a.pymChild.sendHeight(),a.data=[],a.loading=!0,a.charts={},a.selectedGroup="home";var y=e.getUrlByPage("home");d.jsonp(y).success(function(b){a.data=b.map(function(a){return a.slug=a.slug.trim(),a.categoria=a.categoria.trim(),a}),a.loading=!1,a.groupData(),a.renderCharts()}),a.groupData=function(){a.categoriesGroup=d3.nest().key(function(a){return a.slug}).entries(a.data),a.categoriesGroupText=d3.nest().key(function(a){return a.categoria}).entries(a.data),a.availableCategories=[],angular.forEach(a.categoriesGroup,function(b){a.availableCategories.push(b.key)}),angular.forEach(a.categoriesGroup,function(a){a.finishedYearsGroup=d3.nest().key(function(a){return a.cumplimiento}).rollup(function(a){return a.length}).entries(a.values)}),a.finishedYearsGroup=d3.nest().key(function(a){return a.cumplimiento}).entries(a.data),angular.forEach(a.finishedYearsGroup,function(a){a.categoryGroup=d3.nest().key(function(a){return a.slug}).rollup(function(a){return a.length}).entries(a.values)}),a.availableYears=[],angular.forEach(a.finishedYearsGroup,function(b){a.availableYears.push(b.key)}),a.availableYears=a.availableYears.sort(),a.finishedPercentageGroup=d3.nest().key(function(a){return h(a)}).entries(a.data)};var z=[];z.push({from:0,to:25}),z.push({from:25,to:50}),z.push({from:50,to:75}),z.push({from:75,to:100}),a.renderCharts=function(){x(),j(),k(),o(),p()},a.redirectParent=function(b){a.pymChild.navigateParentTo(b)},a.closeDetail=function(){w(),l(),a.currentCompromise=null,d3.select("#filler").style("height","0px"),a.selectedCategory=""},a.onChangeCategory=function(){""!==a.selectedCategory?(v(a.selectedCategory),s(a.selectedCategory),n(a.selectedCategory)):(w(),l())},a.onChangeGroup=function(){a.groupMenu(a.selectedGroup)},a.groupMenu=function(b){a.selectedGroup=b,a.charts.menu_chart.api.group(a.selectedGroup)};var A;$(window).resize(function(){clearTimeout(A),A=setTimeout(function(){a.charts.menu_chart&&a.charts.menu_chart.api.group(a.selectedGroup),a.charts.category_chart&&o()},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso01Ctrl",["UrlService","$rootScope","$scope","$http","SlugColorService","LoadSVGService","$sce","$templateRequest","$compile",function(a,b,c,d,e,f,g,h,i){var j=a.getUrlByPage("home"),k=new pym.Child({polling:1e3});k.sendHeight();var l=window._;c.loading=!0,d.jsonp(j).success(function(a){c.currentCompromise=c.data=l.find(a,function(a){return 1===parseInt(a.numero)}),c.currentCompromise.porcentaje_completado=parseInt(c.currentCompromise.porcentaje_completado),c.currentCompromise.color=e.getColorBySlug(c.currentCompromise.slug),c.loading=!1,f.loadIcon(c.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))}),console.log(c.currentCompromise)});var m="#bdbec2";c.prepareData1=function(a){return a},c.completeConfig1=function(a){return angular.merge(a,{data:{xFormat:"%m-%Y",types:{meta:"area",baches_resueltos:"line"},keys:{value:["meta","baches_resueltos"],x:"mes"},names:{baches_resueltos:"Baches Resueltos"},colors:{meta:m,baches_resueltos:c.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:30},axis:{x:{type:"timeseries",show:!0,tick:{fit:!0,format:b.d3Locale_ES.timeFormat("%b"),count:6}},y:{show:!0}},legend:{show:!0}})},c.prepareData2=function(a){return a},c.completeConfig2=function(a){return angular.merge(a,{data:{xFormat:"%m-%Y",types:{dias:"line",meta:"area"},keys:{value:["dias","meta"],x:"mes"},colors:{meta:m,dias:c.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{x:{type:"timeseries",show:!0,tick:{fit:!0,format:b.d3Locale_ES.timeFormat("%b"),count:6}},y:{show:!0}},legend:{show:!0}})},c.dataLoaded3=function(a,b){c.autosConfig={icono:"subte",orientacion:"cols",base:{titulo:b[0].detalle,color:"#cccccc",cantidad:100},opciones:[{titulo:b[1].detalle,color:c.currentCompromise.color,cantidad:Math.round(100*parseInt(b[1].cantidad)/parseInt(b[0].cantidad))}]};var d=g.getTrustedResourceUrl("views/includes/autitos.html");return h(d).then(function(b){i($("#"+a).html(b).contents())(c)}),console.log(3,a,b),b}}]),angular.module("compromisosSiteApp").controller("Compromiso02Ctrl",["UrlService","$compile","$templateRequest","$scope","$http","SlugColorService","LoadSVGService","$sce",function(a,b,c,d,e,f,g,h){function i(){var a=d.selectedPeriodo,b=d3.range(0,d3.max(n,function(a){return a.values.length}));o=b.map(function(a){return"c"+(a+1)});var c=[];return c=n.map(function(c){var d={comuna:c.key};return angular.forEach(b,function(b){c.values[b]?d["c"+(b+1)]=c.values[b][a]?parseFloat(c.values[b][a]):0:d["c"+(b+1)]=0}),d})}var j=a.getUrlByPage("home"),k=new pym.Child({polling:1e3});k.sendHeight();var l=window._;d.loading=!0,e.jsonp(j).success(function(a){d.currentCompromise=d.data=l.find(a,function(a){return 2===parseInt(a.numero)}),d.currentCompromise.color=f.getColorBySlug(d.currentCompromise.slug),d.currentCompromise.porcentaje_completado=parseInt(d.currentCompromise.porcentaje_completado),d.loading=!1,g.loadIcon(d.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})});var m,n,o;d.prepareData1=function(a){return a.map(function(a){return a.trimestre=a.anio+"-"+3*parseInt(a.trimestre)+"-01",a}),a},d.completeConfig1=function(a){return angular.merge(a,{data:{type:"spline",keys:{value:["meta_modelada","reciclado_real"],x:"trimestre"},names:{reciclado_real:"Reciclado Real",meta_modelada:"Meta Modelada"},colors:{reciclado_real:d.currentCompromise.color,meta_modelada:"#ccc"}},point:{show:!1},size:{height:300},padding:{top:0,right:20,bottom:10,left:30},axis:{x:{type:"timeseries",show:!0,tick:{format:function(a){return(a.getMonth()+1)/3+"-"+a.getFullYear()}}},y:{show:!0}},legend:{show:!0}})},d.prepareData2=function(a){return d.selectedPeriodo="mayo_2016",d.selectOptions=l.without(l.keys(a[0]),"comuna","punto_verde"),d.selectOptions=d.selectOptions.map(function(a){return{label:a.toUpperCase().replace("_"," "),value:a}}),n=d3.nest().key(function(a){return a.comuna}).entries(a),i()},d.completeConfig2=function(a){var b={},c=d.currentCompromise.color;return o.forEach(function(a){b[a]=c,c=d3.rgb(c).darker().toString()}),d.dataConfig={type:"bar",keys:{value:o,x:"comuna"},colors:b,groups:[o]},angular.merge(a,{data:d.dataConfig,tooltip:{grouped:!0,format:{title:function(a){return"Comuna "+(a+1)},name:function(a,b,c,d){var e=n[d].values;return e[parseInt(a.replace("c",""))-1]?e[parseInt(a.replace("c",""))-1].punto_verde:""},value:function(a){return 0!==a?a:""}},contents:function(a,b,c,d){var e,f,g,h,i,j,k=this,l=k.config,m=l.tooltip_format_title||b,n=l.tooltip_format_name||function(a){return a},o=l.tooltip_format_value||c;for(f=0;f<a.length;f++)a[f]&&(a[f].value||0===a[f].value)&&(e||(g=m?m(a[f].x):a[f].x,e="<table class='"+k.CLASS.tooltip+"'>"+(g||0===g?"<tr><th colspan='2'>"+g+"</th></tr>":"")),i=n(a[f].name,a[f].ratio,a[f].id,a[f].index),h=o(a[f].value,a[f].ratio,a[f].id,a[f].index),h=""!==i&&""===h?0:h,j=k.levelColor?k.levelColor(a[f].value):d(a[f].id),j=""===i?"white":j,e+="<tr class='"+k.CLASS.tooltipName+"-"+a[f].id+"'>",e+="<td class='name'><span style='background-color:"+j+"'></span>"+i+"</td>",e+="<td class='value'>"+h+"</td>",e+="</tr>");return e+"</table>"}},point:{show:!1},size:{height:300},padding:{top:0,right:20,bottom:10,left:30},axis:{rotated:!0,x:{type:"category",show:!0},y:{show:!0,max:14e3}},legend:{show:!1}})},d.chartReady2=function(a,e){m=a,$("<div id='selector-container'></div>").insertAfter("#"+e);var f=h.getTrustedResourceUrl("views/includes/selectorPeriodos.html");c(f).then(function(a){b($("#selector-container").html(a).contents())(d)},function(){})},d.changeOption=function(){m.load(angular.merge(d.dataConfig,{json:i()}))}}]),angular.module("compromisosSiteApp").controller("Compromiso03Ctrl",["UrlService","$rootScope","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e,f){var g=a.getUrlByPage("home"),h=new pym.Child({polling:1e3});h.sendHeight();var i=window._;c.loading=!0,d.jsonp(g).success(function(a){c.currentCompromise=c.data=i.find(a,function(a){return 3===parseInt(a.numero)}),c.currentCompromise.porcentaje_completado=parseInt(c.currentCompromise.porcentaje_completado),c.currentCompromise.color=e.getColorBySlug(c.currentCompromise.slug),c.currentCompromise.secondColor="#bdbec2",c.loading=!1,f.loadIcon(c.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))}),console.log(c.currentCompromise)}),c.youtubeLink="https://www.youtube.com/watch?v=AoZ98-TwqM4",c.prepareData=function(a){return a},c.completeConfig=function(a){return angular.merge(a,{data:{xFormat:"%Y-%m",types:{meta_acumulado:"area",adultos_incluidos_acumulado:"line"},keys:{value:["adultos_incluidos_acumulado","meta_acumulado"],x:"mes"},names:{meta_acumulado:"Meta Acumulada",adultos_incluidos_acumulado:"Adultos Incluidos Acumulado"},colors:{meta_acumulado:c.currentCompromise.secondColor,adultos_incluidos_acumulado:c.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:80},axis:{x:{type:"timeseries",show:!0,tick:{fit:!0,format:b.d3Locale_ES.timeFormat("%b-%y"),count:6}},y:{show:!0}},legend:{show:!0}})},c.chartReady=function(a){},c.prepareData2=function(a){return a},c.completeConfig2=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["uso_computadora","uso_internet"],x:"edad"},names:{uso_computadora:"Uso Computadora",uso_internet:"Uso Internet"},colors:{uso_computadora:c.currentCompromise.color,uso_internet:c.currentCompromise.secondColor}},size:{height:300},padding:{top:0,right:20,bottom:10,left:80},axis:{x:{type:"category",show:!0},y:{show:!0,tick:{format:function(a){return a+"%"}}}},legend:{show:!0}})},c.chartReady2=function(a){},c.prepareData3=function(a){return a},c.completeConfig3=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["poblacion_mayor_o_igual_65"],x:"provincia"},names:{poblacion_mayor_o_igual_65:"Población Mayor o Igual 65",provincia:"Provincia"},colors:{poblacion_mayor_o_igual_65:c.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:120},axis:{rotated:!0,x:{type:"category",show:!0},y:{show:!0,tick:{format:function(a){return a+"%"}}}},legend:{show:!0}})},c.chartReady3=function(a){};var j;$(window).resize(function(){clearTimeout(j),j=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso04Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 4===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))}),console.log(b.currentCompromise)}),b.youtubeLink="https://www.youtube.com/watch?v=AoZ98-TwqM4",b.prepareData=function(a){return a},b.completeConfig=function(a){return angular.merge(a,{data:{keys:{value:["muertes"],x:"anio"},names:{muertes:"Medición"},colors:{muertes:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{show:!0},y:{show:!0}},legend:{show:!0}})},b.chartReady=function(a){},b.prepareData2=function(a){return a},b.completeConfig2=function(a){return angular.merge(a,{data:{keys:{value:["lesionados"],x:"anio"},names:{lesionados:"Medición"},colors:{lesionados:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{show:!0},y:{show:!0}},legend:{show:!0}})},b.chartReady2=function(a){},b.prepareData3=function(a){return a},b.completeConfig3=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["poblacion_mayor_o_igual_65"],x:"provincia"},names:{poblacion_mayor_o_igual_65:"Población Mayor o Igual 65",provincia:"Provincia"},colors:{poblacion_mayor_o_igual_65:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:100},axis:{rotated:!0,x:{type:"category",show:!0},y:{show:!1}},legend:{show:!1}})},b.chartReady3=function(a){},b.prepareData4=function(a){return a},b.completeConfig4=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["buenos_aires","seattle","nueva_york"],x:"anio"},colors:{buenos_aires:b.currentCompromise.color,seattle:b.currentCompromise.color,nueva_york:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{rotated:!0,x:{type:"category",show:!0},y:{show:!1}},legend:{show:!1}})},b.chartReady4=function(a){};var i;$(window).resize(function(){clearTimeout(i),i=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso05Ctrl",["UrlService","$compile","$templateRequest","$scope","$http","SlugColorService","LoadSVGService","$sce",function(a,b,c,d,e,f,g,h){function i(){var a=$("#"+p).width(),e=300,f=a/q.length,g=.2*f,i=d3.scale.linear().domain([0,100]).range([0,e-f-f/2]);o||(o={},o.svg=d3.select("#"+p).append("svg").classed("vertical-bar-svg",!0),o.detail=d3.select("#"+p).append("div").attr("id","vertical-bar-detail"),o.main=o.svg.append("g").classed("vertical-bar-g-main",!0)),o.svg.attr("height",e).attr("width",a),o.bars=o.main.selectAll(".vertical-bar-g").data(q),o.bars.enter().append("g").attr("id",function(a,b){return"vertical-bar-g-"+b}).classed("vertical-bar-g",!0).classed("categoria-"+d.currentCompromise.slug,!0).classed("categoria-unselected",!0).each(function(a,g){var i=d3.select(this);i.datum({ix:g}).append("rect").classed("vertical-bar-bg",!0).attr("height",e);var j=$(m).attr("width",f).attr("height",f).get(0);i.append("g").classed("vertical-bar-icon",!0).each(function(){this.appendChild(j.cloneNode(!0))}),i.append("rect").classed("vertical-bar-fill",!0).attr("fill","#ccc"),i.append("rect").classed("vertical-bar-value",!0).classed("fill-color",!0).datum(a).attr("fill",d.currentCompromise.color),i.append("text").classed("vertical-bar-text",!0).attr("text-anchor","middle").text(function(){return a.avance?a.avance+"%":"0%"}),i.datum({ix:g}).append("rect").classed("vertical-bar-event",!0).classed("handy",!0).attr("x",1).attr("y",1).attr("height",e-2).attr("stroke","#fff").attr("stroke-width",2).attr("fill","transparent").on("mouseover",function(){}).on("mouseout",function(){}).on("click",function(a){d.selectedPlaza=q[a.ix],d3.selectAll(".vertical-bar-g").classed("categoria-unselected",!0).classed("categoria-selected",!1),d3.selectAll(".vertical-bar-g#vertical-bar-g-"+a.ix).classed("categoria-unselected",!1).classed("categoria-selected",!0);var e=h.getTrustedResourceUrl("views/includes/plazaDetail.html");c(e).then(function(a){b($("#vertical-bar-detail").html(a).contents())(d)},function(){})})}),o.bars.attr("transform",function(a,b){return"translate("+b*f+",0)"}),o.bars.selectAll("text.vertical-bar-text").attr("x",f/2).attr("y",e-f/4+g/2),o.bars.selectAll("rect.vertical-bar-bg").attr("width",f),o.bars.selectAll("rect.vertical-bar-event").attr("width",f-2),o.bars.selectAll("g.vertical-bar-icon svg").attr("width",f).attr("height",f),o.bars.selectAll("rect.vertical-bar-fill").attr("height",e-f-f/2).attr("y",f).attr("x",g).attr("width",f-2*g),o.bars.selectAll("rect.vertical-bar-value").attr("height",function(a){var b=a.avance?a.avance:0;return i(parseInt(b))}).attr("y",function(a){var b=a.avance?a.avance:0;return f+(e-f-f/2)-i(parseInt(b))}).attr("x",g).attr("width",f-2*g)}var j=a.getUrlByPage("home"),k=new pym.Child({polling:1e3});k.sendHeight();var l=window._;d.loading=!0;var m,n;e.jsonp(j).success(function(a){d.currentCompromise=d.data=l.find(a,function(a){return 5===parseInt(a.numero)}),d.currentCompromise.color=f.getColorBySlug(d.currentCompromise.slug),d.currentCompromise.porcentaje_completado=parseInt(d.currentCompromise.porcentaje_completado),d.loading=!1,g.loadIcon(d.currentCompromise.icono,function(a){m=a,$(".icon-svg-container").html(a.cloneNode(!0))})});var o,p,q;d.dataLoaded=function(a,b){p=a,q=b,setTimeout(function(){i()},1e3)},d.dataLoaded2=function(a,e){d.bubbleId=a,d.bubbleConfig={color:d.currentCompromise.color};var f=d3.sum(e,function(a){return parseInt(a.hectareas)});d.bubbleData={name:"total",children:[]},l.each(e,function(a){d.bubbleData.children.push({name:a.tipo,data:Math.round(100*parseInt(a.hectareas)/f)+"%",value:parseInt(a.hectareas),children:[]})});var g=h.getTrustedResourceUrl("views/includes/bubble.html");c(g).then(function(c){b($("#"+a).html(c).contents())(d)})},d.prepareData3=function(a){return n=a,a},d.completeConfig3=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["metros_habitante"],x:"ciudad"},names:{metros_habitante:" m² por Habitante"},colors:{metros_habitante:d.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{rotated:!0,x:{type:"category",show:!1},y:{show:!0}},legend:{show:!1},bar:{width:{ratio:.8}}})},d.chartReady3=function(a,b){var c=d3.select(".c3-texts");d3.selectAll("#"+b+" .c3-event-rect").each(function(a){var b=n[a.index],d=d3.select(this),e=parseInt(d.attr("height")/2);c.append("text").attr("alignment-baseline","middle").classed("custom-c3-text",!0).attr("x",parseInt(d.attr("x"))+10).attr("y",parseInt(d.attr("y"))+e).text(b.ciudad)})};var r;$(window).resize(function(){clearTimeout(r),r=setTimeout(function(){o&&i()},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso06Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 6===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#fcc793",b.currentCompromise.grayColor="#e6e7e9",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.prepareData=function(a){return a},b.completeConfig=function(a){return angular.merge(a,{data:{types:{kilometros_construidos_proyectados:"line",kilometros_construidos_totales:"line"},regions:{kilometros_construidos_proyectados:[{style:"dashed"}]},names:{kilometros_construidos_proyectados:"Km Proyectados",kilometros_construidos_totales:"Km Construidos"},keys:{value:["kilometros_construidos_proyectados","kilometros_construidos_totales"],x:"anio"},colors:{kilometros_construidos_proyectados:b.currentCompromise.color,kilometros_construidos_totales:b.currentCompromise.color}},size:{height:350},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"category",show:!0},y:{show:!0}},legend:{show:!0}})},b.chartReady=function(a){};var i={};b.prepareData2=function(a){return i=a,a},b.completeConfig2=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["Existentes","Proyectados"],x:"corredor"},groups:[["Existentes","Proyectados"]],names:{Existentes:"Metrobús Existente",Proyectados:"Metrobús Proyectado"},colors:{Existentes:b.currentCompromise.color,Proyectados:b.currentCompromise.secondColor}},size:{height:350},padding:{top:0,right:20,bottom:10,left:20},bar:{width:23},axis:{rotated:!0,x:{type:"category",show:!1},y:{show:!0,min:0,max:225e3,count:4,padding:5,tick:{fit:!0,format:function(a){return Math.ceil(parseFloat(a))}}}},legend:{show:!0}})},b.chartReady2=function(a,b){var c=d3.select("#"+b+" .c3-texts");d3.selectAll("#"+b+" .c3-event-rect").each(function(a){var b=i[a.index],d=d3.select(this),e=parseInt(d.attr("height")/2);c.append("text").attr("alignment-baseline","middle").classed("custom-c3-text",!0).attr("x",parseInt(d.attr("x"))+10).attr("y",parseInt(d.attr("y"))+e).text(b.corredor)})};var j={};b.prepareData3=function(a){j=a;for(var b=0;b<j.length;b++){var c=parseFloat(j[b].porcentaje_avance);j[b].restante=100-c}return a},b.completeConfig3=function(a){return angular.merge(a,{data:{type:"bar",xFormat:"%Y-%m",keys:{value:["porcentaje_avance","restante"],x:"corredor"},order:"asc",groups:[["porcentaje_avance","restante"]],names:{porcentaje_avance:"Porcentaje Avance",restante:"Restante"},colors:{porcentaje_avance:b.currentCompromise.color,restante:b.currentCompromise.grayColor}},size:{height:350},padding:{top:0,right:20,bottom:0,left:20},axis:{rotated:!0,x:{type:"category",show:!1},y:{show:!0,min:0,padding:5,tick:{format:function(a){return a+"%"}}}},legend:{show:!1}})},b.chartReady3=function(a,b){var c=d3.select("#"+b+" .c3-texts");d3.selectAll("#"+b+" .c3-event-rect").each(function(a){var b=j[a.index],d=d3.select(this),e=parseInt(d.attr("height")/2);c.append("text").attr("alignment-baseline","middle").classed("custom-c3-text",!0).attr("x",parseInt(d.attr("x"))+10).attr("y",parseInt(d.attr("y"))+e).text(b.corredor)})};var k={};b.prepareData4=function(a){return k=a,a},b.completeConfig4=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["kilometros","proyectados"],x:"ciudad"},names:{kilometros:"Existente",proyectados:"Proyectado"},groups:[["kilometros","proyectados"]],order:"asc",colors:{kilometros:b.currentCompromise.color,proyectados:b.currentCompromise.secondColor}},size:{height:350},padding:{top:0,right:20,bottom:10,left:20},axis:{rotated:!0,x:{type:"category",show:!1},y:{show:!0}},legend:{show:!0}})},b.chartReady4=function(a,b){var c=d3.select("#"+b+" .c3-texts");d3.selectAll("#"+b+" .c3-event-rect").each(function(a){var b=k[a.index],d=d3.select(this),e=parseInt(d.attr("height")/2);c.append("text").attr("alignment-baseline","middle").classed("custom-c3-text",!0).attr("x",parseInt(d.attr("x"))+10).attr("y",parseInt(d.attr("y"))+e).text(b.ciudad)})};var l;$(window).resize(function(){clearTimeout(l),l=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso07Ctrl",["UrlService","$rootScope","$scope","$http","SlugColorService","LoadSVGService","$sce","$compile","$templateRequest",function(a,b,c,d,e,f,g,h,i){var j=a.getUrlByPage("home"),k=new pym.Child({polling:1e3});k.sendHeight();var l,m=window._;c.loading=!0,d.jsonp(j).success(function(a){c.currentCompromise=c.data=m.find(a,function(a){return 7===parseInt(a.numero)}),c.currentCompromise.porcentaje_completado=parseInt(c.currentCompromise.porcentaje_completado),c.currentCompromise.porcentaje_completado_2=parseInt(c.currentCompromise.cumplimiento_2_porcentaje_completado),c.currentCompromise.color=e.getColorBySlug(c.currentCompromise.slug),c.loading=!1,console.log(c.currentCompromise),f.loadIcon(c.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),c.prepareData1=function(a){function b(a){return a?(a=a.split(":"),60*+a[0]+ +a[1]):null}return m.each(a,function(a){a.mes_date=a.mes+"-01",a.linea_a_sec=b(a.linea_a),a.linea_b_sec=b(a.linea_b),a.linea_c_sec=b(a.linea_c),a.linea_d_sec=b(a.linea_d),a.linea_e_sec=b(a.linea_e),
a.linea_h_sec=b(a.linea_h),a.total_sec=b(a.total)}),a},c.completeConfig1=function(a){return angular.merge(a,{data:{keys:{value:["linea_a_sec","linea_b_sec","linea_c_sec","linea_d_sec","linea_e_sec","linea_h_sec","total_sec"],x:"mes_date"},names:{linea_a_sec:"Línea A",linea_b_sec:"Línea B",linea_c_sec:"Línea C",linea_d_sec:"Línea D",linea_e_sec:"Línea E",linea_h_sec:"Línea H",total_sec:"Total"},type:"spline",colors:{linea_a_sec:"rgb(0, 174, 219)",linea_b_sec:"rgb(238, 27, 46)",linea_c_sec:"rgb(1, 103, 178)",linea_d_sec:"rgb(0, 128, 103)",linea_e_sec:"rgb(108, 33, 128)",linea_h_sec:"rgb(255, 210, 3)"}},size:{height:300},padding:{top:0,right:40,bottom:10,left:40},point:{show:!1},axis:{x:{type:"timeseries",show:!0,tick:{fit:!0,format:b.d3Locale_ES.timeFormat("%b-%y"),count:6}},y:{show:!0,tick:{format:function(a){var b=Math.floor(a/60),c=a-60*b;return c=1===(""+c).length?"0"+c:c,b+":"+c}}}},legend:{show:!0}})},c.chartReady1=function(a){},c.prepareData3=function(a){return m.each(a,function(a){a.mes_date=a.mes+"-01",a.linea_a=parseInt(a.linea_a),a.linea_b=parseInt(a.linea_b),a.linea_c=parseInt(a.linea_c),a.linea_d=parseInt(a.linea_d),a.linea_e=parseInt(a.linea_e),a.linea_h=parseInt(a.linea_h),a.anio=parseInt(a.anio)}),c.data3=a,c.selectedYear=2015,c.selectOptions=m.map(m.groupBy(a,"anio"),function(a,b){return parseInt(b)}),c.getFilteredData()},c.changeOption=function(){l.load(angular.merge(c.dataConfig,{json:c.getFilteredData()}))},c.getFilteredData=function(){return m.filter(c.data3,{anio:c.selectedYear})},c.completeConfig3=function(a){return c.dataConfig={keys:{value:["linea_a","linea_b","linea_c","linea_d","linea_e","linea_h"],x:"mes_date"},names:{linea_a:"Línea A",linea_b:"Línea B",linea_c:"Línea C",linea_d:"Línea D",linea_e:"Línea E",linea_h:"Línea H"},type:"spline",colors:{linea_a_sec:"rgb(0, 174, 219)",linea_b_sec:"rgb(238, 27, 46)",linea_c_sec:"rgb(1, 103, 178)",linea_d_sec:"rgb(0, 128, 103)",linea_e_sec:"rgb(108, 33, 128)",linea_h_sec:"rgb(255, 210, 3)"}},angular.merge(a,{data:c.dataConfig,size:{height:300},point:{show:!1},padding:{top:0,right:40,bottom:10,left:60},axis:{x:{type:"timeseries",show:!0,tick:{format:"%m-%Y"}},y:{show:!0,tick:{format:function(a){return(a+"").replace("000000","m")}}}},legend:{show:!0}})},c.chartReady3=function(a,b){l=a,$("<div id='selector-container'></div>").insertBefore("#"+b);var d=g.getTrustedResourceUrl("views/includes/selector.html");i(d).then(function(a){h($("#selector-container").html(a).contents())(c)},function(){})};var n;$(window).resize(function(){clearTimeout(n),n=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso08Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 8===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.prepareData1=function(a){return a},b.completeConfig1=function(a){return angular.merge(a,{data:{xFormat:"%d-%m-%Y",keys:{value:["avance"],x:"obra"},names:{avance:"Avance"},colors:{avance:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"timeseries",show:!0,tick:{fit:!0,format:"%Y",count:4}},y:{show:!0,min:0,max:100,padding:5,tick:{format:function(a){return a+"%"}}}},legend:{show:!0}})},b.chartReady1=function(a){};var i;$(window).resize(function(){clearTimeout(i),i=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso09Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 9===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.prepareData1=function(a){return a},b.completeConfig1=function(a){return angular.merge(a,{data:{xFormat:"%d-%m-%Y",keys:{value:["avance"],x:"obra"},names:{avance:"Avance"},colors:{avance:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"timeseries",show:!0,tick:{fit:!0,count:5,format:"%m-%Y"}},y:{show:!0,min:0,max:100,padding:5,tick:{format:function(a){return a+"%"}}}},legend:{show:!0}})},b.chartReady1=function(a){};var i;$(window).resize(function(){clearTimeout(i),i=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso10Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService","$sce","$compile","$templateRequest",function(a,b,c,d,e,f,g,h){var i=a.getUrlByPage("home"),j=new pym.Child({polling:1e3});j.sendHeight();var k,l=window._;b.loading=!0,c.jsonp(i).success(function(a){b.currentCompromise=b.data=l.find(a,function(a){return 10===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.prepareData1=function(a){return a},b.completeConfig1=function(a){return angular.merge(a,{data:{keys:{value:["estudiantes_abandonan","variacion_interanual","variacion_acumulada"],x:"anio"},names:{estudiantes_abandonan:"Abandonos",variacion_interanual:"Continúan (por año)",variacion_acumulada:"Continúan (acumulado)"},colors:{estudiantes_abandonan:b.currentCompromise.color,variacion_interanual:b.currentCompromise.secondColor}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{show:!0},y:{show:!0}},legend:{show:!0}})},b.chartReady1=function(){},b.prepareData2=function(a){return b.labels=l.keys(a[0]),l.remove(b.labels,function(a){return-1!==l.indexOf(["anio","CV"],a)}),b.origLabels=angular.copy(b.labels),b.colors={},b.labels.forEach(function(a){b.colors[a]="#e6e6e6"}),b.selectedProv=b.labels[0],a},b.selectedColorPalette=function(){var a=angular.copy(b.colors);return b.selectedProv&&(a[b.selectedProv]=b.currentCompromise.color),a},b.completeConfig2=function(a){return b.selectOptions=b.origLabels,b.dataConfig={keys:{value:b.selectOptions,x:"anio"},type:"spline",colors:b.selectedColorPalette()},angular.merge(a,{data:b.dataConfig,size:{height:300},point:{show:!1},padding:{top:0,right:40,bottom:10,left:30},axis:{x:{show:!0},y:{show:!0}},legend:{show:!1}})},b.chartReady2=function(a,c){b.classesLabels={},b.labels.forEach(function(a,c){b.classesLabels[b.origLabels[c]]=a.replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-")});var d=b.classesLabels[b.selectedProv];$(".c3-lines path").css("stroke-width","1px"),$(".c3-lines-"+d+" path").css("stroke-width","5px"),k=a,$("<div id='selector-container'></div>").insertAfter("#"+c);var e=f.getTrustedResourceUrl("views/includes/selectorProvincias.html");h(e).then(function(a){g($("#selector-container").html(a).contents())(b)},function(){})},b.changeOption=function(){k.load(angular.merge(b.dataConfig,{colors:b.selectedColorPalette()}));var a=b.classesLabels[b.selectedProv];$(".c3-lines path").css("stroke-width","1px"),$(".c3-lines-"+a+" path").css("stroke-width","5px")};var m;$(window).resize(function(){clearTimeout(m),m=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso11Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService","$sce","$compile","$templateRequest",function(a,b,c,d,e,f,g,h){var i=a.getUrlByPage("home"),j=new pym.Child({polling:1e3});j.sendHeight();var k=window._;b.loading=!0,c.jsonp(i).success(function(a){b.currentCompromise=b.data=k.find(a,function(a){return 11===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.prepareData1=function(a){return a.map(function(a){a.mes+="-01",a.porcentaje_avance=a.porcentaje_avance?parseInt(a.porcentaje_avance):0}),a},b.completeConfig1=function(a){return angular.merge(a,{data:{keys:{value:["meta"],x:"mes"},names:{meta:"Meta"},colors:{meta:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:40,bottom:10,left:40},axis:{x:{type:"timeseries",show:!0,tick:{fit:!0,format:"%b-%Y",count:4}},y:{show:!0,min:0,padding:5,tick:{format:function(a){return a+"%"}}}},legend:{show:!0}})},b.chartReady1=function(){}}]),angular.module("compromisosSiteApp").controller("Compromiso12Ctrl",["UrlService","$compile","$templateRequest","$scope","$http","SlugColorService","LoadSVGService","$sce",function(a,b,c,d,e,f,g,h){function i(a){var e=$("#"+a).width(),f=150,g=e/o[a].length,i=.1*g,j=d3.scale.linear().domain([0,100]).range([0,f-g-g/2]);n[a]||(n[a]={},n[a].svg=d3.select("#"+a).append("svg").classed("vertical-bar-svg",!0),n[a].main=n[a].svg.append("g").classed("vertical-bar-g-main",!0)),n[a].svg.attr("height",f).attr("width",e),n[a].bars=n[a].main.selectAll(".vertical-bar-g").data(o[a]),n[a].bars.enter().append("g").attr("id",function(a,b){return"vertical-bar-g-"+a.escuela}).classed("vertical-bar-g",!0).classed("categoria-"+d.currentCompromise.slug,!0).classed("categoria-unselected",!0).each(function(e,i){var j=d3.select(this);j.datum({ix:e.escuela}).append("rect").classed("vertical-bar-bg",!0).attr("height",f);var k=$(m).attr("width",g).attr("height",g).get(0);j.append("g").classed("vertical-bar-icon",!0).each(function(){this.appendChild(k.cloneNode(!0))}),j.append("rect").classed("vertical-bar-fill",!0).attr("fill","#ccc"),j.append("rect").classed("vertical-bar-value",!0).classed("fill-color",!0).datum(e).attr("fill",d.currentCompromise.color),j.append("text").classed("vertical-bar-text",!0).attr("text-anchor","middle").text(function(){return e.avance?e.avance+"%":"0%"}),j.datum({ix:e.escuela}).append("rect").classed("vertical-bar-event",!0).classed("handy",!0).attr("x",1).attr("y",1).attr("height",f-2).attr("stroke","#fff").attr("stroke-width",2).attr("fill","transparent").on("mouseover",function(){}).on("mouseout",function(){}).on("click",function(e,f){d.selectedEscuela=l.find(o[a],function(a){return a.escuela==e.ix}),d3.selectAll(".vertical-bar-g").classed("categoria-unselected",!0).classed("categoria-selected",!1),d3.selectAll(".vertical-bar-g#vertical-bar-g-"+e.ix).classed("categoria-unselected",!1).classed("categoria-selected",!0);var g=h.getTrustedResourceUrl("views/includes/escuelaDetail.html");c(g).then(function(a){b($("#vertical-bar-detail").html(a).contents())(d)},function(){})})}),n[a].bars.attr("transform",function(a,b){return"translate("+b*g+",0)"}),n[a].bars.selectAll("text.vertical-bar-text").attr("x",g/2).attr("y",f-g/4+i/2),n[a].bars.selectAll("rect.vertical-bar-bg").attr("width",g),n[a].bars.selectAll("rect.vertical-bar-event").attr("width",g-2),n[a].bars.selectAll("g.vertical-bar-icon svg").attr("width",g).attr("height",g),n[a].bars.selectAll("rect.vertical-bar-fill").attr("height",f-g-g/2).attr("y",g).attr("x",i).attr("width",g-2*i),n[a].bars.selectAll("rect.vertical-bar-value").attr("height",function(a){var b=a.avance?a.avance:0;return j(parseInt(b))}).attr("y",function(a){var b=a.avance?a.avance:0;return g+(f-g-g/2)-j(parseInt(b))}).attr("x",i).attr("width",g-2*i)}var j=a.getUrlByPage("home"),k=new pym.Child({polling:1e3});k.sendHeight();var l=window._;d.loading=!0;var m;e.jsonp(j).success(function(a){d.currentCompromise=d.data=l.find(a,function(a){return 12===parseInt(a.numero)}),d.currentCompromise.color=f.getColorBySlug(d.currentCompromise.slug),d.currentCompromise.porcentaje_completado=parseInt(d.currentCompromise.porcentaje_completado),d.loading=!1,g.loadIcon(d.currentCompromise.icono,function(a){m=a,$(".icon-svg-container").html(a.cloneNode(!0))})});var n={},o={};d.dataLoaded=function(a,b){var c=Math.ceil(b.length/2),d=l.chunk(b,c);o={"chart-escuelas-1":d[0],"chart-escuelas-2":d[1]},$("#"+a).append("<div class='row'><div class='col-md-10'><div id='chart-escuelas-1'></div><div id='chart-escuelas-2'></div></div><div id='vertical-bar-detail' class='col-md-2'></div></div>"),setTimeout(function(){i("chart-escuelas-1"),i("chart-escuelas-2")},1e3)};var p;$(window).resize(function(){clearTimeout(p),p=setTimeout(function(){n&&(i("chart-escuelas-1"),i("chart-escuelas-2"))},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso13Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 13===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))}),console.log(b.currentCompromise)}),b.youtubeLink="https://www.youtube.com/watch?v=AoZ98-TwqM4",b.prepareData1=function(a){return console.log(a),a},b.completeConfig1=function(a){return angular.merge(a,{data:{types:{"Meta G2":"area","Desempeno G2":"line","Meta G3":"area","Desempeno G3":"line"},keys:{value:["Meta G2","Desempeno G2","Meta G3","Desempeno G3"],x:"anio"},names:{"Desempeno G2":"Desempeño G2","Desempeno G2":"Desempeño G3"},order:"asc",colors:{"Meta G2":b.currentCompromise.secondColor,"Desempeno G2":"#3cb8b0","Meta G3":b.currentCompromise.secondColor,"Desempeno G3":"#f98f41"}},size:{height:300},padding:{top:0,right:20,bottom:20,left:40},axis:{x:{type:"category",show:!0},y:{show:!0,min:0,tick:{format:function(a){return a+"%"}}}},legend:{show:!0,item:{tile:{width:5,height:10}}}})},b.chartReady1=function(a){};var i;$(window).resize(function(){clearTimeout(i),i=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso14Ctrl",["UrlService","$rootScope","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e,f){var g=a.getUrlByPage("home"),h=new pym.Child({polling:1e3});h.sendHeight();var i=window._;c.loading=!0,d.jsonp(g).success(function(a){c.currentCompromise=c.data=i.find(a,function(a){return 14===parseInt(a.numero)}),c.currentCompromise.porcentaje_completado=parseInt(c.currentCompromise.porcentaje_completado),c.currentCompromise.color=e.getColorBySlug(c.currentCompromise.slug),c.currentCompromise.secondColor="#bdbec2",c.loading=!1,f.loadIcon(c.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))}),console.log(c.currentCompromise)}),c.prepareData=function(a){return a},c.completeConfig=function(a){return angular.merge(a,{data:{xFormat:"%Y-%m",types:{meta:"area",policias:"line"},regions:{meta:[{style:"dashed"}]},keys:{value:["policias","meta"],x:"fecha"},names:{meta:"Meta",policias:"Policías"},colors:{meta:c.currentCompromise.secondColor,policias:c.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"timeseries",show:!0,tick:{fit:!0,format:b.d3Locale_ES.timeFormat("%b-%y"),count:6}},y:{show:!0,min:10}},legend:{show:!0}})},c.chartReady=function(a){};var j={};c.prepareData2=function(a){return j=a,a},c.completeConfig2=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["policias_cienmilhab"],x:"ciudad"},names:{ciudad:"Ciudad",policias_cienmilhab:"Policías por 100 mil Habitantes"},colors:{policias_cienmilhab:c.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{rotated:!0,x:{type:"category",show:!1},y:{show:!0}},legend:{show:!1}})},c.chartReady2=function(a,b){var c=d3.select("#"+b+" .c3-texts");d3.selectAll("#"+b+" .c3-event-rect").each(function(a){var b=j[a.index],d=d3.select(this),e=parseInt(d.attr("height")/2);c.append("text").attr("alignment-baseline","middle").classed("custom-c3-text",!0).attr("x",parseInt(d.attr("x"))+10).attr("y",parseInt(d.attr("y"))+e).text(b.anio+": "+b.ciudad)})};var k;$(window).resize(function(){clearTimeout(k),k=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso15Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService","$sce","$compile","$templateRequest",function(a,b,c,d,e,f,g,h){var i=a.getUrlByPage("home"),j=new pym.Child({polling:1e3});j.sendHeight();var k=window._;b.loading=!0,c.jsonp(i).success(function(a){b.currentCompromise=b.data=k.find(a,function(a){return 15===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.prepareData1=function(a){return a},b.completeConfig1=function(a){return angular.merge(a,{data:{xFormat:"%d-%m-%Y",keys:{value:["avance"],x:"obra"},names:{avance:"Avance"},colors:{avance:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"timeseries",tick:{format:"%m-%Y"},show:!0},y:{show:!0,min:0,max:100,padding:5,tick:{format:function(a){return a+"%"}}}},legend:{show:!0}})},b.chartReady1=function(a){};var l={};b.prepareData2=function(a){return l=a,a},b.completeConfig2=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["contravenciones","delitos"],x:"comuna"},names:{contravenciones:"Contravenciones",delitos:"Delitos"},colors:{contravenciones:b.currentCompromise.color,delitos:b.currentCompromise.secondColor}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{rotated:!0,x:{type:"category",show:!0},y:{show:!0}},legend:{show:!0}})},b.chartReady2=function(a,b){};var m;$(window).resize(function(){clearTimeout(m),m=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso16Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService","$rootScope",function(a,b,c,d,e,f){var g=a.getUrlByPage("home"),h=new pym.Child({polling:1e3});h.sendHeight();var i=window._;b.loading=!0,c.jsonp(g).success(function(a){b.currentCompromise=b.data=i.find(a,function(a){return 16===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.youtubeLink="https://www.youtube.com/watch?v=AoZ98-TwqM4",b.prepareData=function(a){return i.each(a,function(a){a.mes_date=a.mes+"-01"}),a},b.completeConfig=function(a){return angular.merge(a,{data:{types:{meta_mensual:"area",medicion_real:"line"},keys:{value:["meta_mensual","medicion_real"],x:"mes_date"},names:{medicion_real:"Nuevos puntos digitales",meta_mensual:"Meta"},colors:{meta_mensual:"#ccc",medicion_real:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"timeseries",show:!0,tick:{fit:!0,format:f.d3Locale_ES.timeFormat("%b-%y"),count:6}},y:{show:!0,min:-1}},legend:{show:!0}})},b.chartReady=function(a){},b.prepareData2=function(a){return a},b.completeConfig2=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["cantidad_zonas_wifi_gratis"],x:"ciudad"},names:{cantidad_zonas_wifi_gratis:"Cantidad de Zonas Wifi Gratis"},colors:{cantidad_zonas_wifi_gratis:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:100},axis:{rotated:!0,x:{type:"category",show:!0},y:{show:!0}},legend:{show:!1}})},b.chartReady2=function(a){};var j;$(window).resize(function(){clearTimeout(j),j=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso17Ctrl",["UrlService","$compile","$templateRequest","$scope","$http","SlugColorService","LoadSVGService","$sce",function(a,b,c,d,e,f,g,h){function i(){var a=$("#"+o).width(),e=300,f=a/p.length,g=.1*f,i=d3.scale.linear().domain([0,100]).range([0,e-f-f/2]);n||(n={},n.svg=d3.select("#"+o).append("svg").classed("vertical-bar-svg",!0),n.detail=d3.select("#"+o).append("div").attr("id","vertical-bar-detail"),n.main=n.svg.append("g").classed("vertical-bar-g-main",!0)),n.svg.attr("height",e).attr("width",a),n.bars=n.main.selectAll(".vertical-bar-g").data(p),n.bars.enter().append("g").attr("id",function(a,b){return"vertical-bar-g-"+b}).classed("vertical-bar-g",!0).classed("categoria-"+d.currentCompromise.slug,!0).classed("categoria-unselected",!0).each(function(a,g){var i=d3.select(this);i.datum({ix:g}).append("rect").classed("vertical-bar-bg",!0).attr("height",e);var j=$(m).attr("width",f).attr("height",f).get(0);i.append("g").classed("vertical-bar-icon",!0).each(function(){this.appendChild(j.cloneNode(!0))}),i.append("rect").classed("vertical-bar-fill",!0).attr("fill","#ccc"),i.append("rect").classed("vertical-bar-value",!0).classed("fill-color",!0).datum(a).attr("fill",d.currentCompromise.color),i.append("text").classed("vertical-bar-text",!0).attr("text-anchor","middle").text(function(){return a.avance?a.avance+"%":"0%"}),i.datum({ix:g}).append("rect").classed("vertical-bar-event",!0).classed("handy",!0).attr("x",1).attr("y",1).attr("height",e-2).attr("stroke","#fff").attr("stroke-width",2).attr("fill","transparent").on("mouseover",function(){}).on("mouseout",function(){}).on("click",function(a){d.selectedPlaza=p[a.ix],d3.selectAll(".vertical-bar-g").classed("categoria-unselected",!0).classed("categoria-selected",!1),d3.selectAll(".vertical-bar-g#vertical-bar-g-"+a.ix).classed("categoria-unselected",!1).classed("categoria-selected",!0);var e=h.getTrustedResourceUrl("views/includes/plazaDetail.html");c(e).then(function(a){b($("#vertical-bar-detail").html(a).contents())(d)},function(){})})}),n.bars.attr("transform",function(a,b){return"translate("+b*f+",0)"}),n.bars.selectAll("text.vertical-bar-text").attr("x",f/2).attr("y",e-f/4+g/2),n.bars.selectAll("rect.vertical-bar-bg").attr("width",f),n.bars.selectAll("rect.vertical-bar-event").attr("width",f-2),n.bars.selectAll("g.vertical-bar-icon svg").attr("width",f).attr("height",f),n.bars.selectAll("rect.vertical-bar-fill").attr("height",e-f-f/2).attr("y",f).attr("x",g).attr("width",f-2*g),n.bars.selectAll("rect.vertical-bar-value").attr("height",function(a){return i(parseInt(a.avance))}).attr("y",function(a){return f+(e-f-f/2)-i(parseInt(a.avance))}).attr("x",g).attr("width",f-2*g)}var j=a.getUrlByPage("home"),k=new pym.Child({polling:1e3});k.sendHeight();var l=window._;d.loading=!0;var m;e.jsonp(j).success(function(a){d.currentCompromise=d.data=l.find(a,function(a){return 17===parseInt(a.numero)}),d.currentCompromise.color=f.getColorBySlug(d.currentCompromise.slug),d.currentCompromise.porcentaje_completado=parseInt(d.currentCompromise.porcentaje_completado),d.loading=!1,g.loadIcon(d.currentCompromise.icono,function(a){m=a,$(".icon-svg-container").html(a.cloneNode(!0))})});var n,o,p;d.dataLoaded=function(a,b){o=a,p=b,setTimeout(function(){i()},1e3)};var q;$(window).resize(function(){clearTimeout(q),q=setTimeout(function(){n&&i()},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso18Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService","$sce","$templateRequest","$compile",function(a,b,c,d,e,f,g,h){var i=a.getUrlByPage("home"),j=new pym.Child({polling:1e3});j.sendHeight();var k=window._;b.loading=!0,c.jsonp(i).success(function(a){b.currentCompromise=b.data=k.find(a,function(a){return 18===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.dataLoaded1=function(a,c){b.medicos=c,b.mediConfig=[],angular.forEach(c,function(a){b.mediConfig.push({icono:"hombre",orientacion:"rows",items:20,base:{titulo:"",color:"#cccccc",cantidad:parseInt(a.equipos)},opciones:[{titulo:"",color:b.currentCompromise.color,cantidad:parseInt(a.equipos)}]})});var d=f.getTrustedResourceUrl("views/includes/medicos.html");g(d).then(function(c){h($("#"+a).html(c).contents())(b)})},b.prepareData2=function(a){var c={};angular.forEach(a,function(a){var b=k.reject(k.keys(a),function(a){return"especialidad"==a});angular.forEach(b,function(b){c[b]||(c[b]={}),c[b][a.especialidad]=parseInt(a[b])})});var d=[];return angular.forEach(c,function(a,c){b.values=k.keys(a),d.push(angular.merge(a,{anio:c}))}),d},b.completeConfig2=function(a){return angular.merge(a,{data:{type:"line",keys:{value:b.values,x:"anio"}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{rotated:!1,x:{type:"category",show:!0},y:{show:!0}},legend:{show:!0}})},b.chartReady2=function(a){}}]),angular.module("compromisosSiteApp").controller("Compromiso19Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService","$sce","$templateRequest","$compile",function(a,b,c,d,e,f,g,h){var i=a.getUrlByPage("home"),j=new pym.Child({polling:1e3});j.sendHeight();var k=window._;b.loading=!0,c.jsonp(i).success(function(a){b.currentCompromise=b.data=k.find(a,function(a){return 19===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.dataLoaded1=function(a,c){b.medicos=c,b.mediConfig=[],angular.forEach(c,function(a){b.mediConfig.push({icono:"hombre",orientacion:"rows",items:20,base:{titulo:"",color:"#cccccc",cantidad:parseInt(a.equipos)},opciones:[{titulo:"",color:b.currentCompromise.color,cantidad:parseInt(a.equipos)}]})});var d=f.getTrustedResourceUrl("views/includes/medicos.html");g(d).then(function(c){h($("#"+a).html(c).contents())(b)})},b.prepareData2=function(a){return a},b.completeConfig2=function(a){return angular.merge(a,{data:{xFormat:"%Y",types:{cantidad_consultas:"line"},names:{cantidad_consultas:"Cantidad de Consultas"},keys:{value:["cantidad_consultas"],x:"anio"},colors:{cantidad_consultas:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"timeseries",show:!0,tick:{format:"%Y"}},y:{show:!0,min:500,count:4,tick:{min:0,fit:!0}}},legend:{show:!0}})},b.chartReady2=function(a){};var l;$(window).resize(function(){clearTimeout(l),l=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso20Ctrl",["UrlService","$compile","$templateRequest","$scope","$http","SlugColorService","LoadSVGService","$sce",function(a,b,c,d,e,f,g,h){var i=a.getUrlByPage("home"),j=new pym.Child({polling:1e3});j.sendHeight();var k=window._;d.loading=!0;var l;e.jsonp(i).success(function(a){d.currentCompromise=d.data=k.find(a,function(a){return 20===parseInt(a.numero)}),d.currentCompromise.color=f.getColorBySlug(d.currentCompromise.slug),d.currentCompromise.porcentaje_completado=parseInt(d.currentCompromise.porcentaje_completado),d.loading=!1,g.loadIcon(d.currentCompromise.icono,function(a){l=a,$(".icon-svg-container").html(a.cloneNode(!0))})});d.prepareData1=function(a){return a.map(function(a){return a.mes+="-01"}),a},d.completeConfig1=function(a){return angular.merge(a,{data:{type:"line",keys:{value:["cantidad_iniciativas","meta_acumulado"],x:"mes"},names:{cantidad_iniciativas:"Cantidad de Iniciativas",meta_acumulado:"Meta"},colors:{cantidad_iniciativas:d.currentCompromise.color,meta_acumulado:"#ccc"}},point:{show:!1},size:{height:300},padding:{top:0,right:20,bottom:10,left:30},axis:{rotated:!1,x:{type:"timeseries",show:!0,tick:{format:"%m-%Y"}},y:{show:!0}},legend:{anchor:"top-left",x:10,y:0,step:void 0,show:!0}})},d.chartReady1=function(a,b){},d.prepareData2=function(a){return a},d.completeConfig2=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["proyectos","obras"],x:"estado"},names:{proyectos:"Proyectos",obras:"Obras"},colors:{proyectos:d.currentCompromise.color,obras:"#ccc"},groups:[["proyectos","obras"]]},point:{show:!1},size:{height:300},padding:{top:0,right:20,bottom:10,left:30},axis:{rotated:!1,x:{type:"category",show:!0},y:{show:!0}},legend:{show:!0}})},d.chartReady2=function(a,b){},d.dataLoaded4=function(a,e){d.bubbleId=a,d.bubbleConfig={color:d.currentCompromise.color};var f=d3.sum(e,function(a){return parseInt(a.cantidad_proyectos)});d.bubbleData={name:"total",children:[]},k.each(e,function(a){d.bubbleData.children.push({name:a.area,data:Math.round(100*parseInt(a.cantidad_proyectos)/f)+"%",value:parseInt(a.cantidad_proyectos),children:[]})});var g=h.getTrustedResourceUrl("views/includes/bubble.html");c(g).then(function(c){b($("#"+a).html(c).contents())(d)})}}]),angular.module("compromisosSiteApp").directive("smartContent",function(){return{restrict:"E",replace:!0,scope:{url:"=url",title:"=titulo",nota:"=nota",fuente:"=fuente",source:"=source",prepareCallback:"=prepareCallback",configCallback:"=configCallback",readyCallback:"=readyCallback",simpleLoadCallback:"=simpleLoadCallback",template:"=template"},controller:["$scope","$timeout","UrlService","$http",function(a,b,c,d){function e(a){return null!==a.match(/\b\w*(youtu)\w*\b/)}function f(a){return null!==a.match(/\.(jpeg|jpg|gif|png)$/)}function g(a){return null!==a.match(/\b\w*(youtube)\w*\b/)?$.urlParam(a,"v"):null!==a.match(/\b\w*(youtu\.be)\w*\b/)?a.split("/")[3]:void 0}a.loading=!0,a.id="content-"+Math.floor(1e4*Math.random()),a.getTemplateUrl=function(){if(e(a.url)){a.loading=!1,a.ytSwitch=!1;var b=g(a.url);return a.ytThumbnail="http://img.youtube.com/vi/{{VIDEO_ID}}/maxresdefault.jpg".replace("{{VIDEO_ID}}",b),"views/directives/youtubePlayer.html"}return f(a.url)?(a.loading=!1,"views/directives/imageFull.html"):a.template?a.template:"views/directives/simpleChart.html"},a.chartConfigDefaults={data:{json:[]},padding:{top:0,right:50,bottom:0,left:50},legend:{padding:35,item:{tile:{width:20,height:20},onclick:function(){}}},onrendered:function(){}},a.renderChart=function(){var e=c.getUrlByCsv(a.url);a.chartConfigDefaults.bindto="#"+a.id,d.jsonp(e).success(function(c){a.prepareCallback?a.chartConfigDefaults.data.json=a.prepareCallback(c):a.chartConfigDefaults.data.json=c,a.configCallback&&(a.chartConfigDefaults=a.configCallback(a.chartConfigDefaults)),b(function(){a.chart=c3.generate(a.chartConfigDefaults),a.bindFinalEvents(),b(function(){a.readyCallback&&a.readyCallback(a.chart,a.id)},1200)},500)})},a.simpleLoad=function(){var b=c.getUrlByCsv(a.url);d.jsonp(b).success(function(b){a.simpleLoadCallback&&(a.simpleLoadCallback(a.id,b),a.bindFinalEvents())})},a.bindFinalEvents=function(){a.loading=!1,$('[data-toggle="popover"]').popover()};var h;$(window).resize(function(){clearTimeout(h),h=setTimeout(function(){a.resizeFunction&&a.resizeFunction()},500)})}],template:'<ng-include src="getTemplateUrl()"/>'}}),angular.module("compromisosSiteApp").directive("iconChart",function(){return{restrict:"E",replace:!0,scope:{icono:"=icono",items:"=items",orientacion:"=orientacion",base:"=base",
opciones:"=opciones"},controller:["$scope","$http","LoadSVGService",function(a,b,c){function d(){$(".icons-chart-base").css("color",a.base.color).css("border-color",a.base.color),$(".icons-chart-option").each(function(a){var b=$(this).data("color");$(this).css("color",b)}),$(".icon-chart-svg-container-icon .st0").css("fill",a.base.color);var b=0;angular.forEach(a.opciones,function(a){angular.forEach(d3.range(b,b+a.cantidad),function(){$("#icon-chart-svg-"+b+" .st0").css("fill",a.color),b++})})}a.items=a.items?parseInt(a.items):10,a.qty=d3.range(0,parseInt(a.base.cantidad)),a.range10=d3.range(0,a.items);var e=Math.floor(parseInt(a.base.cantidad)/a.items),f=parseInt(a.base.cantidad)%a.items,g=0;a.cols=a.range10.map(function(b){var c=[];return e>b&&(c=d3.range(g,g+a.items),g+=10),b==e&&(c=d3.range(g,g+f)),{items:c}}),c.loadIcon(a.icono,function(a){$(".icon-chart-svg-container-icon").html(a.cloneNode(!0)),d()})}],templateUrl:"views/directives/iconChart.html"}}),angular.module("compromisosSiteApp").directive("bubbleChart",function(){return{restrict:"E",replace:!1,scope:{container:"=container",config:"=config",data:"=bubbles"},controller:["$scope","$http",function(a,b){function c(){var b=350,c=($("#"+a.id).width()-b)/2;$("#"+a.id).width()<b&&(b=$("#"+a.id).width(),c=0);var d=d3.layout.pack().sort(null).size([b,b]).padding(5).value(function(a){return parseInt(a.value)});a.chart||(a.chart={},a.chart.svg=d3.select("#"+a.id).append("svg").attr("class","bubble-container").attr("width",$("#"+a.id).width()).attr("height",b),a.chart.mainGroup=a.chart.svg.append("g").classed("main",!0)),a.chart.svg.attr("width",$("#"+a.id).width()),a.chart.mainGroup.attr("transform",function(){return"translate("+c+",0)"});var e=a.chart.mainGroup.datum(a.data).selectAll(".node").data(d.nodes);e.enter().append("g").attr("class",function(a){var b=a.children?"node":"leaf node";return b}).each(function(){d3.select(this).append("circle").filter(function(a){return"total"!==a.name}).style("fill",function(){return a.config.color}),d3.select(this).append("text").attr("dy","0em").classed("bubble-chart-text-title",!0).text(function(a){return a.name}),d3.select(this).append("text").attr("dy","1em").classed("bubble-chart-text-subtitle",!0).text(function(a){return a.data})}),e.attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),e.selectAll("circle").attr("r",function(a){return a.r})}a.id=a.container+"-directive",a.chart=null,setTimeout(function(){c()},1e3);var d;$(window).resize(function(){clearTimeout(d),d=setTimeout(function(){a.chart&&c()},500)})}],template:'<div id="{{id}}"></div>'}}),angular.module("compromisosSiteApp").run(["$templateCache",function(a){"use strict";a.put("views/c01.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" source="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> <div ng-if="data.detalle_3" class="col-md-6 text-center"> <smart-content url="data.detalle_3" source="data.detalle_3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente" simple-load-callback="dataLoaded3" template="\'views/directives/customChart.html\'"></smart-content> </div> <div ng-if="data.detalle_4" class="col-md-6 text-center"> <smart-content url="data.detalle_4" source="data.detalle_4" titulo="data.detalle_4_nombre" nota="data.detalle_4_nota" fuente="data.detalle_4_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c02.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" source="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_3" class="col-md-12 text-center"> <smart-content url="data.detalle_3" source="data.detalle_3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente" simple-load-callback="dataLoaded3" template="\'views/directives/customChart.html\'"></smart-content> </div> </div> <hr> </div>'),a.put("views/c03.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" prepare-callback="prepareData" config-callback="completeConfig" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" source="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> <div ng-if="data.detalle_3" class="col-md-6 text-center bar-chart-{{currentCompromise.slug}}"> <smart-content url="data.detalle_3" source="data.detalle_3" prepare-callback="prepareData3" config-callback="completeConfig3" ready-callback="chartReady3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c04.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" prepare-callback="prepareData" config-callback="completeConfig" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" source="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> <div ng-if="data.detalle_3" class="col-md-6 text-center bar-chart-{{currentCompromise.slug}}"> <smart-content url="data.detalle_3" source="data.detalle_3" prepare-callback="prepareData3" config-callback="completeConfig3" ready-callback="chartReady3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> <div ng-if="data.detalle_4" class="col-md-6 text-center bar-chart-{{currentCompromise.slug}}"> <smart-content url="data.detalle_4" source="data.detalle_4" prepare-callback="prepareData4" config-callback="completeConfig4" ready-callback="chartReady4" titulo="data.detalle_4_nombre" nota="data.detalle_4_nota" fuente="data.detalle_4_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c05.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-12 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente" simple-load-callback="dataLoaded" template="\'views/directives/customChart.html\'"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" source="data.detalle_2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente" simple-load-callback="dataLoaded2" template="\'views/directives/customChart.html\'"></smart-content> </div> <div ng-if="data.detalle_3" class="col-md-6 text-center bar-chart-{{currentCompromise.slug}}"> <smart-content url="data.detalle_3" source="data.detalle_3" prepare-callback="prepareData3" config-callback="completeConfig3" ready-callback="chartReady3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c06.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData" config-callback="completeConfig" titulo="data.detalle_1_nombre" source="data.detalle_1" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center darker-text"> <smart-content url="data.detalle_2" source="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_3" class="col-md-6 text-center darker-text"> <smart-content url="data.detalle_3" source="data.detalle_3" prepare-callback="prepareData3" config-callback="completeConfig3" ready-callback="chartReady3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> <div ng-if="data.detalle_4" class="col-md-6 text-center"> <smart-content url="data.detalle_4" source="data.detalle_4" prepare-callback="prepareData4" config-callback="completeConfig4" ready-callback="chartReady4" titulo="data.detalle_4_nombre" nota="data.detalle_4_nota" fuente="data.detalle_4_fuente"></smart-content> </div> </div> </div>'),a.put("views/c07.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_3" class="col-md-12 text-center"> <smart-content url="data.detalle_3" prepare-callback="prepareData3" config-callback="completeConfig3" ready-callback="chartReady3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c08.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_3" class="col-md-6 text-center"> <smart-content url="data.detalle_3" titulo="data.detalle_3_nombre"></smart-content> </div> </div> </div>'),a.put("views/c09.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_3" class="col-md-6 text-center"> <smart-content url="data.detalle_3" titulo="data.detalle_3_nombre"></smart-content> </div> </div> </div>'),a.put("views/c10.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" source="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c11.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c12.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-12 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente" simple-load-callback="dataLoaded" template="\'views/directives/customChart.html\'"></smart-content> </div> </div> <hr> </div>'),a.put("views/c13.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> </div>'),a.put("views/c14.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" prepare-callback="prepareData" config-callback="completeConfig" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c15.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> </div>'),a.put("views/c16.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" prepare-callback="prepareData" config-callback="completeConfig" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" source="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c17.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-12 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente" simple-load-callback="dataLoaded" template="\'views/directives/customChart.html\'"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente" simple-load-callback="dataLoaded2" template="\'views/directives/customChart.html\'"></smart-content> </div> <div ng-if="data.detalle_3" class="col-md-6 text-center"> <smart-content url="data.detalle_3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c18.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente" simple-load-callback="dataLoaded1" template="\'views/directives/customChart.html\'"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" source="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c19.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente" simple-load-callback="dataLoaded1" template="\'views/directives/customChart.html\'"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" source="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c20.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" source="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" source="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_3" class="col-md-6 text-center"> <smart-content url="data.detalle_3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> <div ng-if="data.detalle_4" class="col-md-6 text-center"> <smart-content url="data.detalle_4" source="data.detalle_4" titulo="data.detalle_4_nombre" nota="data.detalle_4_nota" fuente="data.detalle_4_fuente" simple-load-callback="dataLoaded4" template="\'views/directives/customChart.html\'"></smart-content> </div> </div> <hr> </div>'),a.put("views/directives/customChart.html",'<div class="detalle-frame"> <p class="detalle-frame-title text-left" ng-if="title">{{title}} </p> <i ng-if="nota || fuente" class="detalle-frame-icon glyphicon glyphicon-info-sign" data-container="{{id}}" title="{{nota}}" data-toggle="popover" data-placement="bottom" data-content="Fuente: {{fuente}}"> </i> <span ng-show="loading">Cargando...</span> <div id="{{id}}" ng-init="simpleLoad()"></div> </div>'),a.put("views/directives/iconChart.html",'<div class="icons-container-{{orientacion}}"> <div> <div class="icons-chart-option text-left" ng-repeat="o in opciones" data-color="{{o.color}}"> {{o.titulo}} </div> <div class="icons-chart-base text-right"> {{base.titulo}} </div> <div ng-if="orientacion==\'rows\'"> <div ng-repeat="q in qty" class="icon-chart-svg-container"> <div id="icon-chart-svg-{{q}}" class="icon-chart-svg-container-icon"></div> </div> </div> <div ng-if="orientacion==\'cols\'"> <div ng-repeat="(key,v) in cols" class="icon-chart-svg-container"> <div id="icon-chart-svg-{{v2}}" ng-repeat="(key2,v2) in v.items" class="icon-chart-svg-container-icon"></div> <br class="clear"> </div> </div> </div> </div>'),a.put("views/directives/imageFull.html",'<span ng-show="loading">Cargando...</span> <div class="detalle-frame"> <p class="detalle-frame-title text-left" ng-if="title">{{title}} </p> <i ng-if="nota || fuente" class="detalle-frame-icon glyphicon glyphicon-info-sign" data-container="body" title="{{nota}}" data-toggle="popover" data-placement="bottom" data-content="Fuente: {{fuente}}"> </i> <span ng-show="loading">Cargando...</span> <img ng-hide="loading" ng-src="{{url}}" class="img-responsive"> </div>'),a.put("views/directives/simpleChart.html",'<div class="detalle-frame"> <p class="detalle-frame-title text-left" ng-if="title">{{title}}</p> <i ng-if="nota || fuente" class="detalle-frame-icon glyphicon glyphicon-info-sign" data-container="body" title="{{nota}}" data-toggle="popover" data-placement="bottom" data-content="Fuente: {{fuente}}"> </i> <a ng-if="source && nota || fuente" ng-href="{{source}}" target="_blank"> <i class="detalle-frame-icon-2 glyphicon glyphicon glyphicon-download-alt"> </i> </a> <a ng-if="source && (!nota && !fuente)" ng-href="{{source}}" target="_blank"> <i class="detalle-frame-icon glyphicon glyphicon glyphicon-download-alt"> </i> </a> <span ng-show="loading">Cargando...</span> <div id="{{id}}" ng-init="renderChart()"></div> </div>'),a.put("views/directives/youtubePlayer.html",'<div class="detalle-frame"> <p class="detalle-frame-title text-left" ng-if="title">{{title}} </p> <i ng-if="nota || fuente" class="detalle-frame-icon glyphicon glyphicon-info-sign" data-container="body" title="{{nota}}" data-toggle="popover" data-placement="bottom" data-content="Fuente: {{fuente}}"> </i> <span ng-show="loading">Cargando...</span> <a class="yt-switch" href="javascript:;" ng-click="ytSwitch=true;" ng-hide="ytSwitch" ng-style="{\'background-image\':\'url(\'+ytThumbnail+\')\'}"> <img class="img-responsive" src="images/play.3de9f2a4.png"> </a> <ng-youtube-embed ng-if="ytSwitch" url="url" playauto="true" color="white" disablekb="true" width="100%" height="300px" rel="false" theme="light" modestbranding="1"> </ng-youtube-embed> </div>'),a.put("views/home.html",'<div class="row hidden-device"> <div class="col-sm-3 c-option c-color-humana" data-slug="humana"> <h3 class="text-center">Ciudad a Escala Humana</h3> </div> <div class="col-sm-3 c-option c-color-disfrute" data-slug="disfrute"> <h3 class="text-center">Disfrute y Convivencia</h3> </div> <div class="col-sm-3 c-option c-option-short c-color-creatividad" data-slug="creatividad"> <h3 class="text-center">Creatividad</h3> </div> <div class="col-sm-3 c-option c-option-short c-color-social" data-slug="social"> <h3 class="text-center">Integración social</h3> </div> </div> <div class="row hidden-desktop"> <div class="col-xs-3 c-option c-color-humana"></div> <div class="col-xs-3 c-option c-color-disfrute"></div> <div class="col-xs-3 c-option c-color-creatividad"></div> <div class="col-xs-3 c-option c-color-social"></div> </div> <hr> <div class="row hidden-desktop select-container"> <div class="col-xs-12"> <select ng-change="onChangeCategory()" ng-model="selectedCategory" class="form-control"> <option value="">Elegir categoría</option> <option value="humana">Ciudad a Escala Humana</option> <option value="disfrute">Disfrute y Convivencia</option> <option value="creatividad">Creatividad</option> <option value="social">Integración social</option> </select> </div> <div class="col-xs-12"> <select ng-change="onChangeGroup()" ng-model="selectedGroup" class="form-control"> <option value="home">Ordenar por nombre</option> <option value="date">Ordenar por fecha fin</option> <option value="state">Ordenar por estado</option> <option value="category">Ordenar por categoría</option> </select> </div> </div> <div class="row"> <div class="col-sm-3 hidden-device" ng-class="{\'display\':(selectedGroup==\'home\')}"> <a class="group-btn" ng-click="groupMenu(\'home\')"></a> <p class="btn-checkbox hidden-device" ng-class="{\'selected\':(selectedGroup==\'home\')}">Ordenar por nombre</p> <div id="home_chart"> <h1 class="text-center specialHead" ng-cloak ng-hide="loading"> A &raquo; Z </h1> <p class="text-center" ng-cloak ng-hide="loading">{{data.length}} compromisos</p> <p class="text-center" ng-cloak ng-show="loading">Cargando...</p> </div> <p class="sub text-center">Vista general de los compromisos</p> </div> <div class="col-sm-3 hidden-device" ng-class="{\'display\':(selectedGroup==\'date\')}"> <a class="group-btn" ng-click="groupMenu(\'date\')"></a> <p class="btn-checkbox hidden-device" ng-class="{\'selected\':(selectedGroup==\'date\')}">Ordenar por fecha de cumplimiento</p> <div id="date_chart"> <p class="text-center" ng-cloak ng-show="loading">Cargando...</p> </div> <p class="sub text-center">Cantidad de compromisos por año de finalización</p> </div> <div class="col-sm-3 hidden-device" ng-class="{\'display\':(selectedGroup==\'state\')}"> <a class="group-btn" ng-click="groupMenu(\'state\')"></a> <p class="btn-checkbox hidden-device" ng-class="{\'selected\':(selectedGroup==\'state\')}">Ordenar por estado</p> <div id="state_chart" ng-click="groupMenu(\'state\')"> <p class="text-center" ng-cloak ng-show="loading">Cargando...</p> </div> <p class="sub text-center">Cantidad de compromisos por estado de progreso</p> </div> <div class="col-sm-3 hidden-device" ng-class="{\'display\':(selectedGroup==\'category\')}"> <a class="group-btn" ng-click="groupMenu(\'category\')"></a> <p class="btn-checkbox hidden-device" ng-class="{\'selected\':(selectedGroup==\'category\')}">Ordenar por categoría</p> <div id="category_chart" ng-click="groupMenu(\'category\')"> <p class="text-center" ng-cloak ng-show="loading">Cargando...</p> </div> <p class="sub text-center">Cantidad de compromisos por categoría de pertenencia</p> </div> </div> <p class="text-center" ng-show="loading">Cargando...</p> <div ng-cloak ng-hide="loading"> <div class="row"> <div id="menu_chart"></div> </div> <div id="compromiso-detail" class="row well" ng-cloak ng-show="currentCompromise"> <div class="col-sm-3 hidden-device"> <img ng-src="{{currentCompromise.imagen}}"> </div> <div class="col-sm-6"> <div class="row"> <div class="col-xs-10 col-sm-12"><h2><small>{{currentCompromise.categoria}}</small></h2></div> <div class="col-xs-2 hidden-desktop"><a class="" href="javascript:;" ng-click="closeDetail()">Cerrar</a></div> </div> <h2>{{currentCompromise.titulo}}</h2> <h5>{{currentCompromise.cumplimiento}}</h5> <p> {{currentCompromise.desc}}</p> <button ng-click="redirectParent(currentCompromise.url_interna)" type="button" class="btn btn-xs upper bg-color-{{currentCompromise.slug}} hidden-device">Ver mas sobre el compromiso &#187; </button> </div> <div class="col-sm-3"> <p class="hidden-device text-right"><a class="" href="javascript:;" ng-click="closeDetail()">Cerrar</a></p> <p class="upper"><strong>Estado del Compromiso</strong></p> <div class="progress"> <div class="progress-bar bg-color-{{currentCompromise.slug}}" role="progressbar" ng-style="{ \'width\': currentCompromise.porcentaje_completado + \'%\' }"> <span class="progressbar-w" ng-hide="currentCompromise.porcentaje_completado<50">{{currentCompromise.porcentaje_completado}}% </span> </div> <div class="progress-w" ng-show="!currentCompromise.porcentaje_completado"><p>-</p> </div> <div class="progress-w" ng-show="currentCompromise.porcentaje_completado<50" ng-style="{ \'width\': (100 - currentCompromise.porcentaje_completado) + \'%\' }">{{currentCompromise.porcentaje_completado}}% </div> </div> <p>Cumplimiento: <span class="f-color-{{currentCompromise.slug}}">{{currentCompromise.cumplimiento_label}}</span></p> <div class="col-md-4 center-block"> <button ng-click="redirectParent(currentCompromise.url_interna)" id="singlebutton" name="singlebutton" type="button" class="btn btn-xs upper bg-color-{{currentCompromise.slug}} hidden-desktop center-block">Ver mas sobre el compromiso &#187; </button> </div> </div> </div> <div id="filler"></div> </div>'),
a.put("views/includes/autitos.html",'<icon-chart icono="autosConfig.icono" base="autosConfig.base" opciones="autosConfig.opciones" orientacion="autosConfig.orientacion"></icon-chart>'),a.put("views/includes/bubble.html",'<bubble-chart config="bubbleConfig" container="bubbleId" bubbles="bubbleData"></bubble-chart>'),a.put("views/includes/detail.html",'<div id="compromiso-interna" class="row c-color-{{currentCompromise.slug}} categoria-{{currentCompromise.slug}}"> <div class="icon-svg-container col-sm-1 col-xs-3 compromiso-icon"> </div> <div class="col-sm-3 col-xs-9"> <p><span class="label-header">Categoría:</span></p> <h4 class="f-color-{{currentCompromise.slug}}">{{currentCompromise.categoria}}</h4> </div> <div class="col-sm-4"> <p><span class="label-header">Cumplimiento:</span><span class="f-color-{{currentCompromise.slug}}">{{currentCompromise.cumplimiento_label}}</span></p> <div class="progress"> <div class="progress-bar bg-color-{{currentCompromise.slug}}" role="progressbar" ng-style="{ \'width\': currentCompromise.porcentaje_completado + \'%\' }"> <div class="progressbar-w" ng-show="!currentCompromise.porcentaje_completado"><p></p> </div> <span class="progressbar-w" ng-hide="currentCompromise.porcentaje_completado<50 || !currentCompromise.porcentaje_completado">{{currentCompromise.porcentaje_completado}}% </span> </div> <div class="progress-w" ng-show="currentCompromise.porcentaje_completado<50" ng-style="{ \'width\': (100 - currentCompromise.porcentaje_completado) + \'%\' }">{{currentCompromise.porcentaje_completado}}% </div> </div> </div> <div class="col-sm-4"> <p><span class="label-header">Finalización:</span>{{currentCompromise.cumplimiento}}</p> </div> </div> <div ng-if="currentCompromise.cumplimiento_2" id="compromiso-interna" class="row c-color-{{currentCompromise.slug}} categoria-{{currentCompromise.slug}}"> <div class="icon-svg-container col-sm-1 col-xs-3 compromiso-icon"> </div> <div class="col-sm-3 col-xs-9"> <p><span class="label-header">Categoría:</span></p> <h4 class="f-color-{{currentCompromise.slug}}">{{currentCompromise.categoria}}</h4> </div> <div class="col-sm-4"> <p><span class="label-header">Cumplimiento:</span><span class="f-color-{{currentCompromise.slug}}">{{currentCompromise.cumplimiento_2_label}}</span></p> <div class="progress"> <div class="progress-bar bg-color-{{currentCompromise.slug}}" role="progressbar" ng-style="{ \'width\': currentCompromise.porcentaje_completado_2 + \'%\' }"> <div class="progressbar-w" ng-show="!currentCompromise.porcentaje_completado_2"><p></p> </div> <span class="progressbar-w" ng-hide="currentCompromise.porcentaje_completado_2<50 || !currentCompromise.porcentaje_completado_2">{{currentCompromise.porcentaje_completado_2}}% </span> </div> <div class="progress-w" ng-show="currentCompromise.porcentaje_completado_2<50" ng-style="{ \'width\': (100 - currentCompromise.porcentaje_completado_2) + \'%\' }">{{currentCompromise.porcentaje_completado_2}}% </div> </div> </div> <div class="col-sm-4"> <p><span class="label-header">Comienzo:</span></p> <p><span class="label-header">Finalización:</span>{{currentCompromise.cumplimiento_2}}</p> </div> </div>'),a.put("views/includes/escuelaDetail.html",'<div class="escuela-detail"> <p><strong><span class="label-header">Ubicación: </span></strong></p> <p>{{selectedEscuela.direccion|| "-"}}</p> <p><strong><span class="label-header">Comuna: </span></strong></p> <p>{{selectedEscuela.comuna|| "-"}}</p> <p><strong><span class="label-header">Tipo: </span></strong></p> <p>{{selectedEscuela.tipo|| "-"}}</p> <p><strong><span class="label-header">Observaciones: </span></strong></p> <p>{{selectedEscuela.observaciones || "-"}}</p> </div>'),a.put("views/includes/medicos.html",'<div ng-repeat="(i,m) in medicos"> <p>{{m.status}}:{{m.equipos}}</p> <icon-chart icono="mediConfig[i].icono" base="mediConfig[i].base" items="mediConfig[i].items" opciones="mediConfig[i].opciones" orientacion="mediConfig[i].orientacion"></icon-chart> </div>'),a.put("views/includes/plazaDetail.html",'<div class="row escuela-detail"> <div class="col-md-3"> <p><span class="label-header">Nombre: </span>{{selectedPlaza.nombre}}</p> <p><span ng-show="selectedPlaza.superficie" ng-cloak class="label-header">Superficie: </span>{{selectedPlaza.superficie}}</p> <p><span ng-show="selectedPlaza.tipo" ng-cloak class="label-header">Tipo: </span>{{selectedPlaza.tipo}}</p> </div> <div class="col-md-3"> <p><span class="label-header">Comuna: </span>{{selectedPlaza.comuna}}</p> <p><span class="label-header">Ubicación: </span>{{selectedPlaza.direccion}}</p> </div> </div>'),a.put("views/includes/selector.html",'<p>Viendo año: <select name="options" ng-change="changeOption()" id="options" ng-model="selectedYear" ng-options="opt for opt in selectOptions"> </select> </p>'),a.put("views/includes/selectorPeriodos.html",'<p>Período: <select name="options" ng-change="changeOption()" id="options" ng-model="selectedPeriodo" ng-options="opt.value as opt.label for opt in selectOptions"> </select> </p>'),a.put("views/includes/selectorProvincias.html",'<p>Destacado: <select name="options" ng-change="changeOption()" id="options" ng-model="selectedProv" ng-options="opt for opt in selectOptions"> </select> </p>')}]);