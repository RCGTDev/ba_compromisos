"use strict";angular.module("ngYoutubeEmbed",[]).directive("ngYoutubeEmbed",[function(){return{restrict:"E",template:'<div ng-bind-html="youtubeEmbedFrame"></div>',scope:{url:"=",playauto:"@playauto",autohide:"@autohide",ccloadpolicy:"@ccloadpolicy",color:"@color",controls:"@controls",disablekb:"@disablekb",end:"@end",fs:"@fs",hl:"@hl",ivloadpolicy:"@ivloadpolicy",playlist:"@playlist",playsinline:"@playsinline",rel:"@rel",showinfo:"@showinfo",start:"@start",theme:"@theme",width:"@width",height:"@height"},controller:["$scope","$sce",function(a,b){function c(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,c=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,d=(a.match(c),a.match(b));if(null!==d){var e=d[1];return e}}var d=a.url;if(void 0!==d){if(a.playlistArray=[],void 0!==a.playlist)for(var e=a.playlist.split(","),f=0;f<e.length;f++)a.playlistArray.push(c(e[f]));var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;g="true"===a.playauto?1:0,h="true"===a.autohide?1:0,i="true"===a.ccloadpolicy?1:0,j="white"===a.color?"white":"red",k="false"===a.controls?0:1,l="false"===a.disablekb?0:1,m=a.end,n="false"===a.fs?0:1,o=a.hl,p="false"===a.ivloadpolicy?0:1,q=a.playlistArray,r="true"===a.playsinline?1:0,s="false"===a.rel?0:1,t="false"===a.showinfo?0:1,u=a.start,v=a.theme,w=void 0!==a.width?a.width:"500px",x=void 0!==a.height?a.height:"350px";var y=c(d),z="<iframe width="+w+" height="+x+' src="https://www.youtube.com/embed/'+y+"?autoplay="+g+"&autohide="+h+"&cc_load_policy="+i+"&color="+j+"&controls="+k+"&disablekb="+l+"&end="+m+"&fs="+n+"&hl="+o+"&playlist="+q+"&playsinline="+r+"&rel="+s+"&showinfo="+t+"&start="+u+"&theme="+v+'" frameborder="0" allowfullscreen></iframe>';a.youtubeEmbedFrame=b.trustAsHtml(z)}}]}}]),$.urlParam=function(a,b){var c=new RegExp("[?&]"+b+"=([^&#]*)").exec(a);return null===c?null:c[1]||0},angular.module("compromisosSiteApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngYoutubeEmbed"]).config(["$routeProvider",function(a){a.when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"home"}).when("/c01",{templateUrl:"views/c01.html",controller:"Compromiso01Ctrl",controllerAs:"c01"}).when("/c02",{templateUrl:"views/c02.html",controller:"Compromiso02Ctrl",controllerAs:"c02"}).when("/c03",{templateUrl:"views/c03.html",controller:"Compromiso03Ctrl",controllerAs:"c03"}).when("/c04",{templateUrl:"views/c04.html",controller:"Compromiso04Ctrl",controllerAs:"c04"}).when("/c05",{templateUrl:"views/c05.html",controller:"Compromiso05Ctrl",controllerAs:"c05"}).when("/c07",{templateUrl:"views/c07.html",controller:"Compromiso07Ctrl",controllerAs:"c07"}).otherwise({redirectTo:"/"})}]).service("SlugColorService",function(){this.list={"protección e integración social":"social",convivencia:"convivencia","hábitat y movilidad":"movilidad","ciudad inteligente y sustentable":"smart"},this.colorsBySlug={social:"#fccf2b",convivencia:"#3abaaf",movilidad:"#f58b45",smart:"#7c4194"},this.getCategorySlug=function(a){return this.list[a.toLowerCase()]},this.getColorBySlug=function(a){return a?this.colorsBySlug[a.toLowerCase()]:this.colorsBySlug}}).service("LoadSVGService",function(){this.loadIcon=function(a,b){var c="images/iconos/GCBA-compromisos-icons-"+a+".svg";d3.xml(c,"image/svg+xml",function(a,c){b(document.importNode(c.documentElement,!0))})}}).service("UrlService",function(){this.baseUrl="http://palamago.com.ar/api/",this.urls={home:this.baseUrl+"?source_format=csv&source=https://goo.gl/Cid4QS"},this.getUrlByPage=function(a){return this.urls[a]+"&callback=JSON_CALLBACK"},this.getUrlByCsv=function(a){return this.baseUrl+"?source_format=csv&source="+a+"&callback=JSON_CALLBACK"}}),angular.module("compromisosSiteApp").controller("HomeCtrl",["$scope","$timeout","$http","UrlService","SlugColorService","LoadSVGService",function(a,b,c,d,e,f){function g(a){for(var b=0,c=0;c<z.length;c++){var d=z[c],e=parseInt(a.porcentaje_completado);if(e>=d.from&&e<d.to){b=c;break}}return a.percentageGroup=b,b}function h(b,c,d){a.$apply(function(){a.currentCompromise=b});var e=parseInt(d3.select("#compromiso-detail").style("height").replace("px","")),f=parseInt($(window).height()),g=parseInt(d.clientY);d3.select("#compromiso-detail").style("top",d.clientY+"px");var h=g+e-f;h>0&&d3.select("#filler").style("height",h+"px")}function i(){var b=["x"].concat(a.availableYears);angular.forEach(a.categoriesGroup,function(a){a.years=d3.nest().key(function(a){return a.cumplimiento1}).rollup(function(a){return a.length}).entries(a.values)});var c=[];c.push(b),angular.forEach(a.categoriesGroup,function(b){var d=[];d.push(b.key),angular.forEach(a.availableYears,function(a){for(var c=0,e=0;e<b.years.length;e++){var f=b.years[e];if(a===f.key){c=f.values;break}}d.push(c)}),c.push(d)});var d=d3.max(a.finishedYearsGroup,function(a){return a.values.length}),f=d3.range(0,d+1).map(function(a){return{value:a}});a.charts.date_chart=c3.generate({bindto:"#date_chart",data:{x:"x",columns:c,type:"bar",groups:[a.availableCategories],colors:angular.copy(e.getColorBySlug())},size:{height:220},padding:{top:20,right:20,bottom:20,left:20},legend:{show:!1},axis:{x:{type:"category"},y:{show:!1}},grid:{y:{lines:f}}})}function j(){var b=[];angular.forEach(a.availableCategories,function(a){b.push([a,1,1,1,1,1])});var c=4,d=d3.range(0,c+1).map(function(a){return{value:a}});a.charts.home_chart=c3.generate({bindto:"#home_chart",data:{columns:b,type:"bar",groups:[a.availableCategories],colors:angular.copy(e.getColorBySlug())},size:{height:220},padding:{top:30,right:30,bottom:30,left:30},legend:{show:!1},axis:{x:{type:"category",show:!1},y:{show:!1,padding:{top:0,bottom:1}}},grid:{y:{lines:d}}})}function k(){var b=["x","0-25%","25-50%","50-75%","75-100%"];angular.forEach(a.categoriesGroup,function(a){a.percentages=d3.nest().key(function(a){return a.percentageGroup}).rollup(function(a){return a.length}).entries(a.values)});var c=[];c.push(b),angular.forEach(a.categoriesGroup,function(a){var b=[];b.push(a.key),angular.forEach(z,function(c,d){for(var e=0,f=0;f<a.percentages.length;f++){var g=a.percentages[f];if(d===parseInt(g.key)){e=g.values;break}}b.push(e)}),c.push(b)});var d=d3.max(a.finishedPercentageGroup,function(a){return a.values.length}),f=d3.range(0,d+1).map(function(a){return{value:a}});a.charts.state_chart=c3.generate({bindto:"#state_chart",data:{x:"x",columns:c,type:"bar",groups:[a.availableCategories],colors:angular.copy(e.getColorBySlug())},size:{height:220},padding:{top:20,right:20,bottom:20,left:20},legend:{show:!1},axis:{x:{type:"category"},y:{max:10,show:!1,padding:{top:0,bottom:0}}},grid:{y:{lines:f}}})}function l(){m(e.getColorBySlug())}function m(b){a.charts.state_chart.data.colors(b),a.charts.date_chart.data.colors(b),a.charts.home_chart.data.colors(b),angular.forEach(b,function(a,b){d3.selectAll(".leaf."+b+" circle").style("fill",a)})}function n(a){var b={social:"#e6e6e6",convivencia:"#e6e6e6",movilidad:"#e6e6e6",smart:"#e6e6e6"};b[a]=e.getColorBySlug(a),m(b)}function o(){var b=220,c=($("#category_chart").width()-b)/2;$("#category_chart").width()<b&&(b=$("#category_chart").width(),c=0);var d=d3.layout.pack().sort(null).size([b,b]).value(function(a){return parseInt(a.porcentaje_completado)});if(!a.charts.category_chart){a.charts.category_chart={},a.charts.category_chart.svg=d3.select("#category_chart").append("svg").attr("class","bubble-container").attr("width",$("#category_chart").width()).attr("height",b),a.charts.category_chart.mainGroup=a.charts.category_chart.svg.append("g").classed("main",!0),a.charts.category_chart.data={name:"categories",children:[]};for(var f=0;f<a.categoriesGroup.length;f++){var g=a.categoriesGroup[f];a.charts.category_chart.data.children.push({name:g.key,children:g.values})}}a.charts.category_chart.svg.attr("width",$("#category_chart").width()),a.charts.category_chart.mainGroup.attr("transform",function(){return"translate("+c+",0)"});var h=a.charts.category_chart.mainGroup.datum(a.charts.category_chart.data).selectAll(".node").data(d.nodes);h.enter().append("g").attr("class",function(a){var b=a.children?"node":"leaf node",c=a.slug?a.slug:a.name;return b+" "+c}).each(function(){d3.select(this).append("circle").filter(function(a){return"categories"!==a.name}).style("fill",function(a){return e.getColorBySlug(a.slug)})}),h.attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),h.selectAll("circle").attr("r",function(a){return a.r})}function p(){function b(){a.charts.menu_chart.svg.transition().duration(x).attr("width",v).attr("height",w)}function c(){v=$(window).width(),y=768>v,A=0;var c=d(a.charts.menu_chart.items_group.selectAll("g.compromiso-item"),0);w=c*o,b(),l([])}function d(a,b,c){b+=y&&c?o:0,A=y?0:A;var d=Math.floor((v-A)/o),e=0,f=0,g=(v-A-d*o)/2;return a.transition().duration(x).attr("transform",function(c,h){var i=e*o+g+A,j=f*o+b;return d-1>e?e++:a[0].length!==h+1&&(e=0,f++),"translate("+i+","+j+")"}),f+1+(y&&c?1:0)}function i(){v=$(window).width(),y=768>v;var c=0;A=v/3;var e=[];angular.forEach(a.finishedPercentageGroup,function(b){e.push({title:z[b.key].from+"% - "+z[b.key].to+"%",rows:c}),c+=d(a.charts.menu_chart.items_group.selectAll("g.avance-"+b.key),c*o,!0)}),w=c*o,b(),l(e)}function j(){v=$(window).width(),y=768>v;var c=0;A=v/3;var f=[];angular.forEach(a.categoriesGroupText,function(b){f.push({title:b.key,rows:c}),c+=d(a.charts.menu_chart.items_group.selectAll("g.categoria-"+e.getCategorySlug(b.key)),c*o,!0)}),w=c*o,b(),l(f)}function k(){v=$(window).width(),y=768>v;var c=0;A=v/3;var e=[];angular.forEach(a.finishedYearsGroup,function(b){e.push({title:b.key,rows:c}),c+=d(a.charts.menu_chart.items_group.selectAll("g.cumplimiento-"+b.key),c*o,!0)}),w=c*o,b(),l(e)}function l(b){a.charts.menu_chart.labels_group.selectAll("*").remove();var c=a.charts.menu_chart.labels_group.selectAll(".label-group").data(b);c.enter().append("g").classed("label-group",!0).each(function(a){var b=d3.select(this);b.append("rect").classed("label-group-shape",!0).classed("shape",!0).attr("height",o).attr("width",y?v:v/3).attr("fill","none"),b.append("text").classed("label-group-text",!0).classed("wrap",!0).attr("text-anchor","start").attr("opacity",1).text(function(a){return a.title}),b.attr("transform",function(){return"translate(0,"+a.rows*o+")"});var c=b.select("text");d3plus.textwrap().container(c).shape("square").align("left").valign("middle").padding(3).draw()})}function m(){var b={width:o,height:o/3};d3plus.textwrap().config(b),a.charts.menu_chart.items_group.selectAll("g.compromiso-item").data(B).enter().append("g").attr("class",function(a){var b=[];return b.push("cumplimiento-"+a.cumplimiento1),b.push("categoria-"+a.slug),b.push("categoria-unselected"),b.push("avance-"+g(a)),b.join(" ")}).classed("compromiso-item",!0).attr("id",function(a){return"c"+a.numero}).each(function(a){var b=d3.select(this);b.append("rect").classed("compromiso-frame",!0).attr("x",0).attr("y",0).attr("height",o).attr("width",o).attr("fill","white"),b.append("rect").classed("compromiso-label-shape",!0).classed("shape",!0).attr("x",p).attr("y",o/2).attr("height",o/2-p).attr("width",o-2*p).attr("fill","none"),b.append("text").classed("compromiso-label",!0).classed("wrap",!0).attr("id","c"+a.numero+"-text").attr("opacity",0).text(function(){return a.titulo}),b.append("g").classed("compromiso-icon",!0).attr("id",function(a){return"c"+a.numero+"-icon"}).attr("transform",function(){var a=o/2-25,b=o/3-25;return"translate("+a+","+b+")"}).each(function(a){var b=this;f.loadIcon(a.icono,function(a){$(a).attr("width",50).attr("height",50).get(0),b.appendChild(a.cloneNode(!0))})}),b.append("rect").classed("compromiso-action",!0).attr("x",p).attr("y",p).attr("height",o-2*p).attr("width",o-2*p).attr("fill","transparent").on("mouseover",function(a){t(a.slug),q(a.numero)}).on("mouseout",function(){u(),r();var a=$(".c-option-selected");a.size()&&s(a.data("slug"))}).on("click",function(){h(a,d3.mouse(this),d3.event)})}).transition().duration(0).attr("transform",function(){var a=v/2-o/2,b=w/2-o/2;return"translate("+a+","+b+")"}).each("end",function(a){var b=d3.select("text#c"+a.numero+"-text");d3plus.textwrap().container(b).shape("square").align("center").valign("top").padding(3).draw(),b.transition().attr("opacity",1)})}function n(){m(),a.charts.menu_chart.api={group:function(a){switch(a){case"home":c();break;case"date":k();break;case"category":j();break;case"state":i()}}},setTimeout(function(){a.charts.menu_chart.api.group(a.selectedGroup)},1e3)}var o=150,p=5,v=$(window).width(),w=500,x=500,y=768>v,A=v/3,B=angular.copy(a.data);a.charts.menu_chart||(a.charts.menu_chart={},a.charts.menu_chart.svg=d3.select("#menu_chart").append("svg").attr("width",v).attr("height",w).attr("class","menu_chart"),a.charts.menu_chart.items_group=a.charts.menu_chart.svg.append("g").classed("items-container",!0),a.charts.menu_chart.labels_group=a.charts.menu_chart.svg.append("g").classed("labels-container",!0)),n()}function q(a){$(".compromiso-item").addClass("categoria-unselected"),$(".compromiso-item#c"+a).removeClass("categoria-unselected")}function r(){$(".compromiso-item").addClass("categoria-unselected")}function s(a){$(".compromiso-item").addClass("categoria-unselected"),$(".compromiso-item.categoria-"+a).removeClass("categoria-unselected")}function t(a){$(".c-option").removeClass("c-option-hover"),$('.c-option[data-slug="'+a+'"]').addClass("c-option-hover")}function u(){$(".c-option").removeClass("c-option-hover")}function v(a){$(".c-option").removeClass("c-option-selected"),$('.c-option[data-slug="'+a+'"]').addClass("c-option-selected")}function w(){$(".c-option").removeClass("c-option-selected")}function x(){$(".c-option").mouseover(function(){var a=$(this).data("slug");a&&(t(a),s(a),n(a))}).mouseout(function(){var a=$(this).data("slug");if(a){var b=$(".c-option-selected");b.size()?(s(b.data("slug")),n(b.data("slug"))):(r(),l()),u()}}).click(function(){var b=$(this).data("slug");b&&($(this).hasClass("c-option-selected")?(w(),l()):(v(b),s(b),n(b),a.$apply(function(){a.selectedCategory=b})))})}a.pymChild=new pym.Child({polling:1e3}),a.pymChild.sendHeight(),a.data=[],a.loading=!0,a.charts={},a.selectedGroup="home";var y=d.getUrlByPage("home");c.jsonp(y).success(function(b){a.data=b.map(function(a){return a.slug=e.getCategorySlug(a.categoria),a}),a.loading=!1,a.groupData(),a.renderCharts()}),a.groupData=function(){a.categoriesGroup=d3.nest().key(function(a){return a.slug}).entries(a.data),a.categoriesGroupText=d3.nest().key(function(a){return a.categoria}).entries(a.data),a.availableCategories=[],angular.forEach(a.categoriesGroup,function(b){a.availableCategories.push(b.key)}),angular.forEach(a.categoriesGroup,function(a){a.finishedYearsGroup=d3.nest().key(function(a){return a.cumplimiento1}).rollup(function(a){return a.length}).entries(a.values)}),a.finishedYearsGroup=d3.nest().key(function(a){return a.cumplimiento1}).entries(a.data),angular.forEach(a.finishedYearsGroup,function(a){a.categoryGroup=d3.nest().key(function(a){return e.getCategorySlug(a.categoria)}).rollup(function(a){return a.length}).entries(a.values)}),a.availableYears=[],angular.forEach(a.finishedYearsGroup,function(b){a.availableYears.push(b.key)}),a.availableYears=a.availableYears.sort(),a.finishedPercentageGroup=d3.nest().key(function(a){return g(a)}).entries(a.data)};var z=[];z.push({from:0,to:25}),z.push({from:25,to:50}),z.push({from:50,to:75}),z.push({from:75,to:100}),a.renderCharts=function(){x(),j(),i(),k(),o(),p()},a.redirectParent=function(b){a.pymChild.navigateParentTo(b)},a.closeDetail=function(){a.currentCompromise=null,d3.select("#filler").style("height","0px")},a.onChangeCategory=function(){""!==a.selectedCategory?(v(a.selectedCategory),s(a.selectedCategory),n(a.selectedCategory)):(w(),l())},a.onChangeGroup=function(){a.groupMenu(a.selectedGroup)},a.groupMenu=function(b){a.selectedGroup=b,a.charts.menu_chart.api.group(a.selectedGroup)};var A;$(window).resize(function(){clearTimeout(A),A=setTimeout(function(){a.charts.menu_chart&&a.charts.menu_chart.api.group(a.selectedGroup),a.charts.category_chart&&o()},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso01Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 1===parseInt(a.numero)}),b.currentCompromise.slug=d.getCategorySlug(b.currentCompromise.categoria),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$("#icon-svg-container").html(a.cloneNode(!0))}),console.log(b.currentCompromise)});var i="#ccc";b.prepareData1=function(a){return console.log(1,a),a},b.completeConfig1=function(a){return angular.merge(a,{data:{types:{baches_resueltos:"line",meta:"area"},keys:{value:["baches_resueltos","meta"],x:"mes"},colors:{meta:i,baches_resueltos:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{x:{type:"category",show:!1},y:{show:!1}},legend:{show:!0}})},b.prepareData2=function(a){return console.log(2,a),a},b.completeConfig2=function(a){return angular.merge(a,{data:{types:{dias:"line",meta:"area"},keys:{value:["dias","meta"],x:"mes"},colors:{meta:i,dias:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{x:{type:"category",show:!1},y:{show:!1}},legend:{show:!0}})},b.completeConfig3=function(a){return angular.merge(a,{data:{keys:{value:["baches"],x:"ano"}},axis:{x:{label:"Año"},y:{label:"Baches arreglados"}}})},b.prepareData3=function(a){return a}}]),angular.module("compromisosSiteApp").controller("Compromiso02Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 2===parseInt(a.numero)}),b.currentCompromise.slug=d.getCategorySlug(b.currentCompromise.categoria),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$("#icon-svg-container").html(a.cloneNode(!0))}),console.log(b.currentCompromise)}),b.completeConfig=function(a){return console.log("pasa complete config"),angular.merge(a,{data:{keys:{value:["baches"],x:"ano"}},axis:{x:{label:"Año"},y:{label:"Baches arreglados"}}})},b.prepareData=function(a){return a}}]),angular.module("compromisosSiteApp").controller("Compromiso03Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 3===parseInt(a.numero)}),b.currentCompromise.slug=d.getCategorySlug(b.currentCompromise.categoria),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$("#icon-svg-container").html(a.cloneNode(!0))}),console.log(b.currentCompromise)}),b.youtubeLink="https://www.youtube.com/watch?v=AoZ98-TwqM4",b.prepareData=function(a){return a},b.completeConfig=function(a){return angular.merge(a,{data:{types:{adultos_incluidos_acumulado:"area",meta_acumulado:"area"},keys:{value:["adultos_incluidos_acumulado","meta_acumulado"],x:"mes"},colors:{meta_acumulado:b.currentCompromise.secondColor,adultos_incluidos_acumulado:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{x:{type:"category",show:!1},y:{show:!1}},legend:{show:!1}})},b.chartReady=function(a){},b.prepareData2=function(a){return a},b.completeConfig2=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["uso_computadora","uso_internet"],x:"edad"},colors:{uso_computadora:b.currentCompromise.color,uso_internet:b.currentCompromise.secondColor}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{x:{type:"category",show:!1},y:{show:!1}},legend:{}})},b.chartReady2=function(a){},b.prepareData3=function(a){return a},b.completeConfig3=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["poblacion_mayor_o_igual_65"],x:"provincia"},colors:{poblacion_mayor_o_igual_65:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:100},axis:{rotated:!0,x:{type:"category",show:!0},y:{show:!1}},legend:{show:!1}})},b.chartReady3=function(a){};var i;$(window).resize(function(){clearTimeout(i),i=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso04Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 4===parseInt(a.numero)}),b.currentCompromise.slug=d.getCategorySlug(b.currentCompromise.categoria),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$("#icon-svg-container").html(a.cloneNode(!0))}),console.log(b.currentCompromise)}),b.youtubeLink="https://www.youtube.com/watch?v=AoZ98-TwqM4",b.prepareData=function(a){return a},b.completeConfig=function(a){return angular.merge(a,{data:{keys:{value:["muertes"],x:"anio"},names:{muertes:"Medición"},colors:{muertes:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{show:!0},y:{show:!0}},legend:{show:!0}})},b.chartReady=function(a){},b.prepareData2=function(a){return a},b.completeConfig2=function(a){return angular.merge(a,{data:{keys:{value:["lesionados"],x:"anio"},names:{lesionados:"Medición"},colors:{lesionados:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{show:!0},y:{show:!0}},legend:{show:!0}})},b.chartReady2=function(a){},b.prepareData3=function(a){return a},b.completeConfig3=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["poblacion_mayor_o_igual_65"],x:"provincia"},colors:{poblacion_mayor_o_igual_65:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:100},axis:{rotated:!0,x:{type:"category",show:!0},y:{show:!1}},legend:{show:!1}})},b.chartReady3=function(a){},b.prepareData4=function(a){return a},b.completeConfig4=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["buenos_aires","seattle","nueva_york"],x:"anio"},colors:{buenos_aires:b.currentCompromise.color,seattle:b.currentCompromise.color,nueva_york:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{rotated:!0,x:{type:"category",show:!0},y:{show:!1}},legend:{show:!1}})},b.chartReady4=function(a){};var i;$(window).resize(function(){clearTimeout(i),i=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso05Ctrl",["UrlService","$compile","$templateRequest","$scope","$http","SlugColorService","LoadSVGService","$sce",function(a,b,c,d,e,f,g,h){function i(){var a=$("#"+p).width(),e=300,f=a/q.length,g=.1*f,i=d3.scale.linear().domain([0,100]).range([0,e-f-f/2]);o||(o={},o.svg=d3.select("#"+p).append("svg").classed("vertical-bar-svg",!0),o.detail=d3.select("#"+p).append("div").attr("id","vertical-bar-detail"),o.main=o.svg.append("g").classed("vertical-bar-g-main",!0)),o.svg.attr("height",e).attr("width",a),o.bars=o.main.selectAll(".vertical-bar-g").data(q),o.bars.enter().append("g").attr("id",function(a,b){return"vertical-bar-g-"+b}).classed("vertical-bar-g",!0).classed("categoria-"+d.currentCompromise.slug,!0).classed("categoria-unselected",!0).each(function(a,g){var i=d3.select(this);i.datum({ix:g}).append("rect").classed("vertical-bar-bg",!0).attr("height",e);var j=$(m).attr("width",f).attr("height",f).get(0);i.append("g").classed("vertical-bar-icon",!0).each(function(){this.appendChild(j.cloneNode(!0))}),i.append("rect").classed("vertical-bar-fill",!0).attr("fill","#ccc"),i.append("rect").classed("vertical-bar-value",!0).classed("fill-color",!0).datum(a).attr("fill",d.currentCompromise.color),i.append("text").classed("vertical-bar-text",!0).attr("text-anchor","middle").text(function(){return a.avance?a.avance+"%":"0%"}),i.datum({ix:g}).append("rect").classed("vertical-bar-event",!0).classed("handy",!0).attr("x",1).attr("y",1).attr("height",e-2).attr("stroke","#fff").attr("stroke-width",2).attr("fill","transparent").on("mouseover",function(){}).on("mouseout",function(){}).on("click",function(a){d.selectedPlaza=q[a.ix],d3.selectAll(".vertical-bar-g").classed("categoria-unselected",!0).classed("categoria-selected",!1),d3.selectAll(".vertical-bar-g#vertical-bar-g-"+a.ix).classed("categoria-unselected",!1).classed("categoria-selected",!0);var e=h.getTrustedResourceUrl("views/includes/plazaDetail.html");c(e).then(function(a){b($("#vertical-bar-detail").html(a).contents())(d)},function(){})})}),o.bars.attr("transform",function(a,b){return"translate("+b*f+",0)"}),o.bars.selectAll("text.vertical-bar-text").attr("x",f/2).attr("y",e-f/4+g/2),o.bars.selectAll("rect.vertical-bar-bg").attr("width",f),o.bars.selectAll("rect.vertical-bar-event").attr("width",f-2),o.bars.selectAll("g.vertical-bar-icon svg").attr("width",f).attr("height",f),o.bars.selectAll("rect.vertical-bar-fill").attr("height",e-f-f/2).attr("y",f).attr("x",g).attr("width",f-2*g),o.bars.selectAll("rect.vertical-bar-value").attr("height",function(a){return i(parseInt(a.avance))}).attr("y",function(a){return f+(e-f-f/2)-i(parseInt(a.avance))}).attr("x",g).attr("width",f-2*g)}var j=a.getUrlByPage("home"),k=new pym.Child({polling:1e3});k.sendHeight();var l=window._;d.loading=!0;var m,n;e.jsonp(j).success(function(a){d.currentCompromise=d.data=l.find(a,function(a){return 5===parseInt(a.numero)}),d.currentCompromise.slug=f.getCategorySlug(d.currentCompromise.categoria),d.currentCompromise.color=f.getColorBySlug(d.currentCompromise.slug),d.currentCompromise.porcentaje_completado=parseInt(d.currentCompromise.porcentaje_completado),d.loading=!1,g.loadIcon(d.currentCompromise.icono,function(a){m=a,$("#icon-svg-container").html(a.cloneNode(!0))})});var o,p,q;d.dataLoaded=function(a,b){p=a,q=b,setTimeout(function(){i()},1e3)},d.prepareData2=function(a){var b={name:"total",children:[]};return l.each(a,function(a){b.children.push({name:a.tipo,value:parseInt(a.hectareas),children:[]})}),b},d.completeConfig2=function(a){return angular.merge(a,{valueField:"hectareas",color:d.currentCompromise.color})},d.chartReady2=function(a){},d.prepareData3=function(a){return n=a,a},d.completeConfig3=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["metros_habitante"],x:"ciudad"},colors:{metros_habitante:d.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{rotated:!0,x:{type:"category",show:!1},y:{show:!1}},legend:{show:!1},bar:{width:{ratio:.8}},grid:{y:{lines:[{value:9,text:"Mínimo recomendado por la OMS: 9m²",position:"middle"}]}}})},d.chartReady3=function(a,b){var c=d3.select(".c3-texts");d3.selectAll("#"+b+" .c3-event-rect").each(function(a){var b=n[a.index],d=d3.select(this),e=parseInt(d.attr("height")/2);c.append("text").attr("alignment-baseline","middle").classed("custom-c3-text",!0).attr("x",parseInt(d.attr("x"))+10).attr("y",parseInt(d.attr("y"))+e).text(b.ciudad+": "+b.metros_habitante+" m²")})};var r;$(window).resize(function(){clearTimeout(r),r=setTimeout(function(){o&&i()},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso07Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService","$sce","$compile","$templateRequest",function(a,b,c,d,e,f,g,h){var i=a.getUrlByPage("home"),j=new pym.Child({polling:1e3});j.sendHeight();var k,l=window._;b.loading=!0,c.jsonp(i).success(function(a){b.currentCompromise=b.data=l.find(a,function(a){return 7===parseInt(a.numero)}),b.currentCompromise.slug=d.getCategorySlug(b.currentCompromise.categoria),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$("#icon-svg-container").html(a.cloneNode(!0))})}),b.prepareData1=function(a){function b(a){return a?(a=a.split(":"),60*+a[0]+ +a[1]):null}return l.each(a,function(a){a.mes_date=a.mes+"-01",a.linea_a_sec=b(a.linea_a),a.linea_b_sec=b(a.linea_b),a.linea_c_sec=b(a.linea_c),a.linea_d_sec=b(a.linea_d),a.linea_e_sec=b(a.linea_e),a.linea_h_sec=b(a.linea_h)}),a},b.completeConfig1=function(a){return angular.merge(a,{data:{keys:{value:["linea_a_sec","linea_b_sec","linea_c_sec","linea_d_sec","linea_e_sec","linea_h_sec"],x:"mes_date"},names:{linea_a_sec:"Línea A",linea_b_sec:"Línea B",linea_c_sec:"Línea C",linea_d_sec:"Línea D",linea_e_sec:"Línea E",linea_h_sec:"Línea H"},type:"spline"},size:{height:300},padding:{top:0,right:40,bottom:10,left:40},point:{show:!1},axis:{x:{type:"timeseries",show:!0,tick:{format:"%Y-%m"}},y:{show:!0,tick:{format:function(a){var b=Math.floor(a/60),c=a-60*b;return c=1===(""+c).length?"0"+c:c,b+":"+c}}}},legend:{show:!0}})},b.chartReady1=function(a){},b.prepareData3=function(a){return l.each(a,function(a){a.mes_date=a.mes+"-01",a.linea_a=parseInt(a.linea_a),a.linea_b=parseInt(a.linea_b),a.linea_c=parseInt(a.linea_c),a.linea_d=parseInt(a.linea_d),a.linea_e=parseInt(a.linea_e),a.linea_h=parseInt(a.linea_h),a.anio=parseInt(a.anio)}),b.data3=a,b.selectedYear=2015,b.selectOptions=l.map(l.groupBy(a,"anio"),function(a,b){return parseInt(b)}),b.getFilteredData()},b.changeOption=function(){k.load(angular.merge(b.dataConfig,{json:b.getFilteredData()}))},b.getFilteredData=function(){return l.filter(b.data3,{anio:b.selectedYear})},b.completeConfig3=function(a){return b.dataConfig={keys:{value:["linea_a","linea_b","linea_c","linea_d","linea_e","linea_h"],x:"mes_date"},names:{linea_a:"Línea A",linea_b:"Línea B",linea_c:"Línea C",linea_d:"Línea D",linea_e:"Línea E",linea_h:"Línea H"},type:"spline"},angular.merge(a,{data:b.dataConfig,size:{height:300},point:{show:!1},padding:{top:0,right:40,bottom:10,left:60},axis:{x:{type:"timeseries",show:!0,tick:{format:"%Y-%m"}},y:{show:!0,tick:{format:function(a){return(a+"").replace("000000","m")}}}},legend:{show:!0}})},b.chartReady3=function(a,c){k=a,$("<div id='selector-container'></div>").insertBefore("#"+c);var d=f.getTrustedResourceUrl("views/includes/selector.html");h(d).then(function(a){g($("#selector-container").html(a).contents())(b)},function(){})};var m;$(window).resize(function(){clearTimeout(m),m=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").directive("smartContent",function(){return{restrict:"E",replace:!0,scope:{url:"=url",title:"=titulo",nota:"=nota",fuente:"=fuente",prepareCallback:"=prepareCallback",configCallback:"=configCallback",readyCallback:"=readyCallback",simpleLoadCallback:"=simpleLoadCallback",template:"=template"},controller:["$scope","$timeout","UrlService","$http",function(a,b,c,d){function e(a){return null!==a.match(/\b\w*(youtu)\w*\b/)}function f(a){return null!==a.match(/\.(jpeg|jpg|gif|png)$/)}function g(a){return null!==a.match(/\b\w*(youtube)\w*\b/)?$.urlParam(a,"v"):null!==a.match(/\b\w*(youtu\.be)\w*\b/)?a.split("/")[3]:void 0}function h(){a.resizeFunction=h;var b=300,c=($("#"+a.id).width()-b)/2;$("#"+a.id).width()<b&&(b=$("#"+a.id).width(),
c=0);var d=d3.layout.pack().sort(null).size([b,b]).value(function(a){return parseInt(a.value)});a.chart||(a.chart={},a.chart.svg=d3.select("#"+a.id).append("svg").attr("class","bubble-container").attr("width",$("#"+a.id).width()).attr("height",b),a.chart.mainGroup=a.chart.svg.append("g").classed("main",!0)),a.chart.svg.attr("width",$("#"+a.id).width()),a.chart.mainGroup.attr("transform",function(){return"translate("+c+",0)"});var e=a.chart.mainGroup.datum(a.data).selectAll(".node").data(d.nodes);e.enter().append("g").attr("class",function(a){var b=a.children?"node":"leaf node";return b}).each(function(){d3.select(this).append("circle").filter(function(a){return"total"!==a.name}).style("fill",function(){return a.config.color}),d3.select(this).append("text").attr("dy",".3em").style({"text-anchor":"middle",fill:"white","font-family":"Helvetica Neue, Helvetica, Arial, san-serif","font-size":"12px"}).text(function(a){return a.name})}),e.attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),e.selectAll("circle").attr("r",function(a){return a.r}),a.readyCallback&&a.readyCallback(a.chart,a.id)}a.loading=!0,a.id="content-"+Math.floor(1e4*Math.random()),a.getTemplateUrl=function(){if(e(a.url)){a.loading=!1,a.ytSwitch=!1;var b=g(a.url);return a.ytThumbnail="http://img.youtube.com/vi/{{VIDEO_ID}}/maxresdefault.jpg".replace("{{VIDEO_ID}}",b),"views/directives/youtubePlayer.html"}return f(a.url)?(a.loading=!1,"views/directives/imageFull.html"):a.template?a.template:"views/directives/simpleChart.html"},a.chartConfigDefaults={data:{json:[]},padding:{top:0,right:50,bottom:0,left:50},onrendered:function(){}},a.bubbleConfigDefaults={valueField:"value",color:"red"},a.renderBubble=function(){var e=c.getUrlByCsv(a.url);a.chartConfigDefaults.bindto="#"+a.id,d.jsonp(e).success(function(c){a.prepareCallback?a.data=a.prepareCallback(c):a.data=c,a.configCallback&&(a.config=a.configCallback(a.bubbleConfigDefaults)),b(function(){a.chart=!1,h(),a.bindFinalEvents()},500)})},a.renderChart=function(){var e=c.getUrlByCsv(a.url);a.chartConfigDefaults.bindto="#"+a.id,d.jsonp(e).success(function(c){a.prepareCallback?a.chartConfigDefaults.data.json=a.prepareCallback(c):a.chartConfigDefaults.data.json=c,a.configCallback&&(a.chartConfigDefaults=a.configCallback(a.chartConfigDefaults)),b(function(){a.chart=c3.generate(a.chartConfigDefaults),a.bindFinalEvents(),a.readyCallback&&a.readyCallback(a.chart,a.id)},500)})},a.simpleLoad=function(){var b=c.getUrlByCsv(a.url);d.jsonp(b).success(function(b){a.simpleLoadCallback&&(a.simpleLoadCallback(a.id,b),a.bindFinalEvents())})},a.bindFinalEvents=function(){a.loading=!1,$('[data-toggle="popover"]').popover()};var i;$(window).resize(function(){clearTimeout(i),i=setTimeout(function(){a.resizeFunction&&a.resizeFunction()},500)})}],template:'<ng-include src="getTemplateUrl()"/>'}}),angular.module("compromisosSiteApp").run(["$templateCache",function(a){a.put("views/c01.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> <div ng-if="data.detalle_3" class="col-md-6 text-center"> <smart-content url="data.detalle_3" prepare-callback="prepareData3" config-callback="completeConfig3" ready-callback="chartReady3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> <div ng-if="data.detalle_4" class="col-md-6 text-center"> <smart-content url="data.detalle_4" titulo="data.detalle_4_nombre" nota="data.detalle_4_nota" fuente="data.detalle_4_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c02.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" template=""></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2"></smart-content> </div> <div ng-if="data.detalle_3" class="col-md-6 text-center"> <smart-content url="data.detalle_3" prepare-callback="prepareData" config-callback="completeConfig" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> <div ng-if="data.detalle_4" class="col-md-6 text-center"> <smart-content url="data.detalle_4"></smart-content> </div> <hr> </div> </div>'),a.put("views/c03.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData" config-callback="completeConfig" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> <div ng-if="data.detalle_3" class="col-md-6 text-center bar-chart-{{currentCompromise.slug}}"> <smart-content url="data.detalle_3" prepare-callback="prepareData3" config-callback="completeConfig3" ready-callback="chartReady3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c04.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData" config-callback="completeConfig" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> <div ng-if="data.detalle_3" class="col-md-6 text-center bar-chart-{{currentCompromise.slug}}"> <smart-content url="data.detalle_3" prepare-callback="prepareData3" config-callback="completeConfig3" ready-callback="chartReady3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> <div ng-if="data.detalle_4" class="col-md-6 text-center bar-chart-{{currentCompromise.slug}}"> <smart-content url="data.detalle_4" prepare-callback="prepareData4" config-callback="completeConfig4" ready-callback="chartReady4" titulo="data.detalle_4_nombre" nota="data.detalle_4_nota" fuente="data.detalle_4_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c05.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-12 text-center"> <smart-content url="data.detalle_1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente" simple-load-callback="dataLoaded" template="\'views/directives/customChart.html\'"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente" template="\'views/directives/bubbleChart.html\'"></smart-content> </div> <div ng-if="data.detalle_3" class="col-md-6 text-center bar-chart-{{currentCompromise.slug}}"> <smart-content url="data.detalle_3" prepare-callback="prepareData3" config-callback="completeConfig3" ready-callback="chartReady3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c07.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_3" class="col-md-12 text-center"> <smart-content url="data.detalle_3" prepare-callback="prepareData3" config-callback="completeConfig3" ready-callback="chartReady3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/directives/bubbleChart.html",'<div class="detalle-frame"> <p class="text-left" ng-if="title">{{title}} <i ng-if="nota || fuente" class="pull-right glyphicon glyphicon-info-sign" data-container="body" title="{{nota}}" data-toggle="popover" data-placement="bottom" data-content="Fuente: {{fuente}}"> </i> </p> <span ng-show="loading">Cargando...</span> <div id="{{id}}" ng-init="renderBubble()"></div> </div>'),a.put("views/directives/customChart.html",'<div class="detalle-frame"> <p class="text-left" ng-if="title">{{title}} <i ng-if="nota || fuente" class="pull-right glyphicon glyphicon-info-sign" data-container="body" title="{{nota}}" data-toggle="popover" data-placement="bottom" data-content="Fuente: {{fuente}} <a>hola</a>"> </i> </p> <span ng-show="loading">Cargando...</span> <div id="{{id}}" ng-init="simpleLoad()"></div> </div>'),a.put("views/directives/imageFull.html",'<span ng-show="loading">Cargando...</span> <img ng-hide="loading" ng-src="{{url}}" class="img-responsive">'),a.put("views/directives/simpleChart.html",'<div class="detalle-frame"> <p class="text-left" ng-if="title">{{title}} <i ng-if="nota || fuente" class="pull-right glyphicon glyphicon-info-sign" data-container="body" title="{{nota}}" data-toggle="popover" data-placement="bottom" data-content="Fuente: {{fuente}}"> </i> </p> <span ng-show="loading">Cargando...</span> <div id="{{id}}" ng-init="renderChart()"></div> </div>'),a.put("views/directives/youtubePlayer.html",'<div class="detalle-frame"> <p class="text-left" ng-if="title">{{title}} <i ng-if="nota || fuente" class="pull-right glyphicon glyphicon-info-sign" data-container="body" title="{{nota}}" data-toggle="popover" data-placement="bottom" data-content="Fuente: {{fuente}}"> </i> </p> <span ng-show="loading">Cargando...</span> <a class="yt-switch" href="javascript:;" ng-click="ytSwitch=true;" ng-hide="ytSwitch" ng-style="{\'background-image\':\'url(\'+ytThumbnail+\')\'}"> <img class="img-responsive" src="images/play.3de9f2a4.png"> </a> <ng-youtube-embed ng-if="ytSwitch" url="url" playauto="true" color="white" disablekb="true" width="100%" height="300px" rel="false" theme="light" modestbranding="1"> </ng-youtube-embed> </div>'),a.put("views/home.html",'<div class="row hidden-device"> <div class="col-sm-3 c-option c-color-smart" data-slug="smart"> <h3 class="text-center">Ciudad inteligente y sustentable</h3> </div> <div class="col-sm-3 c-option c-option-short c-color-convivencia" data-slug="convivencia"> <h3 class="text-center">Convivencia</h3> </div> <div class="col-sm-3 c-option c-option-short c-color-movilidad" data-slug="movilidad"> <h3 class="text-center">Hábitat y movilidad</h3> </div> <div class="col-sm-3 c-option c-color-social" data-slug="social"> <h3 class="text-center">Protección e integración social</h3> </div> </div> <div class="row hidden-desktop"> <div class="col-xs-3 c-option c-color-smart"></div> <div class="col-xs-3 c-option c-color-convivencia"></div> <div class="col-xs-3 c-option c-color-movilidad"></div> <div class="col-xs-3 c-option c-color-social"></div> </div> <div class="row hidden-desktop select-container"> <div class="col-xs-12"> <select ng-change="onChangeCategory()" ng-model="selectedCategory" class="form-control"> <option value="">Elegir categoría</option> <option value="smart">Ciudad inteligente y sustentable</option> <option value="convivencia">Convivencia</option> <option value="movilidad">Hábitat y movilidad</option> <option value="social">Protección e integración social</option> </select> </div> <hr> <div class="col-xs-12"> <select ng-change="onChangeGroup()" ng-model="selectedGroup" class="form-control"> <option value="home">Ordenar por nombre</option> <option value="date">Ordenar por fecha fin</option> <option value="state">Ordenar por estado</option> <option value="category">Ordenar por categoría</option> </select> </div> </div> <hr> <div class="row"> <div class="col-sm-3 hidden-device" ng-class="{\'display\':(selectedGroup==\'home\')}"> <a class="group-btn" ng-click="groupMenu(\'home\')"></a> <p class="btn-checkbox hidden-device" ng-class="{\'selected\':(selectedGroup==\'home\')}">Ordenar por nombre</p> <div id="home_chart"> <p class="text-center" ng-cloak ng-show="loading">Cargando...</p> </div> <small class="text-center">Vista general de los compromisos</small> </div> <div class="col-sm-3 hidden-device" ng-class="{\'display\':(selectedGroup==\'date\')}"> <a class="group-btn" ng-click="groupMenu(\'date\')"></a> <p class="btn-checkbox hidden-device" ng-class="{\'selected\':(selectedGroup==\'date\')}">Ordenar por fecha de fin</p> <div id="date_chart"> <p class="text-center" ng-cloak ng-show="loading">Cargando...</p> </div> <small class="text-center">Cantidad de compromisos por año de finalización</small> </div> <div class="col-sm-3 hidden-device" ng-class="{\'display\':(selectedGroup==\'state\')}"> <a class="group-btn" ng-click="groupMenu(\'state\')"></a> <p class="btn-checkbox hidden-device" ng-class="{\'selected\':(selectedGroup==\'state\')}">Ordenar por estado</p> <div id="state_chart" ng-click="groupMenu(\'state\')"> <p class="text-center" ng-cloak ng-show="loading">Cargando...</p> </div> <small class="text-center">Cantidad de compromisos por estado de progreso</small> </div> <div class="col-sm-3 hidden-device" ng-class="{\'display\':(selectedGroup==\'category\')}"> <a class="group-btn" ng-click="groupMenu(\'category\')"></a> <p class="btn-checkbox hidden-device" ng-class="{\'selected\':(selectedGroup==\'category\')}">Ordenar por categoría</p> <div id="category_chart" ng-click="groupMenu(\'category\')"> <p class="text-center" ng-cloak ng-show="loading">Cargando...</p> </div> <small class="text-center">Cantidad de compromisos por categoría de pertenencia</small> </div> </div> <hr> <p class="text-center" ng-show="loading">Cargando...</p> <div ng-cloak ng-hide="loading"> <div class="row"> <div id="menu_chart"></div> </div> <hr> <div id="compromiso-detail" class="row well" ng-cloak ng-show="currentCompromise"> <div class="col-sm-3 hidden-device"> <img ng-src="{{currentCompromise.imagen}}"> </div> <div class="col-sm-6"> <div class="row"> <div class="col-xs-10 col-sm-12"><h2><small>{{currentCompromise.categoria}}</small></h2></div> <div class="col-xs-2 hidden-desktop"><a class="" ng-click="closeDetail()">(x)</a> </div> </div> <h2>{{currentCompromise.numero}}.{{currentCompromise.titulo}}</h2> <h5>{{currentCompromise.cumplimiento}}</h5> <p> {{currentCompromise.desc}}</p> <button ng-click="redirectParent(currentCompromise.url_interna)" type="button" class="btn btn-xs upper bg-color-{{currentCompromise.slug}} hidden-device">Ver mas sobre el compromiso &#187; </button> </div> <div class="col-sm-3"> <p class="upper"><strong>Estado del Compromiso</strong></p> <p> Como lo medimos:<strong>{{currentCompromise.porcentaje_completado}}</strong> </p> <p> Tiempo Faltante:<strong>{{currentCompromise.porcentaje_completado}} </strong> </p> <div class="progress"> <div class="progress-bar bg-color-{{currentCompromise.slug}}" role="progressbar" ng-style="{ \'width\': currentCompromise.porcentaje_completado + \'%\' }"> <span class="progressbar-w" ng-hide="currentCompromise.porcentaje_completado<50">{{currentCompromise.porcentaje_completado}}% </span> </div> <div class="progress-w" ng-show="currentCompromise.porcentaje_completado<50" ng-style="{ \'width\': (100 - currentCompromise.porcentaje_completado) + \'%\' }">{{currentCompromise.porcentaje_completado}}% </div> </div> <p>Finalizacion:<strong> {{currentCompromise.FechaFinalizacion}} </strong> </p> <div class="col-md-4 center-block"> <button ng-click="redirectParent(currentCompromise.url_interna)" id="singlebutton" name="singlebutton" type="button" class="btn btn-xs upper bg-color-{{currentCompromise.slug}} hidden-desktop center-block">Ver mas sobre el compromiso &#187; </button> </div> <a class="hidden-desktop" ng-click="closeDetail()">Cerrar</a> </div> </div> <div id="filler" class="hidden-desktop"></div> </div> <hr>'),a.put("views/includes/detail.html",'<div id="compromiso-interna" class="row c-color-{{currentCompromise.slug}} categoria-{{currentCompromise.slug}}"> <div id="icon-svg-container" class="col-sm-1 col-xs-3 compromiso-icon"> </div> <div class="col-sm-3 col-xs-9"> <p><span class="label-header">Categoría:</span></p> <h4 class="f-color-{{currentCompromise.slug}}">{{currentCompromise.categoria}}</h4> </div> <div class="col-sm-4"> <p><span class="label-header">Cumplimiento:</span></p> <div class="progress"> <div class="progress-bar bg-color-{{currentCompromise.slug}}" role="progressbar" ng-style="{ \'width\': currentCompromise.porcentaje_completado + \'%\' }"> <span class="progressbar-w" ng-hide="currentCompromise.porcentaje_completado<50">{{currentCompromise.porcentaje_completado}}% </span> </div> <div class="progress-w" ng-show="currentCompromise.porcentaje_completado<50" ng-style="{ \'width\': (100 - currentCompromise.porcentaje_completado) + \'%\' }">{{currentCompromise.porcentaje_completado}}% </div> </div> </div> <div class="col-sm-4"> <p><span class="label-header">Categoría:</span>{{currentCompromise.categoria}}</p> <p><span class="label-header">Finalizacion:</span>{{currentCompromise.cumplimiento1}}</p> </div> </div>'),a.put("views/includes/plazaDetail.html",'<div class="row"> <div class="col-md-3"> <p><span class="label-header">Nombre: </span>{{selectedPlaza.nombre}}</p> <p><span class="label-header">Superficie: </span>{{selectedPlaza.superficie}}</p> </div> <div class="col-md-3"> <p><span class="label-header">Comuna: </span>{{selectedPlaza.comuna}}</p> <p><span class="label-header">Ubicación: </span>{{selectedPlaza.direccion}}</p> </div> </div>'),a.put("views/includes/selector.html",'<p>Viendo año: <select name="options" ng-change="changeOption()" id="options" ng-model="selectedYear" ng-options="opt for opt in selectOptions"> </select> </p>')}]);