"use strict";angular.module("ngYoutubeEmbed",[]).directive("ngYoutubeEmbed",[function(){return{restrict:"E",template:'<div ng-bind-html="youtubeEmbedFrame"></div>',scope:{url:"=",playauto:"@playauto",autohide:"@autohide",ccloadpolicy:"@ccloadpolicy",color:"@color",controls:"@controls",disablekb:"@disablekb",end:"@end",fs:"@fs",hl:"@hl",ivloadpolicy:"@ivloadpolicy",playlist:"@playlist",playsinline:"@playsinline",rel:"@rel",showinfo:"@showinfo",start:"@start",theme:"@theme",width:"@width",height:"@height"},controller:["$scope","$sce",function(a,b){function c(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,c=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,d=(a.match(c),a.match(b));if(null!==d){var e=d[1];return e}}var d=a.url;if(void 0!==d){if(a.playlistArray=[],void 0!==a.playlist)for(var e=a.playlist.split(","),f=0;f<e.length;f++)a.playlistArray.push(c(e[f]));var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;g="true"===a.playauto?1:0,h="true"===a.autohide?1:0,i="true"===a.ccloadpolicy?1:0,j="white"===a.color?"white":"red",k="false"===a.controls?0:1,l="false"===a.disablekb?0:1,m=a.end,n="false"===a.fs?0:1,o=a.hl,p="false"===a.ivloadpolicy?0:1,q=a.playlistArray,r="true"===a.playsinline?1:0,s="false"===a.rel?0:1,t="false"===a.showinfo?0:1,u=a.start,v=a.theme,w=void 0!==a.width?a.width:"500px",x=void 0!==a.height?a.height:"350px";var y=c(d),z="<iframe width="+w+" height="+x+' src="https://www.youtube.com/embed/'+y+"?autoplay="+g+"&autohide="+h+"&cc_load_policy="+i+"&color="+j+"&controls="+k+"&disablekb="+l+"&end="+m+"&fs="+n+"&hl="+o+"&playlist="+q+"&playsinline="+r+"&rel="+s+"&showinfo="+t+"&start="+u+"&theme="+v+'" frameborder="0" allowfullscreen></iframe>';a.youtubeEmbedFrame=b.trustAsHtml(z)}}]}}]),$.urlParam=function(a,b){var c=new RegExp("[?&]"+b+"=([^&#]*)").exec(a);return null===c?null:c[1]||0},angular.module("compromisosSiteApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngYoutubeEmbed"]).config(["$routeProvider",function(a){a.when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"home"}).when("/c01",{templateUrl:"views/c01.html",controller:"Compromiso01Ctrl",controllerAs:"c01"}).when("/c02",{templateUrl:"views/c02.html",controller:"Compromiso02Ctrl",controllerAs:"c02"}).when("/c03",{templateUrl:"views/c03.html",controller:"Compromiso03Ctrl",controllerAs:"c03"}).when("/c04",{templateUrl:"views/c04.html",controller:"Compromiso04Ctrl",controllerAs:"c04"}).when("/c05",{templateUrl:"views/c05.html",controller:"Compromiso05Ctrl",controllerAs:"c05"}).when("/c06",{templateUrl:"views/c06.html",controller:"Compromiso06Ctrl",controllerAs:"c06"}).when("/c07",{templateUrl:"views/c07.html",controller:"Compromiso07Ctrl",controllerAs:"c07"}).when("/c08",{templateUrl:"views/c08.html",controller:"Compromiso08Ctrl",controllerAs:"c08"}).when("/c09",{templateUrl:"views/c09.html",controller:"Compromiso09Ctrl",controllerAs:"c09"}).when("/c10",{templateUrl:"views/c10.html",controller:"Compromiso10Ctrl",controllerAs:"c10"}).when("/c11",{templateUrl:"views/c11.html",controller:"Compromiso11Ctrl",controllerAs:"c11"}).when("/c12",{templateUrl:"views/c12.html",controller:"Compromiso12Ctrl",controllerAs:"c12"}).when("/c13",{templateUrl:"views/c13.html",controller:"Compromiso13Ctrl",controllerAs:"c13"}).when("/c14",{templateUrl:"views/c14.html",controller:"Compromiso14Ctrl",controllerAs:"c14"}).when("/c15",{templateUrl:"views/c15.html",controller:"Compromiso15Ctrl",controllerAs:"c15"}).when("/c16",{templateUrl:"views/c16.html",controller:"Compromiso16Ctrl",controllerAs:"c16"}).when("/c17",{templateUrl:"views/c17.html",controller:"Compromiso17Ctrl",controllerAs:"c17"}).when("/c18",{templateUrl:"views/c18.html",controller:"Compromiso18Ctrl",controllerAs:"c18"}).when("/c19",{templateUrl:"views/c19.html",controller:"Compromiso19Ctrl",controllerAs:"c19"}).when("/c20",{templateUrl:"views/c20.html",controller:"Compromiso20Ctrl",controllerAs:"c20"}).otherwise({redirectTo:"/"})}]).service("SlugColorService",function(){this.colorsBySlug={social:"#c15180",disfrute:"#3abaaf",humana:"#f58b45",creatividad:"#7c4194"},this.getColorBySlug=function(a){return a?this.colorsBySlug[a.toLowerCase()]:this.colorsBySlug}}).service("LoadSVGService",function(){this.loadIcon=function(a,b){var c="images/iconos/GCBA-compromisos-icons-"+a+".svg";d3.xml(c,"image/svg+xml",function(a,c){b(document.importNode(c.documentElement,!0))})}}).service("UrlService",function(){this.baseUrl="http://api.topranking.link/",this.urls={home:this.baseUrl+"?source_format=csv&source=https://goo.gl/Cid4QS"},this.getUrlByPage=function(a){return this.urls[a]+"&callback=JSON_CALLBACK"},this.getUrlByCsv=function(a){return this.baseUrl+"?source_format=csv&source="+a+"&callback=JSON_CALLBACK"}}),angular.module("compromisosSiteApp").controller("HomeCtrl",["$scope","$timeout","$http","UrlService","SlugColorService","LoadSVGService",function(a,b,c,d,e,f){function g(a){for(var b=0,c=0;c<y.length;c++){var d=y[c],e=parseInt(a.porcentaje_completado);if(e>=d.from&&e<d.to){b=c;break}}return a.percentageGroup=b,b}function h(b,c,d){a.$apply(function(){a.currentCompromise=b}),console.log(c);var e=parseInt(d3.select("#compromiso-detail").style("height").replace("px","")),f=parseInt($(window).height()),g=parseInt(d.clientY),h=$("#menu_chart").offset().top,i=(h-$(window).scrollTop(),150*Math.floor((d.clientY-h)/150));console.log(h,d.clientY,i);var j=i+h+145;d3.select("#compromiso-detail").style("top",j+"px");var k=g+e-f;k>0&&d3.select("#filler").style("height",k+"px")}function i(){var b=["x"].concat(a.availableYears);angular.forEach(a.categoriesGroup,function(a){a.years=d3.nest().key(function(a){return a.cumplimiento}).rollup(function(a){return a.length}).entries(a.values)});var c=[];c.push(b),angular.forEach(a.categoriesGroup,function(b){var d=[];d.push(b.key),angular.forEach(a.availableYears,function(a){for(var c=0,e=0;e<b.years.length;e++){var f=b.years[e];if(a===f.key){c=f.values;break}}d.push(c)}),c.push(d)});var d=d3.max(a.finishedYearsGroup,function(a){return a.values.length}),f=d3.range(0,d+1).map(function(a){return{value:a}});a.charts.date_chart=c3.generate({bindto:"#date_chart",data:{x:"x",columns:c,type:"bar",groups:[a.availableCategories],colors:angular.copy(e.getColorBySlug())},bar:{width:45},size:{height:150},padding:{top:0,right:0,bottom:0,left:0},legend:{show:!1},axis:{x:{type:"category"},y:{show:!1}},grid:{y:{lines:f}}})}function j(){var b=["x","0-25%","25-50%","50-75%","75-100%"];angular.forEach(a.categoriesGroup,function(a){a.percentages=d3.nest().key(function(a){return a.percentageGroup}).rollup(function(a){return a.length}).entries(a.values)});var c=[];c.push(b),angular.forEach(a.categoriesGroup,function(a){var b=[];b.push(a.key),angular.forEach(y,function(c,d){for(var e=0,f=0;f<a.percentages.length;f++){var g=a.percentages[f];if(d===parseInt(g.key)){e=g.values;break}}b.push(e)}),c.push(b)});var d=d3.max(a.finishedPercentageGroup,function(a){return a.values.length}),f=d3.range(0,d+1).map(function(a){return{value:a}});a.charts.state_chart=c3.generate({bindto:"#state_chart",data:{x:"x",columns:c,type:"bar",groups:[a.availableCategories],colors:angular.copy(e.getColorBySlug())},bar:{width:45},size:{height:150},padding:{top:0,right:0,bottom:0,left:0},legend:{show:!1},axis:{x:{type:"category"},y:{max:10,show:!1,padding:{top:0,bottom:0}}},grid:{y:{lines:f}}})}function k(){l(e.getColorBySlug())}function l(b){a.charts.state_chart.data.colors(b),a.charts.date_chart.data.colors(b),a.charts.home_chart.data.colors(b),angular.forEach(b,function(a,b){d3.selectAll(".leaf."+b+" circle").style("fill",a)})}function m(a){var b={social:"#e6e6e6",disfrute:"#e6e6e6",creatividad:"#e6e6e6",humana:"#e6e6e6"};b[a]=e.getColorBySlug(a),l(b)}function n(){var b=150,c=($("#category_chart").width()-b)/2;$("#category_chart").width()<b&&(b=$("#category_chart").width(),c=0);var d=d3.layout.pack().sort(null).size([b,b]).value(function(a){return parseInt(a.porcentaje_completado)});if(!a.charts.category_chart){a.charts.category_chart={},a.charts.category_chart.svg=d3.select("#category_chart").append("svg").attr("class","bubble-container").attr("width",$("#category_chart").width()).attr("height",b),a.charts.category_chart.mainGroup=a.charts.category_chart.svg.append("g").classed("main",!0),a.charts.category_chart.data={name:"categories",children:[]};for(var f=0;f<a.categoriesGroup.length;f++){var g=a.categoriesGroup[f];a.charts.category_chart.data.children.push({name:g.key,children:g.values})}}a.charts.category_chart.svg.attr("width",$("#category_chart").width()),a.charts.category_chart.mainGroup.attr("transform",function(){return"translate("+c+",0)"});var h=a.charts.category_chart.mainGroup.datum(a.charts.category_chart.data).selectAll(".node").data(d.nodes);h.enter().append("g").attr("class",function(a){var b=a.children?"node":"leaf node",c=a.slug?a.slug:a.name;return b+" "+c}).each(function(){d3.select(this).append("circle").filter(function(a){return"categories"!==a.name}).style("fill",function(a){return e.getColorBySlug(a.slug)})}),h.attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),h.selectAll("circle").attr("r",function(a){return a.r})}function o(){function b(){a.charts.menu_chart.svg.transition().duration(w).attr("width",u).attr("height",v)}function c(){u=$(window).width(),x=768>u,z=0;var c=d(a.charts.menu_chart.items_group.selectAll("g.compromiso-item"),0);v=c*n,b(),k([])}function d(a,b,c){b+=x&&c?n:0,z=x?0:z;var d=Math.floor((u-z)/n),e=0,f=0,g=(u-z-d*n)/2;return a.transition().duration(w).attr("transform",function(c,h){var i=e*n+g+z,j=f*n+b;return d-1>e?e++:a[0].length!==h+1&&(e=0,f++),"translate("+i+","+j+")"}),f+1+(x&&c?1:0)}function e(){u=$(window).width(),x=768>u;var c=0;z=u/3;var e=[];angular.forEach(a.finishedPercentageGroup,function(b){e.push({title:y[b.key].from+"% - "+y[b.key].to+"%",rows:c}),c+=d(a.charts.menu_chart.items_group.selectAll("g.avance-"+b.key),c*n,!0)}),v=c*n,b(),k(e)}function i(){u=$(window).width(),x=768>u;var c=0;z=u/3;var e=[];angular.forEach(a.categoriesGroupText,function(b){e.push({title:b.key,rows:c}),c+=d(a.charts.menu_chart.items_group.selectAll("g.categoria-"+b.values[0].slug),c*n,!0)}),v=c*n,b(),k(e)}function j(){u=$(window).width(),x=768>u;var c=0;z=u/3;var e=[];angular.forEach(a.finishedYearsGroup,function(b){e.push({title:b.key,rows:c}),c+=d(a.charts.menu_chart.items_group.selectAll("g.cumplimiento-"+b.key),c*n,!0)}),v=c*n,b(),k(e)}function k(b){a.charts.menu_chart.labels_group.selectAll("*").remove();var c=a.charts.menu_chart.labels_group.selectAll(".label-group").data(b);c.enter().append("g").classed("label-group",!0).each(function(a){var b=d3.select(this);b.append("rect").classed("label-group-shape",!0).classed("shape",!0).attr("height",n).attr("width",x?u:u/3).attr("fill","none"),b.append("text").classed("label-group-text",!0).classed("wrap",!0).attr("text-anchor","start").attr("opacity",1).text(function(a){return a.title}),b.attr("transform",function(){return"translate(0,"+a.rows*n+")"});var c=b.select("text");d3plus.textwrap().container(c).shape("square").align("left").valign("middle").padding(3).draw()})}function l(){var b={width:n,height:n/3};d3plus.textwrap().config(b),a.charts.menu_chart.items_group.selectAll("g.compromiso-item").data(A).enter().append("g").attr("class",function(a){var b=[];return b.push("cumplimiento-"+a.cumplimiento),b.push("categoria-"+a.slug),b.push("categoria-unselected"),b.push("avance-"+g(a)),b.join(" ")}).classed("compromiso-item",!0).attr("id",function(a){return"c"+a.numero}).each(function(a){var b=d3.select(this);b.append("rect").classed("compromiso-frame",!0).attr("x",0).attr("y",0).attr("height",n).attr("width",n).attr("fill","white"),b.append("rect").classed("compromiso-label-shape",!0).classed("shape",!0).attr("x",o).attr("y",n/2).attr("height",n/2-o).attr("width",n-2*o).attr("fill","none"),b.append("text").classed("compromiso-label",!0).classed("wrap",!0).attr("id","c"+a.numero+"-text").attr("opacity",0).text(function(){return a.titulo}),b.append("g").classed("compromiso-icon",!0).attr("id",function(a){return"c"+a.numero+"-icon"}).attr("transform",function(){var a=n/2-25,b=n/3-25;return"translate("+a+","+b+")"}).each(function(a){var b=this;f.loadIcon(a.icono,function(a){$(a).attr("width",50).attr("height",50).get(0),b.appendChild(a.cloneNode(!0))})}),b.append("rect").classed("compromiso-action",!0).attr("x",o).attr("y",o).attr("height",n-2*o).attr("width",n-2*o).attr("fill","transparent").on("mouseover",function(a){s(a.slug),p(a.numero)}).on("mouseout",function(){t(),q();var a=$(".c-option-selected");a.size()&&r(a.data("slug"))}).on("click",function(){h(a,d3.mouse(this),d3.event)})}).transition().duration(0).attr("transform",function(){var a=u/2-n/2,b=v/2-n/2;return"translate("+a+","+b+")"}).each("end",function(a){var b=d3.select("text#c"+a.numero+"-text");d3plus.textwrap().container(b).shape("square").align("center").valign("top").padding(3).draw(),b.transition().attr("opacity",1)})}function m(){l(),a.charts.menu_chart.api={group:function(a){switch(a){case"home":c();break;case"date":j();break;case"category":i();break;case"state":e()}}},setTimeout(function(){a.charts.menu_chart.api.group(a.selectedGroup)},1e3)}var n=150,o=5,u=$(window).width(),v=500,w=500,x=768>u,z=u/3,A=angular.copy(a.data);a.charts.menu_chart||(a.charts.menu_chart={},a.charts.menu_chart.svg=d3.select("#menu_chart").append("svg").attr("width",u).attr("height",v).attr("class","menu_chart"),a.charts.menu_chart.items_group=a.charts.menu_chart.svg.append("g").classed("items-container",!0),a.charts.menu_chart.labels_group=a.charts.menu_chart.svg.append("g").classed("labels-container",!0)),m()}function p(a){$(".compromiso-item").addClass("categoria-unselected"),$(".compromiso-item#c"+a).removeClass("categoria-unselected")}function q(){$(".compromiso-item").addClass("categoria-unselected")}function r(a){$(".compromiso-item").addClass("categoria-unselected"),$(".compromiso-item.categoria-"+a).removeClass("categoria-unselected")}function s(a){$(".c-option").removeClass("c-option-hover"),$('.c-option[data-slug="'+a+'"]').addClass("c-option-hover")}function t(){$(".c-option").removeClass("c-option-hover")}function u(a){$(".c-option").removeClass("c-option-selected"),$('.c-option[data-slug="'+a+'"]').addClass("c-option-selected")}function v(){$(".c-option").removeClass("c-option-selected")}function w(){$(".c-option").mouseover(function(){var a=$(this).data("slug");a&&(s(a),r(a),m(a))}).mouseout(function(){var a=$(this).data("slug");if(a){var b=$(".c-option-selected");b.size()?(r(b.data("slug")),m(b.data("slug"))):(q(),k()),t()}}).click(function(){var b=$(this).data("slug");b&&($(this).hasClass("c-option-selected")?(v(),k()):(u(b),r(b),m(b),a.$apply(function(){a.selectedCategory=b})))})}a.pymChild=new pym.Child({polling:1e3}),a.pymChild.sendHeight(),a.data=[],a.loading=!0,a.charts={},a.selectedGroup="home";var x=d.getUrlByPage("home");c.jsonp(x).success(function(b){a.data=b.map(function(a){return console.log(a),a.slug=a.slug.trim(),a.categoria=a.categoria.trim(),a}),a.loading=!1,a.groupData(),a.renderCharts()}),a.groupData=function(){a.categoriesGroup=d3.nest().key(function(a){return a.slug}).entries(a.data),a.categoriesGroupText=d3.nest().key(function(a){return a.categoria}).entries(a.data),a.availableCategories=[],angular.forEach(a.categoriesGroup,function(b){a.availableCategories.push(b.key)}),angular.forEach(a.categoriesGroup,function(a){a.finishedYearsGroup=d3.nest().key(function(a){return a.cumplimiento}).rollup(function(a){return a.length}).entries(a.values)}),a.finishedYearsGroup=d3.nest().key(function(a){return a.cumplimiento}).entries(a.data),angular.forEach(a.finishedYearsGroup,function(a){a.categoryGroup=d3.nest().key(function(a){return a.slug}).rollup(function(a){return a.length}).entries(a.values)}),a.availableYears=[],angular.forEach(a.finishedYearsGroup,function(b){a.availableYears.push(b.key)}),a.availableYears=a.availableYears.sort(),a.finishedPercentageGroup=d3.nest().key(function(a){return g(a)}).entries(a.data)};var y=[];y.push({from:0,to:25}),y.push({from:25,to:50}),y.push({from:50,to:75}),y.push({from:75,to:100}),a.renderCharts=function(){w(),i(),j(),n(),o()},a.redirectParent=function(b){a.pymChild.navigateParentTo(b)},a.closeDetail=function(){a.currentCompromise=null,d3.select("#filler").style("height","0px")},a.onChangeCategory=function(){""!==a.selectedCategory?(u(a.selectedCategory),r(a.selectedCategory),m(a.selectedCategory)):(v(),k())},a.onChangeGroup=function(){a.groupMenu(a.selectedGroup)},a.groupMenu=function(b){a.selectedGroup=b,a.charts.menu_chart.api.group(a.selectedGroup)};var z;$(window).resize(function(){clearTimeout(z),z=setTimeout(function(){a.charts.menu_chart&&a.charts.menu_chart.api.group(a.selectedGroup),a.charts.category_chart&&n()},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso01Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService","$sce","$templateRequest","$compile",function(a,b,c,d,e,f,g,h){var i=a.getUrlByPage("home"),j=new pym.Child({polling:1e3});j.sendHeight();var k=window._;b.loading=!0,c.jsonp(i).success(function(a){b.currentCompromise=b.data=k.find(a,function(a){return 1===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))}),console.log(b.currentCompromise)});var l="#bdbec2";b.prepareData1=function(a){return a},b.completeConfig1=function(a){return angular.merge(a,{data:{types:{meta:"area",baches_resueltos:"line"},keys:{value:["meta","baches_resueltos"],x:"mes"},colors:{meta:l,baches_resueltos:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{x:{type:"category",show:!0},y:{show:!1}},legend:{show:!0}})},b.prepareData2=function(a){return a},b.completeConfig2=function(a){return angular.merge(a,{data:{types:{dias:"line",meta:"area"},keys:{value:["dias","meta"],x:"mes"},colors:{meta:l,dias:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{x:{type:"category",show:!0},y:{show:!1}},legend:{show:!0}})},b.dataLoaded3=function(a,c){b.autosConfig={icono:"subte",orientacion:"cols",base:{titulo:c[0].detalle,color:"#cccccc",cantidad:100},opciones:[{titulo:c[1].detalle,color:b.currentCompromise.color,cantidad:Math.round(100*parseInt(c[1].cantidad)/parseInt(c[0].cantidad))}]};var d=f.getTrustedResourceUrl("views/includes/autitos.html");return g(d).then(function(c){h($("#"+a).html(c).contents())(b)}),console.log(3,a,c),c}}]),angular.module("compromisosSiteApp").controller("Compromiso02Ctrl",["UrlService","$compile","$templateRequest","$scope","$http","SlugColorService","LoadSVGService","$sce",function(a,b,c,d,e,f,g,h){function i(){var a=d.selectedPeriodo,b=d3.range(0,d3.max(n,function(a){return a.values.length}));o=b.map(function(a){return"c"+(a+1)});var c=[];return c=n.map(function(c){var d={comuna:c.key};return angular.forEach(b,function(b){c.values[b]?d["c"+(b+1)]=c.values[b][a]?parseFloat(c.values[b][a]):0:d["c"+(b+1)]=0}),d})}var j=a.getUrlByPage("home"),k=new pym.Child({polling:1e3});k.sendHeight();var l=window._;d.loading=!0,e.jsonp(j).success(function(a){d.currentCompromise=d.data=l.find(a,function(a){return 2===parseInt(a.numero)}),d.currentCompromise.color=f.getColorBySlug(d.currentCompromise.slug),d.currentCompromise.porcentaje_completado=parseInt(d.currentCompromise.porcentaje_completado),d.loading=!1,g.loadIcon(d.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})});var m,n,o;d.prepareData1=function(a){return a.map(function(a){return a.trimestre=a.anio+"-"+3*parseInt(a.trimestre)+"-01",a}),a},d.completeConfig1=function(a){return angular.merge(a,{data:{type:"spline",keys:{value:["meta_modelada","reciclado_real"],x:"trimestre"},colors:{reciclado_real:d.currentCompromise.color,meta_modelada:"#ccc"}},point:{show:!1},size:{height:300},padding:{top:0,right:20,bottom:10,left:30},axis:{x:{type:"timeseries",show:!0,tick:{format:function(a){return(a.getMonth()+1)/3+"-"+a.getFullYear()}}},y:{show:!0}},legend:{show:!0}})},d.prepareData2=function(a){return d.selectedPeriodo="mayo_2016",d.selectOptions=l.without(l.keys(a[0]),"comuna","punto_verde"),d.selectOptions=d.selectOptions.map(function(a){return{label:a.toUpperCase().replace("_"," "),value:a}}),n=d3.nest().key(function(a){return a.comuna}).entries(a),i()},d.completeConfig2=function(a){var b={},c=d.currentCompromise.color;return o.forEach(function(a){b[a]=c,c=d3.rgb(c).darker().toString()}),d.dataConfig={type:"bar",keys:{value:o,x:"comuna"},colors:b,groups:[o]},angular.merge(a,{data:d.dataConfig,tooltip:{grouped:!0,format:{title:function(a){return"Comuna "+(a+1)},name:function(a,b,c,d){var e=n[d].values;return e[parseInt(a.replace("c",""))-1]?e[parseInt(a.replace("c",""))-1].punto_verde:""},value:function(a){return 0!==a?a:""}},contents:function(a,b,c,d){var e,f,g,h,i,j,k=this,l=k.config,m=l.tooltip_format_title||b,n=l.tooltip_format_name||function(a){return a},o=l.tooltip_format_value||c;for(f=0;f<a.length;f++)a[f]&&(a[f].value||0===a[f].value)&&(e||(g=m?m(a[f].x):a[f].x,e="<table class='"+k.CLASS.tooltip+"'>"+(g||0===g?"<tr><th colspan='2'>"+g+"</th></tr>":"")),i=n(a[f].name,a[f].ratio,a[f].id,a[f].index),h=o(a[f].value,a[f].ratio,a[f].id,a[f].index),h=""!==i&&""===h?0:h,j=k.levelColor?k.levelColor(a[f].value):d(a[f].id),j=""===i?"white":j,e+="<tr class='"+k.CLASS.tooltipName+"-"+a[f].id+"'>",e+="<td class='name'><span style='background-color:"+j+"'></span>"+i+"</td>",e+="<td class='value'>"+h+"</td>",e+="</tr>");return e+"</table>"}},point:{show:!1},size:{height:300},padding:{top:0,right:20,bottom:10,left:30},axis:{rotated:!0,x:{type:"category",show:!0},y:{show:!0}},legend:{show:!1}})},d.chartReady2=function(a,e){m=a,$("<div id='selector-container'></div>").insertAfter("#"+e);var f=h.getTrustedResourceUrl("views/includes/selectorPeriodos.html");c(f).then(function(a){b($("#selector-container").html(a).contents())(d)},function(){})},d.changeOption=function(){m.load(angular.merge(d.dataConfig,{json:i()}))}}]),angular.module("compromisosSiteApp").controller("Compromiso03Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 3===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))}),console.log(b.currentCompromise)}),b.youtubeLink="https://www.youtube.com/watch?v=AoZ98-TwqM4",b.prepareData=function(a){return a},b.completeConfig=function(a){return angular.merge(a,{data:{types:{meta_acumulado:"area",adultos_incluidos_acumulado:"line"},keys:{value:["adultos_incluidos_acumulado","meta_acumulado"],x:"mes"},colors:{meta_acumulado:b.currentCompromise.secondColor,adultos_incluidos_acumulado:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:80},axis:{x:{type:"category",show:!1},y:{show:!0}},legend:{show:!0}})},b.chartReady=function(a){},b.prepareData2=function(a){return a},b.completeConfig2=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["uso_computadora","uso_internet"],x:"edad"},colors:{uso_computadora:b.currentCompromise.color,uso_internet:b.currentCompromise.secondColor}},size:{height:300},padding:{top:0,right:20,bottom:10,left:80},axis:{x:{type:"category",show:!1},y:{show:!0}},legend:{show:!0}})},b.chartReady2=function(a){},b.prepareData3=function(a){return a},b.completeConfig3=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["poblacion_mayor_o_igual_65"],x:"provincia"},colors:{poblacion_mayor_o_igual_65:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:100},axis:{rotated:!0,x:{type:"category",show:!0},y:{show:!0}},legend:{show:!0}})},b.chartReady3=function(a){};var i;$(window).resize(function(){clearTimeout(i),i=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso04Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 4===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))}),console.log(b.currentCompromise)}),b.youtubeLink="https://www.youtube.com/watch?v=AoZ98-TwqM4",b.prepareData=function(a){return a},b.completeConfig=function(a){return angular.merge(a,{data:{keys:{value:["muertes"],x:"anio"},names:{muertes:"Medición"},colors:{muertes:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{show:!0},y:{show:!0}},legend:{show:!0}})},b.chartReady=function(a){},b.prepareData2=function(a){return a},b.completeConfig2=function(a){return angular.merge(a,{data:{keys:{value:["lesionados"],x:"anio"},names:{lesionados:"Medición"},colors:{lesionados:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{show:!0},y:{show:!0}},legend:{show:!0}})},b.chartReady2=function(a){},b.prepareData3=function(a){return a},b.completeConfig3=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["poblacion_mayor_o_igual_65"],x:"provincia"},colors:{poblacion_mayor_o_igual_65:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:100},axis:{rotated:!0,x:{type:"category",show:!0},y:{show:!1}},legend:{show:!1}})},b.chartReady3=function(a){},b.prepareData4=function(a){return a},b.completeConfig4=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["buenos_aires","seattle","nueva_york"],x:"anio"},colors:{buenos_aires:b.currentCompromise.color,seattle:b.currentCompromise.color,nueva_york:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{rotated:!0,x:{type:"category",show:!0},y:{show:!1}},legend:{show:!1}})},b.chartReady4=function(a){};var i;$(window).resize(function(){clearTimeout(i),i=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso05Ctrl",["UrlService","$compile","$templateRequest","$scope","$http","SlugColorService","LoadSVGService","$sce",function(a,b,c,d,e,f,g,h){function i(){var a=$("#"+p).width(),e=300,f=a/q.length,g=.1*f,i=d3.scale.linear().domain([0,100]).range([0,e-f-f/2]);o||(o={},o.svg=d3.select("#"+p).append("svg").classed("vertical-bar-svg",!0),o.detail=d3.select("#"+p).append("div").attr("id","vertical-bar-detail"),o.main=o.svg.append("g").classed("vertical-bar-g-main",!0)),o.svg.attr("height",e).attr("width",a),o.bars=o.main.selectAll(".vertical-bar-g").data(q),o.bars.enter().append("g").attr("id",function(a,b){return"vertical-bar-g-"+b}).classed("vertical-bar-g",!0).classed("categoria-"+d.currentCompromise.slug,!0).classed("categoria-unselected",!0).each(function(a,g){var i=d3.select(this);i.datum({ix:g}).append("rect").classed("vertical-bar-bg",!0).attr("height",e);var j=$(m).attr("width",f).attr("height",f).get(0);i.append("g").classed("vertical-bar-icon",!0).each(function(){this.appendChild(j.cloneNode(!0))}),i.append("rect").classed("vertical-bar-fill",!0).attr("fill","#ccc"),i.append("rect").classed("vertical-bar-value",!0).classed("fill-color",!0).datum(a).attr("fill",d.currentCompromise.color),i.append("text").classed("vertical-bar-text",!0).attr("text-anchor","middle").text(function(){return a.avance?a.avance+"%":"0%"}),i.datum({ix:g}).append("rect").classed("vertical-bar-event",!0).classed("handy",!0).attr("x",1).attr("y",1).attr("height",e-2).attr("stroke","#fff").attr("stroke-width",2).attr("fill","transparent").on("mouseover",function(){}).on("mouseout",function(){}).on("click",function(a){d.selectedPlaza=q[a.ix],d3.selectAll(".vertical-bar-g").classed("categoria-unselected",!0).classed("categoria-selected",!1),d3.selectAll(".vertical-bar-g#vertical-bar-g-"+a.ix).classed("categoria-unselected",!1).classed("categoria-selected",!0);var e=h.getTrustedResourceUrl("views/includes/plazaDetail.html");c(e).then(function(a){b($("#vertical-bar-detail").html(a).contents())(d)},function(){})})}),o.bars.attr("transform",function(a,b){return"translate("+b*f+",0)"}),o.bars.selectAll("text.vertical-bar-text").attr("x",f/2).attr("y",e-f/4+g/2),o.bars.selectAll("rect.vertical-bar-bg").attr("width",f),o.bars.selectAll("rect.vertical-bar-event").attr("width",f-2),o.bars.selectAll("g.vertical-bar-icon svg").attr("width",f).attr("height",f),o.bars.selectAll("rect.vertical-bar-fill").attr("height",e-f-f/2).attr("y",f).attr("x",g).attr("width",f-2*g),o.bars.selectAll("rect.vertical-bar-value").attr("height",function(a){return i(parseInt(a.avance))}).attr("y",function(a){return f+(e-f-f/2)-i(parseInt(a.avance))}).attr("x",g).attr("width",f-2*g)}var j=a.getUrlByPage("home"),k=new pym.Child({polling:1e3});k.sendHeight();var l=window._;d.loading=!0;var m,n;e.jsonp(j).success(function(a){d.currentCompromise=d.data=l.find(a,function(a){return 5===parseInt(a.numero)}),d.currentCompromise.color=f.getColorBySlug(d.currentCompromise.slug),d.currentCompromise.porcentaje_completado=parseInt(d.currentCompromise.porcentaje_completado),d.loading=!1,g.loadIcon(d.currentCompromise.icono,function(a){m=a,$(".icon-svg-container").html(a.cloneNode(!0))})});var o,p,q;d.dataLoaded=function(a,b){p=a,q=b,setTimeout(function(){i()},1e3)},d.dataLoaded2=function(a,e){d.bubbleId=a,d.bubbleConfig={color:d.currentCompromise.color};var f=d3.sum(e,function(a){return parseInt(a.hectareas)});d.bubbleData={name:"total",children:[]},l.each(e,function(a){d.bubbleData.children.push({name:a.tipo,data:Math.round(100*parseInt(a.hectareas)/f)+"%",value:parseInt(a.hectareas),children:[]})});var g=h.getTrustedResourceUrl("views/includes/bubble.html");c(g).then(function(c){b($("#"+a).html(c).contents())(d)})},d.prepareData3=function(a){return n=a,a},d.completeConfig3=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["metros_habitante"],x:"ciudad"},colors:{metros_habitante:d.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{rotated:!0,x:{type:"category",show:!1},y:{show:!0}},legend:{show:!1},bar:{width:{ratio:.8}}})},d.chartReady3=function(a,b){var c=d3.select(".c3-texts");d3.selectAll("#"+b+" .c3-event-rect").each(function(a){var b=n[a.index],d=d3.select(this),e=parseInt(d.attr("height")/2);c.append("text").attr("alignment-baseline","middle").classed("custom-c3-text",!0).attr("x",parseInt(d.attr("x"))+10).attr("y",parseInt(d.attr("y"))+e).text(b.ciudad+": "+b.metros_habitante+" m²")})};var r;$(window).resize(function(){clearTimeout(r),r=setTimeout(function(){o&&i()},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso06Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 6===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),
b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))}),console.log(b.currentCompromise)}),b.prepareData=function(a){return a},b.completeConfig=function(a){return angular.merge(a,{data:{types:{kilometros_construidos_proyectados:"line",kilometros_construidos_totales:"line"},regions:{kilometros_construidos_proyectados:[{style:"dashed"}]},names:{kilometros_construidos_proyectados:"Km Proyectados",kilometros_construidos_totales:"Km Construidos"},keys:{value:["kilometros_construidos_proyectados","kilometros_construidos_totales"],x:"anio"},colors:{kilometros_construidos_proyectados:b.currentCompromise.color,kilometros_construidos_totales:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"category",show:!0},y:{show:!0}},legend:{show:!0}})},b.chartReady=function(a){};var i={};b.prepareData2=function(a){return i=a,a},b.completeConfig2=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["pasajeros_diarios"],x:"corredor"},colors:{pasajeros_diarios:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{rotated:!0,x:{type:"category",show:!1},y:{show:!0}},legend:{show:!1}})},b.chartReady2=function(a,b){var c=d3.select("#"+b+".c3-texts");d3.selectAll("#"+b+" .c3-event-rect").each(function(a){var b=i[a.index],d=d3.select(this),e=parseInt(d.attr("height")/2);c.append("text").attr("alignment-baseline","middle").classed("custom-c3-text",!0).attr("x",parseInt(d.attr("x"))+10).attr("y",parseInt(d.attr("y"))+e).text(b.corredor)})};var j={};b.prepareData3=function(a){j=a;for(var b=0;b<j.length;b++){var c=parseFloat(j[b].porcentaje_avance);j[b].restante=100-c}return a},b.completeConfig3=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["porcentaje_avance","restante"],x:"corredor"},groups:[["porcentaje_avance","restante"]],colors:{porcentaje_avance:b.currentCompromise.color,restante:b.currentCompromise.secondColor}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{rotated:!0,x:{type:"category",show:!1},y:{show:!0}},legend:{show:!1}})},b.chartReady3=function(a,b){var c=d3.select("#"+b+".c3-texts");d3.selectAll("#"+b+" .c3-event-rect").each(function(a){var b=j[a.index],d=d3.select(this),e=parseInt(d.attr("height")/2);c.append("text").attr("alignment-baseline","middle").classed("custom-c3-text",!0).attr("x",parseInt(d.attr("x"))+10).attr("y",parseInt(d.attr("y"))+e).text(b.corredor)})};var k={};b.prepareData4=function(a){return k=a,a},b.completeConfig4=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["proyectados","kilometros"],x:"ciudad"},groups:[["proyectados","kilometros"]],colors:{kilometros:b.currentCompromise.color,proyectados:b.currentCompromise.secondColor}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{rotated:!0,x:{type:"category",show:!1},y:{show:!0}},legend:{show:!1}})},b.chartReady4=function(a,b){var c=d3.select("#"+b+".c3-texts");d3.selectAll("#"+b+" .c3-event-rect").each(function(a){var b=k[a.index],d=d3.select(this),e=parseInt(d.attr("height")/2);c.append("text").attr("alignment-baseline","middle").classed("custom-c3-text",!0).attr("x",parseInt(d.attr("x"))+10).attr("y",parseInt(d.attr("y"))+e).text(b.ciudad)})};var l;$(window).resize(function(){clearTimeout(l),l=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso07Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService","$sce","$compile","$templateRequest",function(a,b,c,d,e,f,g,h){var i=a.getUrlByPage("home"),j=new pym.Child({polling:1e3});j.sendHeight();var k,l=window._;b.loading=!0,c.jsonp(i).success(function(a){b.currentCompromise=b.data=l.find(a,function(a){return 7===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.porcentaje_completado_2=parseInt(b.currentCompromise.cumplimiento_2_porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.loading=!1,console.log(b.currentCompromise),e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.prepareData1=function(a){function b(a){return a?(a=a.split(":"),60*+a[0]+ +a[1]):null}return l.each(a,function(a){a.mes_date=a.mes+"-01",a.linea_a_sec=b(a.linea_a),a.linea_b_sec=b(a.linea_b),a.linea_c_sec=b(a.linea_c),a.linea_d_sec=b(a.linea_d),a.linea_e_sec=b(a.linea_e),a.linea_h_sec=b(a.linea_h)}),a},b.completeConfig1=function(a){return angular.merge(a,{data:{keys:{value:["linea_a_sec","linea_b_sec","linea_c_sec","linea_d_sec","linea_e_sec","linea_h_sec"],x:"mes_date"},names:{linea_a_sec:"Línea A",linea_b_sec:"Línea B",linea_c_sec:"Línea C",linea_d_sec:"Línea D",linea_e_sec:"Línea E",linea_h_sec:"Línea H"},type:"spline"},size:{height:300},padding:{top:0,right:40,bottom:10,left:40},point:{show:!1},axis:{x:{type:"timeseries",show:!0,tick:{format:"%m-%Y"}},y:{show:!0,tick:{format:function(a){var b=Math.floor(a/60),c=a-60*b;return c=1===(""+c).length?"0"+c:c,b+":"+c}}}},legend:{show:!0}})},b.chartReady1=function(a){},b.prepareData3=function(a){return l.each(a,function(a){a.mes_date=a.mes+"-01",a.linea_a=parseInt(a.linea_a),a.linea_b=parseInt(a.linea_b),a.linea_c=parseInt(a.linea_c),a.linea_d=parseInt(a.linea_d),a.linea_e=parseInt(a.linea_e),a.linea_h=parseInt(a.linea_h),a.anio=parseInt(a.anio)}),b.data3=a,b.selectedYear=2015,b.selectOptions=l.map(l.groupBy(a,"anio"),function(a,b){return parseInt(b)}),b.getFilteredData()},b.changeOption=function(){k.load(angular.merge(b.dataConfig,{json:b.getFilteredData()}))},b.getFilteredData=function(){return l.filter(b.data3,{anio:b.selectedYear})},b.completeConfig3=function(a){return b.dataConfig={keys:{value:["linea_a","linea_b","linea_c","linea_d","linea_e","linea_h"],x:"mes_date"},names:{linea_a:"Línea A",linea_b:"Línea B",linea_c:"Línea C",linea_d:"Línea D",linea_e:"Línea E",linea_h:"Línea H"},type:"spline"},angular.merge(a,{data:b.dataConfig,size:{height:300},point:{show:!1},padding:{top:0,right:40,bottom:10,left:60},axis:{x:{type:"timeseries",show:!0,tick:{format:"%m-%Y"}},y:{show:!0,tick:{format:function(a){return(a+"").replace("000000","m")}}}},legend:{show:!0}})},b.chartReady3=function(a,c){k=a,$("<div id='selector-container'></div>").insertBefore("#"+c);var d=f.getTrustedResourceUrl("views/includes/selector.html");h(d).then(function(a){g($("#selector-container").html(a).contents())(b)},function(){})};var m;$(window).resize(function(){clearTimeout(m),m=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso08Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 8===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.prepareData1=function(a){return a},b.completeConfig1=function(a){return angular.merge(a,{data:{xFormat:"%d-%m-%Y",keys:{value:["avance"],x:"obra"},names:{avance:"Avance"},colors:{avance:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"timeseries",tick:{format:"%m-%Y"},show:!0},y:{min:0,max:100,show:!0}},legend:{show:!0}})},b.chartReady1=function(a){};var i;$(window).resize(function(){clearTimeout(i),i=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso09Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 9===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.prepareData1=function(a){return a},b.completeConfig1=function(a){return angular.merge(a,{data:{xFormat:"%d-%m-%Y",keys:{value:["avance"],x:"obra"},names:{avance:"Avance"},colors:{avance:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"timeseries",tick:{format:"%m-%Y"},show:!0},y:{min:0,max:100,show:!0}},legend:{show:!0}})},b.chartReady1=function(a){};var i;$(window).resize(function(){clearTimeout(i),i=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso10Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService","$sce","$compile","$templateRequest",function(a,b,c,d,e,f,g,h){var i=a.getUrlByPage("home"),j=new pym.Child({polling:1e3});j.sendHeight();var k,l=window._;b.loading=!0,c.jsonp(i).success(function(a){b.currentCompromise=b.data=l.find(a,function(a){return 10===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.prepareData1=function(a){return a},b.completeConfig1=function(a){return angular.merge(a,{data:{keys:{value:["estudiantes_abandonan","variacion_interanual","variacion_acumulada"],x:"anio"},names:{estudiantes_abandonan:"Abandonos",variacion_interanual:"Interanual",variacion_acumulada:"Acumulada"},colors:{estudiantes_abandonan:b.currentCompromise.color,variacion_interanual:b.currentCompromise.secondColor}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{show:!0},y:{show:!0}},legend:{show:!0}})},b.chartReady1=function(){},b.prepareData2=function(a){return b.labels=l.keys(a[0]),l.remove(b.labels,function(a){return-1!==l.indexOf(["anio","CV"],a)}),b.origLabels=angular.copy(b.labels),b.colors={},b.labels.forEach(function(a){b.colors[a]="#e6e6e6"}),b.selectedProv=b.labels[0],a},b.selectedColorPalette=function(){var a=angular.copy(b.colors);return b.selectedProv&&(a[b.selectedProv]=b.currentCompromise.color),a},b.completeConfig2=function(a){return b.selectOptions=b.origLabels,b.dataConfig={keys:{value:b.selectOptions,x:"anio"},type:"spline",colors:b.selectedColorPalette()},angular.merge(a,{data:b.dataConfig,size:{height:300},point:{show:!1},padding:{top:0,right:40,bottom:10,left:30},axis:{x:{show:!0},y:{show:!0}},legend:{show:!1}})},b.chartReady2=function(a,c){b.classesLabels={},b.labels.forEach(function(a,c){b.classesLabels[b.origLabels[c]]=a.replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-")});var d=b.classesLabels[b.selectedProv];$(".c3-lines path").css("stroke-width","1px"),$(".c3-lines-"+d+" path").css("stroke-width","5px"),k=a,$("<div id='selector-container'></div>").insertAfter("#"+c);var e=f.getTrustedResourceUrl("views/includes/selectorProvincias.html");h(e).then(function(a){g($("#selector-container").html(a).contents())(b)},function(){})},b.changeOption=function(){k.load(angular.merge(b.dataConfig,{colors:b.selectedColorPalette()}));var a=b.classesLabels[b.selectedProv];$(".c3-lines path").css("stroke-width","1px"),$(".c3-lines-"+a+" path").css("stroke-width","5px")};var m;$(window).resize(function(){clearTimeout(m),m=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso11Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService","$sce","$compile","$templateRequest",function(a,b,c,d,e,f,g,h){var i=a.getUrlByPage("home"),j=new pym.Child({polling:1e3});j.sendHeight();var k=window._;b.loading=!0,c.jsonp(i).success(function(a){b.currentCompromise=b.data=k.find(a,function(a){return 11===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.prepareData1=function(a){return a.map(function(a){a.mes+="-01",a.porcentaje_avance=a.porcentaje_avance?parseInt(a.porcentaje_avance):0}),a},b.completeConfig1=function(a){return angular.merge(a,{data:{keys:{value:["porcentaje_avance"],x:"mes"},names:{porcentaje_avance:"Porcentaje Avance"},colors:{porcentaje_avance:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"timeseries",show:!0,tick:{rotate:60,format:"%m-%Y"}},y:{show:!0,min:0,padding:5,tick:{format:function(a){return a+"%"}}}},legend:{show:!0}})},b.chartReady1=function(){}}]),angular.module("compromisosSiteApp").controller("Compromiso12Ctrl",["UrlService","$compile","$templateRequest","$scope","$http","SlugColorService","LoadSVGService","$sce",function(a,b,c,d,e,f,g,h){function i(a){var e=$("#"+a).width(),f=150,g=e/o[a].length,i=.1*g,j=d3.scale.linear().domain([0,100]).range([0,f-g-g/2]);n[a]||(n[a]={},n[a].svg=d3.select("#"+a).append("svg").classed("vertical-bar-svg",!0),n[a].main=n[a].svg.append("g").classed("vertical-bar-g-main",!0)),n[a].svg.attr("height",f).attr("width",e),n[a].bars=n[a].main.selectAll(".vertical-bar-g").data(o[a]),n[a].bars.enter().append("g").attr("id",function(a,b){return"vertical-bar-g-"+a.escuela}).classed("vertical-bar-g",!0).classed("categoria-"+d.currentCompromise.slug,!0).classed("categoria-unselected",!0).each(function(e,i){var j=d3.select(this);j.datum({ix:e.escuela}).append("rect").classed("vertical-bar-bg",!0).attr("height",f);var k=$(m).attr("width",g).attr("height",g).get(0);j.append("g").classed("vertical-bar-icon",!0).each(function(){this.appendChild(k.cloneNode(!0))}),j.append("rect").classed("vertical-bar-fill",!0).attr("fill","#ccc"),j.append("rect").classed("vertical-bar-value",!0).classed("fill-color",!0).datum(e).attr("fill",d.currentCompromise.color),j.append("text").classed("vertical-bar-text",!0).attr("text-anchor","middle").text(function(){return e.avance?e.avance+"%":"0%"}),j.datum({ix:e.escuela}).append("rect").classed("vertical-bar-event",!0).classed("handy",!0).attr("x",1).attr("y",1).attr("height",f-2).attr("stroke","#fff").attr("stroke-width",2).attr("fill","transparent").on("mouseover",function(){}).on("mouseout",function(){}).on("click",function(e,f){d.selectedEscuela=l.find(o[a],function(a){return a.escuela==e.ix}),d3.selectAll(".vertical-bar-g").classed("categoria-unselected",!0).classed("categoria-selected",!1),d3.selectAll(".vertical-bar-g#vertical-bar-g-"+e.ix).classed("categoria-unselected",!1).classed("categoria-selected",!0);var g=h.getTrustedResourceUrl("views/includes/escuelaDetail.html");c(g).then(function(a){b($("#vertical-bar-detail").html(a).contents())(d)},function(){})})}),n[a].bars.attr("transform",function(a,b){return"translate("+b*g+",0)"}),n[a].bars.selectAll("text.vertical-bar-text").attr("x",g/2).attr("y",f-g/4+i/2),n[a].bars.selectAll("rect.vertical-bar-bg").attr("width",g),n[a].bars.selectAll("rect.vertical-bar-event").attr("width",g-2),n[a].bars.selectAll("g.vertical-bar-icon svg").attr("width",g).attr("height",g),n[a].bars.selectAll("rect.vertical-bar-fill").attr("height",f-g-g/2).attr("y",g).attr("x",i).attr("width",g-2*i),n[a].bars.selectAll("rect.vertical-bar-value").attr("height",function(a){return j(parseInt(a.avance))}).attr("y",function(a){return g+(f-g-g/2)-j(parseInt(a.avance))}).attr("x",i).attr("width",g-2*i)}var j=a.getUrlByPage("home"),k=new pym.Child({polling:1e3});k.sendHeight();var l=window._;d.loading=!0;var m;e.jsonp(j).success(function(a){d.currentCompromise=d.data=l.find(a,function(a){return 12===parseInt(a.numero)}),d.currentCompromise.color=f.getColorBySlug(d.currentCompromise.slug),d.currentCompromise.porcentaje_completado=parseInt(d.currentCompromise.porcentaje_completado),d.loading=!1,g.loadIcon(d.currentCompromise.icono,function(a){m=a,$(".icon-svg-container").html(a.cloneNode(!0))})});var n={},o={};d.dataLoaded=function(a,b){var c=Math.ceil(b.length/2),d=l.chunk(b,c);o={"chart-escuelas-1":d[0],"chart-escuelas-2":d[1]},$("#"+a).append("<div class='row'><div class='col-md-10'><div id='chart-escuelas-1'></div><div id='chart-escuelas-2'></div></div><div id='vertical-bar-detail' class='col-md-2'></div></div>"),setTimeout(function(){i("chart-escuelas-1"),i("chart-escuelas-2")},1e3)};var p;$(window).resize(function(){clearTimeout(p),p=setTimeout(function(){n&&(i("chart-escuelas-1"),i("chart-escuelas-2"))},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso13Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 13===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))}),console.log(b.currentCompromise)}),b.youtubeLink="https://www.youtube.com/watch?v=AoZ98-TwqM4",b.prepareData1=function(a){return a},b.completeConfig1=function(a){return angular.merge(a,{data:{types:{"Meta G2":"line","Desempeño G2":"line","Meta G3":"line","Desempeño G3":"line"},regions:{"Meta G2":[{style:"dashed"}],"Meta G3":[{style:"dashed"}]},keys:{value:["Meta G2","Desempeño G2","Meta G3","Desempeño G3"],x:"anio"},colors:{"Meta G2":"#3cb8b0","Desempeño G2":"#3cb8b0","Meta G3":"#f98f41","Desempeño G3":"#f98f41"}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"category",show:!0},y:{show:!0,tick:{format:function(a){return Math.round(100*a)+"%"}}}},legend:{show:!0}})},b.chartReady1=function(a){};var i;$(window).resize(function(){clearTimeout(i),i=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso14Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 14===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))}),console.log(b.currentCompromise)}),b.prepareData=function(a){return a},b.completeConfig=function(a){return angular.merge(a,{data:{xFormat:"%Y-%m",types:{meta:"area",policias:"line"},regions:{meta:[{style:"dashed"}]},keys:{value:["policias","meta"],x:"fecha"},colors:{meta:b.currentCompromise.secondColor,policias:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"timeseries",show:!0,tick:{format:"%m-%Y"}},y:{show:!0,min:-1}},legend:{show:!0}})},b.chartReady=function(a){};var i={};b.prepareData2=function(a){return i=a,a},b.completeConfig2=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["policias_cienmilhab"],x:"ciudad"},colors:{policias_cienmilhab:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{rotated:!0,x:{type:"category",show:!1},y:{show:!0}},legend:{show:!1}})},b.chartReady2=function(a,b){var c=d3.select(".c3-texts");d3.selectAll("#"+b+" .c3-event-rect").each(function(a){var b=i[a.index],d=d3.select(this),e=parseInt(d.attr("height")/2);c.append("text").attr("alignment-baseline","middle").classed("custom-c3-text",!0).attr("x",parseInt(d.attr("x"))+10).attr("y",parseInt(d.attr("y"))+e).text(b.anio+": "+b.ciudad)})};var j;$(window).resize(function(){clearTimeout(j),j=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso15Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService","$sce","$compile","$templateRequest",function(a,b,c,d,e,f,g,h){var i=a.getUrlByPage("home"),j=new pym.Child({polling:1e3});j.sendHeight();var k=window._;b.loading=!0,c.jsonp(i).success(function(a){b.currentCompromise=b.data=k.find(a,function(a){return 15===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.prepareData1=function(a){return a},b.completeConfig1=function(a){return angular.merge(a,{data:{xFormat:"%d-%m-%Y",keys:{value:["avance"],x:"obra"},names:{avance:"Avance"},colors:{avance:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"timeseries",tick:{format:"%m-%Y"},show:!0},y:{min:10,max:90,show:!0}},legend:{show:!0}})},b.chartReady1=function(a){};var l={};b.prepareData2=function(a){return l=a,a},b.completeConfig2=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["contravenciones","delitos"],x:"comuna"},colors:{contravenciones:b.currentCompromise.color,delitos:b.currentCompromise.secondColor}},size:{height:300},padding:{top:0,right:20,bottom:10,left:20},axis:{rotated:!0,x:{type:"category",show:!0},y:{show:!0}},legend:{show:!0}})},b.chartReady2=function(a,b){};var m;$(window).resize(function(){clearTimeout(m),m=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso16Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService",function(a,b,c,d,e){var f=a.getUrlByPage("home"),g=new pym.Child({polling:1e3});g.sendHeight();var h=window._;b.loading=!0,c.jsonp(f).success(function(a){b.currentCompromise=b.data=h.find(a,function(a){return 16===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))}),console.log(b.currentCompromise)}),b.youtubeLink="https://www.youtube.com/watch?v=AoZ98-TwqM4",b.prepareData=function(a){return a},b.completeConfig=function(a){return angular.merge(a,{data:{types:{meta_mensual:"area",meta_acumulada:"area",medicion_real:"line"},keys:{value:["meta_mensual","meta_acumulada","medicion_real"],x:"mes"},colors:{meta_mensual:b.currentCompromise.secondColor,meta_acumulada:"#ccc",medicion_real:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"category",show:!0},y:{show:!0,min:-1}},legend:{show:!0}})},b.chartReady=function(a){},b.prepareData2=function(a){return a},b.completeConfig2=function(a){return angular.merge(a,{data:{type:"bar",keys:{value:["cantidad_zonas_wifi_gratis"],x:"ciudad"},colors:{cantidad_zonas_wifi_gratis:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:100},axis:{rotated:!0,x:{type:"category",show:!0},y:{show:!0}},legend:{show:!1}})},b.chartReady2=function(a){};var i;$(window).resize(function(){clearTimeout(i),i=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso17Ctrl",["UrlService","$compile","$templateRequest","$scope","$http","SlugColorService","LoadSVGService","$sce",function(a,b,c,d,e,f,g,h){function i(){var a=$("#"+o).width(),e=300,f=a/p.length,g=.1*f,i=d3.scale.linear().domain([0,100]).range([0,e-f-f/2]);n||(n={},n.svg=d3.select("#"+o).append("svg").classed("vertical-bar-svg",!0),n.detail=d3.select("#"+o).append("div").attr("id","vertical-bar-detail"),n.main=n.svg.append("g").classed("vertical-bar-g-main",!0)),n.svg.attr("height",e).attr("width",a),n.bars=n.main.selectAll(".vertical-bar-g").data(p),n.bars.enter().append("g").attr("id",function(a,b){return"vertical-bar-g-"+b}).classed("vertical-bar-g",!0).classed("categoria-"+d.currentCompromise.slug,!0).classed("categoria-unselected",!0).each(function(a,g){var i=d3.select(this);i.datum({ix:g}).append("rect").classed("vertical-bar-bg",!0).attr("height",e);var j=$(m).attr("width",f).attr("height",f).get(0);i.append("g").classed("vertical-bar-icon",!0).each(function(){this.appendChild(j.cloneNode(!0))}),i.append("rect").classed("vertical-bar-fill",!0).attr("fill","#ccc"),i.append("rect").classed("vertical-bar-value",!0).classed("fill-color",!0).datum(a).attr("fill",d.currentCompromise.color),i.append("text").classed("vertical-bar-text",!0).attr("text-anchor","middle").text(function(){return a.avance?a.avance+"%":"0%"}),i.datum({ix:g}).append("rect").classed("vertical-bar-event",!0).classed("handy",!0).attr("x",1).attr("y",1).attr("height",e-2).attr("stroke","#fff").attr("stroke-width",2).attr("fill","transparent").on("mouseover",function(){}).on("mouseout",function(){}).on("click",function(a){d.selectedPlaza=p[a.ix],d3.selectAll(".vertical-bar-g").classed("categoria-unselected",!0).classed("categoria-selected",!1),d3.selectAll(".vertical-bar-g#vertical-bar-g-"+a.ix).classed("categoria-unselected",!1).classed("categoria-selected",!0);var e=h.getTrustedResourceUrl("views/includes/plazaDetail.html");c(e).then(function(a){b($("#vertical-bar-detail").html(a).contents())(d)},function(){})})}),n.bars.attr("transform",function(a,b){return"translate("+b*f+",0)"}),n.bars.selectAll("text.vertical-bar-text").attr("x",f/2).attr("y",e-f/4+g/2),n.bars.selectAll("rect.vertical-bar-bg").attr("width",f),n.bars.selectAll("rect.vertical-bar-event").attr("width",f-2),n.bars.selectAll("g.vertical-bar-icon svg").attr("width",f).attr("height",f),n.bars.selectAll("rect.vertical-bar-fill").attr("height",e-f-f/2).attr("y",f).attr("x",g).attr("width",f-2*g),n.bars.selectAll("rect.vertical-bar-value").attr("height",function(a){return i(parseInt(a.avance))}).attr("y",function(a){return f+(e-f-f/2)-i(parseInt(a.avance))}).attr("x",g).attr("width",f-2*g)}var j=a.getUrlByPage("home"),k=new pym.Child({polling:1e3});k.sendHeight();var l=window._;d.loading=!0;var m;e.jsonp(j).success(function(a){d.currentCompromise=d.data=l.find(a,function(a){return 17===parseInt(a.numero)}),d.currentCompromise.color=f.getColorBySlug(d.currentCompromise.slug),d.currentCompromise.porcentaje_completado=parseInt(d.currentCompromise.porcentaje_completado),d.loading=!1,g.loadIcon(d.currentCompromise.icono,function(a){m=a,$(".icon-svg-container").html(a.cloneNode(!0))})});var n,o,p;d.dataLoaded=function(a,b){o=a,p=b,setTimeout(function(){i()},1e3)};var q;$(window).resize(function(){clearTimeout(q),q=setTimeout(function(){n&&i()},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso18Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService","$sce","$templateRequest","$compile",function(a,b,c,d,e,f,g,h){var i=a.getUrlByPage("home"),j=new pym.Child({polling:1e3});j.sendHeight();var k=window._;b.loading=!0,c.jsonp(i).success(function(a){b.currentCompromise=b.data=k.find(a,function(a){return 18===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.dataLoaded1=function(a,c){b.medicos=c,b.mediConfig=[],angular.forEach(c,function(a){b.mediConfig.push({icono:"subte",orientacion:"rows",items:20,base:{titulo:"",color:"#cccccc",cantidad:parseInt(a.equipos)},opciones:[{titulo:"",color:b.currentCompromise.color,cantidad:parseInt(a.equipos)}]})});var d=f.getTrustedResourceUrl("views/includes/medicos.html");g(d).then(function(c){h($("#"+a).html(c).contents())(b)})},b.prepareData2=function(a){var c={};angular.forEach(a,function(a){var b=k.reject(k.keys(a),function(a){return"especialidad"==a});angular.forEach(b,function(b){c[b]||(c[b]={}),c[b][a.especialidad]=parseInt(a[b])})});var d=[];return angular.forEach(c,function(a,c){b.values=k.keys(a),d.push(angular.merge(a,{anio:c}))}),d},b.completeConfig2=function(a){return angular.merge(a,{data:{type:"line",keys:{value:b.values,x:"anio"}},size:{height:300},padding:{top:0,right:20,bottom:10,left:100},axis:{rotated:!1,x:{type:"category",show:!0},y:{show:!0}},legend:{show:!0}})},b.chartReady2=function(a){}}]),angular.module("compromisosSiteApp").controller("Compromiso19Ctrl",["UrlService","$scope","$http","SlugColorService","LoadSVGService","$sce","$templateRequest","$compile",function(a,b,c,d,e,f,g,h){var i=a.getUrlByPage("home"),j=new pym.Child({polling:1e3});j.sendHeight();var k=window._;b.loading=!0,c.jsonp(i).success(function(a){b.currentCompromise=b.data=k.find(a,function(a){return 19===parseInt(a.numero)}),b.currentCompromise.porcentaje_completado=parseInt(b.currentCompromise.porcentaje_completado),b.currentCompromise.color=d.getColorBySlug(b.currentCompromise.slug),b.currentCompromise.secondColor="#bdbec2",b.loading=!1,e.loadIcon(b.currentCompromise.icono,function(a){$(".icon-svg-container").html(a.cloneNode(!0))})}),b.dataLoaded1=function(a,c){b.medicos=c,b.mediConfig=[],angular.forEach(c,function(a){b.mediConfig.push({icono:"subte",orientacion:"rows",items:20,base:{titulo:"",color:"#cccccc",cantidad:parseInt(a.equipos)},opciones:[{titulo:"",color:b.currentCompromise.color,cantidad:parseInt(a.equipos)}]})});var d=f.getTrustedResourceUrl("views/includes/medicos.html");g(d).then(function(c){h($("#"+a).html(c).contents())(b)})},b.prepareData2=function(a){return a},b.completeConfig2=function(a){return angular.merge(a,{data:{xFormat:"%Y",types:{cantidad_consultas:"line"},keys:{value:["cantidad_consultas"],x:"anio"},colors:{cantidad_consultas:b.currentCompromise.color}},size:{height:300},padding:{top:0,right:20,bottom:10,left:40},axis:{x:{type:"timeseries",show:!0,tick:{format:"%Y"}},y:{show:!0,min:-1}},legend:{show:!0}})},b.chartReady2=function(a){};var l;$(window).resize(function(){clearTimeout(l),l=setTimeout(function(){},500)})}]),angular.module("compromisosSiteApp").controller("Compromiso20Ctrl",["UrlService","$compile","$templateRequest","$scope","$http","SlugColorService","LoadSVGService","$sce",function(a,b,c,d,e,f,g,h){var i=a.getUrlByPage("home"),j=new pym.Child({polling:1e3});j.sendHeight();var k=window._;d.loading=!0;var l;e.jsonp(i).success(function(a){d.currentCompromise=d.data=k.find(a,function(a){return 20===parseInt(a.numero)}),d.currentCompromise.color=f.getColorBySlug(d.currentCompromise.slug),d.currentCompromise.porcentaje_completado=parseInt(d.currentCompromise.porcentaje_completado),d.loading=!1,g.loadIcon(d.currentCompromise.icono,function(a){l=a,$(".icon-svg-container").html(a.cloneNode(!0))})});d.prepareData1=function(a){return a.map(function(a){return a.mes+="-01"}),a},d.completeConfig1=function(a){return angular.merge(a,{data:{type:"line",keys:{value:["cantidad_iniciativas","meta_acumulado"],x:"mes"},colors:{cantidad_iniciativas:d.currentCompromise.color,meta_acumulado:"#ccc"}},point:{show:!1},size:{height:300},padding:{top:0,right:20,bottom:10,left:30},axis:{rotated:!1,x:{type:"timeseries",show:!0,tick:{format:"%m-%Y"}},y:{show:!0}},legend:{show:!0}})},d.chartReady1=function(a,b){},d.prepareData2=function(a){return a},d.completeConfig2=function(a){return angular.merge(a,{data:{type:"bar",
keys:{value:["proyectos","obras"],x:"estado"},colors:{cantidad_iniciativas:d.currentCompromise.color,meta_acumulado:"#ccc"},groups:[["proyectos","obras"]]},point:{show:!1},size:{height:300},padding:{top:0,right:20,bottom:10,left:30},axis:{rotated:!1,x:{type:"category",show:!0},y:{show:!0}},legend:{show:!0}})},d.chartReady2=function(a,b){},d.dataLoaded4=function(a,e){d.bubbleId=a,d.bubbleConfig={color:d.currentCompromise.color};var f=d3.sum(e,function(a){return parseInt(a.cantidad_proyectos)});d.bubbleData={name:"total",children:[]},k.each(e,function(a){d.bubbleData.children.push({name:a.area,data:Math.round(100*parseInt(a.cantidad_proyectos)/f)+"%",value:parseInt(a.cantidad_proyectos),children:[]})});var g=h.getTrustedResourceUrl("views/includes/bubble.html");c(g).then(function(c){b($("#"+a).html(c).contents())(d)})}}]),angular.module("compromisosSiteApp").directive("smartContent",function(){return{restrict:"E",replace:!0,scope:{url:"=url",title:"=titulo",nota:"=nota",fuente:"=fuente",prepareCallback:"=prepareCallback",configCallback:"=configCallback",readyCallback:"=readyCallback",simpleLoadCallback:"=simpleLoadCallback",template:"=template"},controller:["$scope","$timeout","UrlService","$http",function(a,b,c,d){function e(a){return null!==a.match(/\b\w*(youtu)\w*\b/)}function f(a){return null!==a.match(/\.(jpeg|jpg|gif|png)$/)}function g(a){return null!==a.match(/\b\w*(youtube)\w*\b/)?$.urlParam(a,"v"):null!==a.match(/\b\w*(youtu\.be)\w*\b/)?a.split("/")[3]:void 0}a.loading=!0,a.id="content-"+Math.floor(1e4*Math.random()),a.getTemplateUrl=function(){if(e(a.url)){a.loading=!1,a.ytSwitch=!1;var b=g(a.url);return a.ytThumbnail="http://img.youtube.com/vi/{{VIDEO_ID}}/maxresdefault.jpg".replace("{{VIDEO_ID}}",b),"views/directives/youtubePlayer.html"}return f(a.url)?(a.loading=!1,"views/directives/imageFull.html"):a.template?a.template:"views/directives/simpleChart.html"},a.chartConfigDefaults={data:{json:[]},padding:{top:0,right:50,bottom:0,left:50},onrendered:function(){}},a.renderChart=function(){var e=c.getUrlByCsv(a.url);a.chartConfigDefaults.bindto="#"+a.id,d.jsonp(e).success(function(c){a.prepareCallback?a.chartConfigDefaults.data.json=a.prepareCallback(c):a.chartConfigDefaults.data.json=c,a.configCallback&&(a.chartConfigDefaults=a.configCallback(a.chartConfigDefaults)),b(function(){a.chart=c3.generate(a.chartConfigDefaults),a.bindFinalEvents(),a.readyCallback&&a.readyCallback(a.chart,a.id)},500)})},a.simpleLoad=function(){var b=c.getUrlByCsv(a.url);d.jsonp(b).success(function(b){a.simpleLoadCallback&&(a.simpleLoadCallback(a.id,b),a.bindFinalEvents())})},a.bindFinalEvents=function(){a.loading=!1,$('[data-toggle="popover"]').popover()};var h;$(window).resize(function(){clearTimeout(h),h=setTimeout(function(){a.resizeFunction&&a.resizeFunction()},500)})}],template:'<ng-include src="getTemplateUrl()"/>'}}),angular.module("compromisosSiteApp").directive("iconChart",function(){return{restrict:"E",replace:!0,scope:{icono:"=icono",items:"=items",orientacion:"=orientacion",base:"=base",opciones:"=opciones"},controller:["$scope","$http","LoadSVGService",function(a,b,c){function d(){$(".icons-chart-base").css("color",a.base.color).css("border-color",a.base.color),$(".icons-chart-option").each(function(a){var b=$(this).data("color");$(this).css("color",b)}),$(".icon-chart-svg-container-icon .st0").css("fill",a.base.color);var b=0;angular.forEach(a.opciones,function(a){angular.forEach(d3.range(b,b+a.cantidad),function(){$("#icon-chart-svg-"+b+" .st0").css("fill",a.color),b++})})}a.items=a.items?parseInt(a.items):10,a.qty=d3.range(0,parseInt(a.base.cantidad)),a.range10=d3.range(0,a.items);var e=Math.floor(parseInt(a.base.cantidad)/a.items),f=parseInt(a.base.cantidad)%a.items,g=0;a.cols=a.range10.map(function(b){var c=[];return e>b&&(c=d3.range(g,g+a.items),g+=10),b==e&&(c=d3.range(g,g+f)),{items:c}}),c.loadIcon(a.icono,function(a){$(".icon-chart-svg-container-icon").html(a.cloneNode(!0)),d()})}],templateUrl:"views/directives/iconChart.html"}}),angular.module("compromisosSiteApp").directive("bubbleChart",function(){return{restrict:"E",replace:!1,scope:{container:"=container",config:"=config",data:"=bubbles"},controller:["$scope","$http",function(a,b){function c(){var b=300,c=($("#"+a.id).width()-b)/2;$("#"+a.id).width()<b&&(b=$("#"+a.id).width(),c=0);var d=d3.layout.pack().sort(null).size([b,b]).value(function(a){return parseInt(a.value)});a.chart||(a.chart={},a.chart.svg=d3.select("#"+a.id).append("svg").attr("class","bubble-container").attr("width",$("#"+a.id).width()).attr("height",b),a.chart.mainGroup=a.chart.svg.append("g").classed("main",!0)),a.chart.svg.attr("width",$("#"+a.id).width()),a.chart.mainGroup.attr("transform",function(){return"translate("+c+",0)"});var e=a.chart.mainGroup.datum(a.data).selectAll(".node").data(d.nodes);e.enter().append("g").attr("class",function(a){var b=a.children?"node":"leaf node";return b}).each(function(){d3.select(this).append("circle").filter(function(a){return"total"!==a.name}).style("fill",function(){return a.config.color}),d3.select(this).append("text").attr("dy","0em").classed("bubble-chart-text-title",!0).text(function(a){return a.name}),d3.select(this).append("text").attr("dy","1em").classed("bubble-chart-text-subtitle",!0).text(function(a){return a.data})}),e.attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),e.selectAll("circle").attr("r",function(a){return a.r})}a.id=a.container+"-directive",a.chart=null,setTimeout(function(){c()},1e3);var d;$(window).resize(function(){clearTimeout(d),d=setTimeout(function(){a.chart&&c()},500)})}],template:'<div id="{{id}}"></div>'}}),angular.module("compromisosSiteApp").run(["$templateCache",function(a){a.put("views/c01.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> <div ng-if="data.detalle_3" class="col-md-6 text-center"> <smart-content url="data.detalle_3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente" simple-load-callback="dataLoaded3" template="\'views/directives/customChart.html\'"></smart-content> </div> <div ng-if="data.detalle_4" class="col-md-6 text-center"> <smart-content url="data.detalle_4" titulo="data.detalle_4_nombre" nota="data.detalle_4_nota" fuente="data.detalle_4_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c02.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_3" class="col-md-12 text-center"> <smart-content url="data.detalle_3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente" simple-load-callback="dataLoaded3" template="\'views/directives/customChart.html\'"></smart-content> </div> </div> <hr> </div>'),a.put("views/c03.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData" config-callback="completeConfig" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> <div ng-if="data.detalle_3" class="col-md-6 text-center bar-chart-{{currentCompromise.slug}}"> <smart-content url="data.detalle_3" prepare-callback="prepareData3" config-callback="completeConfig3" ready-callback="chartReady3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c04.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData" config-callback="completeConfig" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> <div ng-if="data.detalle_3" class="col-md-6 text-center bar-chart-{{currentCompromise.slug}}"> <smart-content url="data.detalle_3" prepare-callback="prepareData3" config-callback="completeConfig3" ready-callback="chartReady3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> <div ng-if="data.detalle_4" class="col-md-6 text-center bar-chart-{{currentCompromise.slug}}"> <smart-content url="data.detalle_4" prepare-callback="prepareData4" config-callback="completeConfig4" ready-callback="chartReady4" titulo="data.detalle_4_nombre" nota="data.detalle_4_nota" fuente="data.detalle_4_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c05.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-12 text-center"> <smart-content url="data.detalle_1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente" simple-load-callback="dataLoaded" template="\'views/directives/customChart.html\'"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente" simple-load-callback="dataLoaded2" template="\'views/directives/customChart.html\'"></smart-content> </div> <div ng-if="data.detalle_3" class="col-md-6 text-center bar-chart-{{currentCompromise.slug}}"> <smart-content url="data.detalle_3" prepare-callback="prepareData3" config-callback="completeConfig3" ready-callback="chartReady3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c06.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData" config-callback="completeConfig" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_3" class="col-md-6 text-center"> <smart-content url="data.detalle_3" prepare-callback="prepareData3" config-callback="completeConfig3" ready-callback="chartReady3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> <div ng-if="data.detalle_4" class="col-md-6 text-center"> <smart-content url="data.detalle_4" prepare-callback="prepareData4" config-callback="completeConfig4" ready-callback="chartReady4" titulo="data.detalle_4_nombre" nota="data.detalle_4_nota" fuente="data.detalle_4_fuente"></smart-content> </div> </div> </div>'),a.put("views/c07.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_3" class="col-md-12 text-center"> <smart-content url="data.detalle_3" prepare-callback="prepareData3" config-callback="completeConfig3" ready-callback="chartReady3" titulo="data.detalle_3_nombre" nota="data.detalle_3_nota" fuente="data.detalle_3_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c08.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_3" class="col-md-6 text-center"> <smart-content url="data.detalle_3"></smart-content> </div> </div> </div>'),a.put("views/c09.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_3" class="col-md-6 text-center"> <smart-content url="data.detalle_3"></smart-content> </div> </div> </div>'),a.put("views/c10.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c11.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c12.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-12 text-center"> <smart-content url="data.detalle_1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente" simple-load-callback="dataLoaded" template="\'views/directives/customChart.html\'"></smart-content> </div> </div> <hr> </div>'),a.put("views/c13.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2"></smart-content> </div> </div> </div>'),a.put("views/c14.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData" config-callback="completeConfig" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c15.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_3" class="col-md-6 text-center"> <smart-content url="data.detalle_3"></smart-content> </div> </div> </div>'),a.put("views/c16.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData" config-callback="completeConfig" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c17.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-12 text-center"> <smart-content url="data.detalle_1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente" simple-load-callback="dataLoaded" template="\'views/directives/customChart.html\'"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente" simple-load-callback="dataLoaded2" template="\'views/directives/customChart.html\'"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2"></smart-content> </div> </div> <hr> </div>'),a.put("views/c18.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente" simple-load-callback="dataLoaded1" template="\'views/directives/customChart.html\'"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c19.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente" simple-load-callback="dataLoaded1" template="\'views/directives/customChart.html\'"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <hr> </div>'),a.put("views/c20.html",'<p class="text-center" ng-show="loading">Cargando...</p> <div ng-hide="loading"> <div ng-include="\'views/includes/detail.html\'" ng-cloak ng-show="currentCompromise"></div> <div class="row"> <div ng-if="data.detalle_1" class="col-md-6 text-center"> <smart-content url="data.detalle_1" prepare-callback="prepareData1" config-callback="completeConfig1" ready-callback="chartReady1" titulo="data.detalle_1_nombre" nota="data.detalle_1_nota" fuente="data.detalle_1_fuente"></smart-content> </div> <div ng-if="data.detalle_2" class="col-md-6 text-center"> <smart-content url="data.detalle_2" prepare-callback="prepareData2" config-callback="completeConfig2" ready-callback="chartReady2" titulo="data.detalle_2_nombre" nota="data.detalle_2_nota" fuente="data.detalle_2_fuente"></smart-content> </div> </div> <div class="row"> <div ng-if="data.detalle_3" class="col-md-6 text-center"> <smart-content url="data.detalle_3"></smart-content> </div> <div ng-if="data.detalle_4" class="col-md-6 text-center"> <smart-content url="data.detalle_4" titulo="data.detalle_4_nombre" nota="data.detalle_4_nota" fuente="data.detalle_4_fuente" simple-load-callback="dataLoaded4" template="\'views/directives/customChart.html\'"></smart-content> </div> </div> <hr> </div>'),a.put("views/directives/customChart.html",'<div class="detalle-frame"> <p class="detalle-frame-title text-left" ng-if="title">{{title}} </p> <i ng-if="nota || fuente" class="detalle-frame-icon glyphicon glyphicon-info-sign" data-container="body" title="{{nota}}" data-toggle="popover" data-placement="bottom" data-content="Fuente: {{fuente}} <a>hola</a>"> </i> <span ng-show="loading">Cargando...</span> <div id="{{id}}" ng-init="simpleLoad()"></div> </div>'),a.put("views/directives/iconChart.html",'<div class="icons-container-{{orientacion}}"> <div> <div class="icons-chart-option text-left" ng-repeat="o in opciones" data-color="{{o.color}}"> {{o.titulo}} </div> <div class="icons-chart-base text-right"> {{base.titulo}} </div> <div ng-if="orientacion==\'rows\'"> <div ng-repeat="q in qty" class="icon-chart-svg-container"> <div id="icon-chart-svg-{{q}}" class="icon-chart-svg-container-icon"></div> </div> </div> <div ng-if="orientacion==\'cols\'"> <div ng-repeat="(key,v) in cols" class="icon-chart-svg-container"> <div id="icon-chart-svg-{{v2}}" ng-repeat="(key2,v2) in v.items" class="icon-chart-svg-container-icon"></div> <br class="clear"> </div> </div> </div> </div>'),a.put("views/directives/imageFull.html",'<span ng-show="loading">Cargando...</span> <img ng-hide="loading" ng-src="{{url}}" class="img-responsive">'),a.put("views/directives/simpleChart.html",'<div class="detalle-frame"> <p class="detalle-frame-title text-left" ng-if="title">{{title}}</p> <i ng-if="nota || fuente" class="detalle-frame-icon glyphicon glyphicon-info-sign" data-container="body" title="{{nota}}" data-toggle="popover" data-placement="bottom" data-content="Fuente: {{fuente}}"> </i> <span ng-show="loading">Cargando...</span> <div id="{{id}}" ng-init="renderChart()"></div> </div>'),a.put("views/directives/youtubePlayer.html",'<div class="detalle-frame"> <p class="detalle-frame-title text-left" ng-if="title">{{title}} </p> <i ng-if="nota || fuente" class="detalle-frame-icon glyphicon glyphicon-info-sign" data-container="body" title="{{nota}}" data-toggle="popover" data-placement="bottom" data-content="Fuente: {{fuente}}"> </i> <span ng-show="loading">Cargando...</span> <a class="yt-switch" href="javascript:;" ng-click="ytSwitch=true;" ng-hide="ytSwitch" ng-style="{\'background-image\':\'url(\'+ytThumbnail+\')\'}"> <img class="img-responsive" src="images/play.3de9f2a4.png"> </a> <ng-youtube-embed ng-if="ytSwitch" url="url" playauto="true" color="white" disablekb="true" width="100%" height="300px" rel="false" theme="light" modestbranding="1"> </ng-youtube-embed> </div>'),a.put("views/home.html",'<div class="row hidden-device"> <div class="col-sm-3 c-option c-color-humana" data-slug="humana"> <h3 class="text-center">Ciudad a Escala Humana</h3> </div> <div class="col-sm-3 c-option c-color-disfrute" data-slug="disfrute"> <h3 class="text-center">Disfrute y Convivencia</h3> </div> <div class="col-sm-3 c-option c-option-short c-color-creatividad" data-slug="creatividad"> <h3 class="text-center">Creatividad</h3> </div> <div class="col-sm-3 c-option c-color-social" data-slug="social"> <h3 class="text-center">Integración social</h3> </div> </div> <div class="row hidden-desktop"> <div class="col-xs-3 c-option c-color-humana"></div> <div class="col-xs-3 c-option c-color-disfrute"></div> <div class="col-xs-3 c-option c-color-creatividad"></div> <div class="col-xs-3 c-option c-color-social"></div> </div> <div class="row hidden-desktop select-container"> <div class="col-xs-12"> <select ng-change="onChangeCategory()" ng-model="selectedCategory" class="form-control"> <option value="">Elegir categoría</option> <option value="humana">Ciudad a Escala Humana</option> <option value="disfrute">Disfrute y Convivencia</option> <option value="creatividad">Creatividad</option> <option value="social">Integración social</option> </select> </div> <div class="col-xs-12"> <select ng-change="onChangeGroup()" ng-model="selectedGroup" class="form-control"> <option value="home">Ordenar por nombre</option> <option value="date">Ordenar por fecha fin</option> <option value="state">Ordenar por estado</option> <option value="category">Ordenar por categoría</option> </select> </div> </div> <div class="row"> <div class="col-sm-3 hidden-device" ng-class="{\'display\':(selectedGroup==\'home\')}"> <a class="group-btn" ng-click="groupMenu(\'home\')"></a> <p class="btn-checkbox hidden-device" ng-class="{\'selected\':(selectedGroup==\'home\')}">Ordenar por nombre</p> <div id="home_chart"> <h1 class="text-center specialHead" ng-cloak ng-hide="loading"> A &raquo; Z </h1> <p class="text-center" ng-cloak ng-hide="loading">{{data.length}} compromisos</p> <p class="text-center" ng-cloak ng-show="loading">Cargando...</p> </div> <p class="sub text-center">Vista general de los compromisos</p> </div> <div class="col-sm-3 hidden-device" ng-class="{\'display\':(selectedGroup==\'date\')}"> <a class="group-btn" ng-click="groupMenu(\'date\')"></a> <p class="btn-checkbox hidden-device" ng-class="{\'selected\':(selectedGroup==\'date\')}">Ordenar por fecha de fin</p> <div id="date_chart"> <p class="text-center" ng-cloak ng-show="loading">Cargando...</p> </div> <p class="sub text-center">Cantidad de compromisos por año de finalización</p> </div> <div class="col-sm-3 hidden-device" ng-class="{\'display\':(selectedGroup==\'state\')}"> <a class="group-btn" ng-click="groupMenu(\'state\')"></a> <p class="btn-checkbox hidden-device" ng-class="{\'selected\':(selectedGroup==\'state\')}">Ordenar por estado</p> <div id="state_chart" ng-click="groupMenu(\'state\')"> <p class="text-center" ng-cloak ng-show="loading">Cargando...</p> </div> <p class="sub text-center">Cantidad de compromisos por estado de progreso</p> </div> <div class="col-sm-3 hidden-device" ng-class="{\'display\':(selectedGroup==\'category\')}"> <a class="group-btn" ng-click="groupMenu(\'category\')"></a> <p class="btn-checkbox hidden-device" ng-class="{\'selected\':(selectedGroup==\'category\')}">Ordenar por categoría</p> <div id="category_chart" ng-click="groupMenu(\'category\')"> <p class="text-center" ng-cloak ng-show="loading">Cargando...</p> </div> <p class="sub text-center">Cantidad de compromisos por categoría de pertenencia</p> </div> </div> <p class="text-center" ng-show="loading">Cargando...</p> <div ng-cloak ng-hide="loading"> <div class="row"> <div id="menu_chart"></div> </div> <div id="compromiso-detail" class="row well" ng-cloak ng-show="currentCompromise"> <div class="col-sm-3 hidden-device"> <img ng-src="{{currentCompromise.imagen}}"> </div> <div class="col-sm-6"> <div class="row"> <div class="col-xs-10 col-sm-12"><h2><small>{{currentCompromise.categoria}}</small></h2></div> <div class="col-xs-2 hidden-desktop"><a class="" href="javascript:;" ng-click="closeDetail()">Cerrar</a></div> </div> <h2>{{currentCompromise.numero}}.{{currentCompromise.titulo}}</h2> <h5>{{currentCompromise.cumplimiento}}</h5> <p> {{currentCompromise.desc}}</p> <button ng-click="redirectParent(currentCompromise.url_interna)" type="button" class="btn btn-xs upper bg-color-{{currentCompromise.slug}} hidden-device">Ver mas sobre el compromiso &#187; </button> </div> <div class="col-sm-3"> <p class="hidden-device text-right"><a class="" href="javascript:;" ng-click="closeDetail()">Cerrar</a></p> <p class="upper"><strong>Estado del Compromiso</strong></p> <p> Como lo medimos:<strong>{{currentCompromise.porcentaje_completado}}</strong> </p> <p> Tiempo Faltante:<strong>{{currentCompromise.porcentaje_completado}} </strong> </p> <div class="progress"> <div class="progress-bar bg-color-{{currentCompromise.slug}}" role="progressbar" ng-style="{ \'width\': currentCompromise.porcentaje_completado + \'%\' }"> <span class="progressbar-w" ng-hide="currentCompromise.porcentaje_completado<50">{{currentCompromise.porcentaje_completado}}% </span> </div> <div class="progress-w" ng-show="currentCompromise.porcentaje_completado<50" ng-style="{ \'width\': (100 - currentCompromise.porcentaje_completado) + \'%\' }">{{currentCompromise.porcentaje_completado}}% </div> </div> <p>Finalizacion:<strong> {{currentCompromise.cumplimiento}} </strong> </p> <div class="col-md-4 center-block"> <button ng-click="redirectParent(currentCompromise.url_interna)" id="singlebutton" name="singlebutton" type="button" class="btn btn-xs upper bg-color-{{currentCompromise.slug}} hidden-desktop center-block">Ver mas sobre el compromiso &#187; </button> </div> </div> </div> <div id="filler"></div> </div>'),
a.put("views/includes/autitos.html",'<icon-chart icono="autosConfig.icono" base="autosConfig.base" opciones="autosConfig.opciones" orientacion="autosConfig.orientacion"></icon-chart>'),a.put("views/includes/bubble.html",'<bubble-chart config="bubbleConfig" container="bubbleId" bubbles="bubbleData"></bubble-chart>'),a.put("views/includes/detail.html",'<div id="compromiso-interna" class="row c-color-{{currentCompromise.slug}} categoria-{{currentCompromise.slug}}"> <div class="icon-svg-container col-sm-1 col-xs-3 compromiso-icon"> </div> <div class="col-sm-3 col-xs-9"> <p><span class="label-header">Categoría:</span></p> <h4 class="f-color-{{currentCompromise.slug}}">{{currentCompromise.categoria}}</h4> </div> <div class="col-sm-4"> <p><span class="label-header">Cumplimiento:</span><span ng-if="currentCompromise.cumplimiento_2" class="f-color-{{currentCompromise.slug}}">{{currentCompromise.cumplimiento_label}}</span></p> <div class="progress"> <div class="progress-bar bg-color-{{currentCompromise.slug}}" role="progressbar" ng-style="{ \'width\': currentCompromise.porcentaje_completado + \'%\' }"> <span class="progressbar-w" ng-hide="currentCompromise.porcentaje_completado<50">{{currentCompromise.porcentaje_completado}}% </span> </div> <div class="progress-w" ng-show="currentCompromise.porcentaje_completado<50" ng-style="{ \'width\': (100 - currentCompromise.porcentaje_completado) + \'%\' }">{{currentCompromise.porcentaje_completado}}% </div> </div> </div> <div class="col-sm-4"> <p><span class="label-header">Tiempo faltante:</span></p> <p><span class="label-header">Finalizacion:</span>{{currentCompromise.cumplimiento}}</p> </div> </div> <div ng-if="currentCompromise.cumplimiento_2" id="compromiso-interna" class="row c-color-{{currentCompromise.slug}} categoria-{{currentCompromise.slug}}"> <div class="icon-svg-container col-sm-1 col-xs-3 compromiso-icon"> </div> <div class="col-sm-3 col-xs-9"> <p><span class="label-header">Categoría:</span></p> <h4 class="f-color-{{currentCompromise.slug}}">{{currentCompromise.categoria}}</h4> </div> <div class="col-sm-4"> <p><span class="label-header">Cumplimiento:</span><span class="f-color-{{currentCompromise.slug}}">{{currentCompromise.cumplimiento_2_label}}</span></p> <div class="progress"> <div class="progress-bar bg-color-{{currentCompromise.slug}}" role="progressbar" ng-style="{ \'width\': currentCompromise.porcentaje_completado_2 + \'%\' }"> <span class="progressbar-w" ng-hide="currentCompromise.porcentaje_completado_2<50">{{currentCompromise.porcentaje_completado_2}}% </span> </div> <div class="progress-w" ng-show="currentCompromise.porcentaje_completado_2<50" ng-style="{ \'width\': (100 - currentCompromise.porcentaje_completado_2) + \'%\' }">{{currentCompromise.porcentaje_completado_2}}% </div> </div> </div> <div class="col-sm-4"> <p><span class="label-header">Tiempo faltante:</span></p> <p><span class="label-header">Finalizacion:</span>{{currentCompromise.cumplimiento_2}}</p> </div> </div>'),a.put("views/includes/escuelaDetail.html",'<p><span class="label-header">Ubicación: </span>{{selectedEscuela.direccion}}</p> <p><span class="label-header">Comuna: </span>{{selectedEscuela.comuna}}</p> <p><span class="label-header">Tipo: </span>{{selectedEscuela.tipo}}</p>'),a.put("views/includes/medicos.html",'<div ng-repeat="(i,m) in medicos"> <p>{{m.status}}:{{m.equipos}}</p> <icon-chart icono="mediConfig[i].icono" base="mediConfig[i].base" items="mediConfig[i].items" opciones="mediConfig[i].opciones" orientacion="mediConfig[i].orientacion"></icon-chart> </div>'),a.put("views/includes/plazaDetail.html",'<div class="row"> <div class="col-md-3"> <p><span class="label-header">Nombre: </span>{{selectedPlaza.nombre}}</p> <p><span class="label-header">Superficie: </span>{{selectedPlaza.superficie}}</p> </div> <div class="col-md-3"> <p><span class="label-header">Comuna: </span>{{selectedPlaza.comuna}}</p> <p><span class="label-header">Ubicación: </span>{{selectedPlaza.direccion}}</p> </div> </div>'),a.put("views/includes/selector.html",'<p>Viendo año: <select name="options" ng-change="changeOption()" id="options" ng-model="selectedYear" ng-options="opt for opt in selectOptions"> </select> </p>'),a.put("views/includes/selectorPeriodos.html",'<p>Período: <select name="options" ng-change="changeOption()" id="options" ng-model="selectedPeriodo" ng-options="opt.value as opt.label for opt in selectOptions"> </select> </p>'),a.put("views/includes/selectorProvincias.html",'<p>Destacado: <select name="options" ng-change="changeOption()" id="options" ng-model="selectedProv" ng-options="opt for opt in selectOptions"> </select> </p>')}]);